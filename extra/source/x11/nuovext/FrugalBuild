# Last Modified: Mon, 26 Sep 2005 16:34:21 +0200
# Compiling Time: 0.19 SBU
# Maintainer: BMH1980 <bmh1980de@yahoo.de>

pkgname=nuovext
pkgver=1.5
pkgrel=1
pkgdesc="nuoveXT icon theme"
url="http://nuovext.pwsp.net/"
license="Creative Commons Attribution-NonCommercial-ShareAlike 2.5 License"
up2date="lynx -dump $url | grep 'nuoveXT-gnome-[0-9\.]\+' | grep -o '[0-9]\+\.[0-9\.]\+' | sed 's|.$||'"
source=(http://nuovext.pwsp.net/files/nuoveXT-gnome-$pkgver.tar.gz \
        http://nuevext.pwsp.net/files/nuoveXT-kde-$pkgver.tar.gz)
sha1sums=('c5cb4e90bf855ebe5c1b0f9ff1edd69f3c046026' \
          '6c15748ffc6ec502af12f6e394806114d167b9c1')
groups=('x11-extra')
archs=('i686')
depends=()
makedepends=('rox-filer')

build()
{
	themepath=/usr/share/icons/nuoveXT
	Fmkdir /usr/share/doc/$pkgname-$pkgver $themepath
	find nuoveXT-gnome-$pkgver -name "*~" -exec rm -f {} \; || return 1
	find nuoveXT-kde-$pkgver -name "*~" -exec rm -f {} \; || return 1
	cp -r nuoveXT-kde-$pkgver/* $Fdestdir/$themepath || return 1
	cp -r nuoveXT-gnome-$pkgver/* $Fdestdir/$themepath || return 1
	# Fixing some wrong file names
	for size in 12x12 16x16 24x24 36x36 48x48 128x128 ; do
		Fmv $themepath/$size/mimetypes/ggnome-mime-application-x-class-file.png \
		$themepath/$size/mimetypes/gnome-mime-application-x-class-file.png
	done
	Frm $themepath/{CHANGELOG,README*}
	Ffile nuoveXT-gnome-$pkgver/CHANGELOG /usr/share/doc/$pkgname-$pkgver/CHANGELOG-gnome
	Ffile nuoveXT-gnome-$pkgver/README_EN /usr/share/doc/$pkgname-$pkgver/README_EN-gnome
	Ffile nuoveXT-gnome-$pkgver/README_FR /usr/share/doc/$pkgname-$pkgver/README_FR-gnome
	Ffile nuoveXT-kde-$pkgver/CHANGELOG /usr/share/doc/$pkgname-$pkgver/CHANGELOG-kde
	Ffile nuoveXT-kde-$pkgver/README_EN /usr/share/doc/$pkgname-$pkgver/README_EN-kde
	Ffile nuoveXT-kde-$pkgver/README_FR /usr/share/doc/$pkgname-$pkgver/README_FR-kde
	rm -f nuoveXT-{gnome,kde}-$pkgver/{CHANGELOG,README_EN,README_FR}
	# Creating ROX icons
	Fmkdir $themepath/MIME
	cp /usr/share/Apps/ROX-Filer/ROX/MIME/*.png $Fdestdir/$themepath/MIME/ || return 1
	for i in $Fdestdir/$themepath/48x48/mimetypes/gnome-mime*.png ; do
		link=`basename $i | sed 's|gnome-||'`
		for typ in application audio image text video ; do
			link=`echo $link | sed "s|$typ-|$typ:|"`
		done
		Frm $themepath/MIME/$link
		Fln $themepath/48x48/mimetypes/`basename $i` $themepath/MIME/$link
	done
	Fln $themepath/48x48/mimetypes/gnome-mime-application-msword.png \
	$themepath/MIME/mime-application\:vnd.ms-word.png
	Fln $themepath/48x48/filesystems/gnome-fs-executable.png \
	$themepath/MIME/mime-application\:x-executable.png
	Fln $themepath/48x48/mimetypes/font.png \
	$themepath/MIME/mime-application\:x-font.png
	Fln $themepath/48x48/mimetypes/font_truetype.png \
	$themepath/MIME/mime-application\:x-font-ttf.png
	Fln $themepath/48x48/mimetypes/gnome-mime-text-x-java.png \
	$themepath/MIME/mime-appliaction\:x-java.png
	Fln $themepath/48x48/mimetypes/file_temporary.png \
	$themepath/MIME/mime-application\:x-trash.png
	Fln $themepath/48x48/filesystems/gnome-fs-blockdev.png \
	$themepath/MIME/mime-inode\:blockdevice.png
	Fln $themepath/48x48/filesystems/gnome-fs-chardev.png \
	$themepath/MIME/mime-inode\:chardevice.png
	Fln $themepath/48x48/filesystems/gnome-fs-directory.png \
	$themepath/MIME/mime-inode\:directory.png
	Fln $themepath/48x48/filesystems/gnome-fs-directory.png \
	$themepath/MIME/mime-inode\:mount-point.png
	Fln $themepath/48x48/mimetypes/message.png \
	$themepath/MIME/mime-message.png
	for icon in `find $Fdestdir/$themepath/MIME -type f` ; do
		icon=`echo $icon | sed "s|$Fdestdir||"`
		Frm $icon
		Fln /usr/share/Apps/ROX-Filer/ROX/MIME/`basename $icon` $icon
	done
	sed -i 's|^Directories.*|&,MIME|g' $Fdestdir/$themepath/index.theme
	echo -e '\n[MIME]\nSize=48\nContext=MimeTypes\nType=Fixed' >> \
	$Fdestdir/$themepath/index.theme
}

# vim: ft=sh
