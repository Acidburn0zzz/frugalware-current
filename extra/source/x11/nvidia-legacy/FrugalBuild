# Last Modified: Mon, 20 Mar 2006 21:31:29 +0100
# Compiling Time: 0.01 SBU
# Maintainer: Krisztian VASAS <iron@ironiq.hu>
# Contributor: VMiklos <vmiklos@frugalware.org>

pkgname=nvidia-legacy
pkgver=1.0_7174
nvver=`echo $pkgver|sed 's/_/-/'`
pkgrel=3
pkgdesc="3d accelerated display driver for older nVidia cards"
url="http://www.nvidia.com/object/linux_display_archive.html"
depends=('gcc' 'make' 'kernel-source')
conflicts=('libgl')
provides=('opengl')
groups=('x11-extra')
archs=('i686' 'x86_64')
#up2date="lynx -dump http://www.nvidia.com/object/linux_display_archive.html|grep Version:|sed -n 's/.*: \(.*\)/\1/;s/-/_/;1 p'"
up2date="1.0_7174"
[ "$CARCH" == "x86_64" ] && jarch=x86_64 && sha1=f784f185b445eff8499c430636ae0dbf3e61b5a8 && pkgnum=2
echo "$CARCH" | grep -q 'i.86' && jarch=x86 && sha1=a3bab2b52d3183634c0c45f0f03be328449d6f02 && pkgnum=1
source=(http://download.nvidia.com/XFree86/Linux-$jarch/$nvver/NVIDIA-Linux-$jarch-$nvver-pkg$pkgnum.run)
sha1sums=($sha1)

install=$pkgname.install

build() {  
	cd $startdir/src/
	chmod +x NVIDIA-Linux-$jarch-$nvver-pkg$pkgnum.run
	
	mkdir -p $startdir/pkg/tmp/.$pkgname
	chmod 1777 $startdir/pkg/tmp
	cp NVIDIA-Linux-$jarch-$nvver-pkg$pkgnum.run $startdir/pkg/tmp/.$pkgname/

}

# vim: ft=sh
