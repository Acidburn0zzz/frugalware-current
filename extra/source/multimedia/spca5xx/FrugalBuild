# Last modified: Sun, 30 Oct 2005 00:35:48 +0200
# Compiling time: 0.04 SBU
# Maintainer: Janny <janny@frugalware.org>

pkgname=spca5xx
pkgver=0.57.03
pkgrel=2
pkgdate=20051001
pkgdesc="spca5xx is a kernel module with support for over 150 USB webcams"
url="http://mxhaard.free.fr"
license="GPL"
depends=('kernel=2.6.14-1')
makedepends=('kernel-source=2.6.14-1')
archs=('i686')
groups=('multimedia-extra')
install=$pkgname.install
up2date="lynx -dump $url/download.html | grep release | sed 's/.* \([0-9\.]\+\): .*/\1/'"
source=(http://mxhaard.free.fr/spca50x/Download/spca5xx-$pkgdate.tar.gz $pkgname-$pkgver-version_h.diff)
sha1sums=('b688447b53f2cf4f6b671b4b87c35684556401c0' \
	  '45980046e01955f3d204eb9c397e3ec6fc44176c')

build() {
	Fcd $pkgname-$pkgdate
	Fpatchall
	make
	sed -i s\%MODULE_INSTALLDIR\ =\ /lib%MODULE_INSTALLDIR\ =\ $Fdestdir/lib% Makefile
	sed -i s\%/lib/modules/\`%$Fdestdir/lib/modules/\`% Makefile
	sed -i s\%/sbin/depmod\ -ae%% Makefile
	sed -i s\%@/sbin/depmod%% Makefile
	sed -i s\%su\ -c\ \"make\ install-root\"%make\ install-root% Makefile
	make install	
}

# optimalization ok

# vim: ft=sh
