# Last Modified: Fri, 21 Apr 2006 01:55:15 +0200
# Compiling Time: 2.41 SBU
# Maintainer: Kapolnasi Tamas <ktamas@tdc.hu>

pkgname=kdebluetooth
pkgver=1.0_beta1
pkgrel=5
pkgdesc="KDE Bluetooth Framework"
url="http://kde-bluetooth.sf.net/"
depends=('kdepim' 'dbus>=0.23.3' 'bluez-libs>=2.21' 'openobex>=1.0.0' 'xmms' 'libusb')
groups=('kde-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=89888|grep -m1 "kdebluetooth-"|sed 's/.*-\(.*\).t.*/\1/'"
source=(http://switch.dl.sourceforge.net/sourceforge/kde-bluetooth/$pkgname-$pkgver.tar.bz2 fix_openobex gcc41)
sha1sums=('58787b1d11ec98b1de52ebbe1f236218a78f5c13' \
          'ff4422449373c7cc4e7692b73ed810e93e47e5e2' \
          '5739188197d4c615dd653ea7a9629bd29f7e6879')

build()
{
        Fcd
        Fpatch fix_openobex
        Fpatch gcc41
        make -f Makefile.cvs || return 1
        cd kdebluetooth/kbluetoothd/kcm_btpaired/
        Fsed '/etc/init.d/bluez-utils stop' '/etc/rc.d/rc.bluetooth stop' pairedtab.cpp
        Fsed '/etc/init.d/bluez-utils start' '/etc/rc.d/rc.bluetooth start' pairedtab.cpp

        cd ../../../../
        Fbuild --disable-debug --without-debug --with-gnu-ld \
                --enable-irmcsynckonnector
}


# optimalization ok
