# Last Modified: Wed, 08 Mar 2006 15:00:11 +0100
# Compiling Time: 34.03 SBU
# Maintainer: Kapolnasi Tamas <ktamas@tdc.hu>

pkgname=koffice
pkgver=1.4.2
pkgrel=2
pkgdesc="An integrated Office suite for KDE"
url="http://www.koffice.org"
depends=('kdebase' 'libpqxx' 'wv2' 'mysql' 'libwpd' 'python' 'imagemagick')
makedepends=('esd' 'qt-docs' 'doxygen')
groups=('kde-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url |grep current|sed 's/.*e \(.*\) i.*/\1/'"
options=('nodocs')
source=(ftp://ftp.kde.org/pub/kde/stable/$pkgname-$pkgver/src/$pkgname-$pkgver.tar.bz2)
# http://www.koffice.org/releases/$pkgver-release.php
sha1sums=('474ab6d289ff1330c200768b30a3dbe271cd26c5')

subpkgs=('koffice-docs')
subdescs=('Koffice Documentation')
subdepends=('koffice')
subgroups=('kde-extra')
subarchs=('i686 x86_64')

build()
{
	Fcd
	for i in `find . -iname configure`
	do
		Fsed '-O2' '' $i
	done
	Fbuild CXXFLAGS="$CXXFLAGS -fno-strict-aliasing -Wno-deprecated" \
	       --disable-debug --without-debug \
	       --with-gnu-ld --disable-dependency-tracking \
	       --enable-new-ld-flags --enable-final
	Fsed 'Icon=.*' 'Icon=kugar' $Fdestdir/usr/share/applnk/Office/KThesaurus.desktop
	Fsed 'Icon=.*' 'Icon=kugar' $Fdestdir/usr/share/applnk/Office/kudesigner.desktop
	Fsplit koffice-docs usr/share/doc
}
# vim: ft=sh

# optimalization OK
