# Last Modified: Mon, 06 Feb 2006 17:52:51 +0100
# Compiling Time: ~0.04 SBU
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=acx100
pkgver=0.3.33
pkgrel=1
pkgdesc="The ACX100/ACX111 wireless network driver."
url="http://acx100.erley.org/"
depends=('wireless_tools' 'kernel=2.6.15-1')
makedepends=('kernel-source=2.6.15-1')
groups=('network-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://acx100.erley.org/current/Changelog|grep '^\[[0-9]\+\] [0-9]'|sed 's/.*] \(.*\)/\1/;q'"
source=(http://acx100.erley.org/acx-20060205.tar.bz2 \
	http://195.66.192.167/linux/acx_patches/fw.tar.bz2 \
	http://acx100.erley.org/acx_fw/acx100usb_dlink_dwl120+/fw1/ACX100_USB.bin)
sha1sums=('e38712077203efbe1c4b92d0ba3b56d020064c65' \
	'9d72ce0c7e9010d8fc9c8dd431b46662d6de1ddc' \
	'6446b0736b6b08e6dc25620f7584e4f7a1a11cb4')

build() {
	sed -i -e "s|usr/share/acx|lib/firmware|g" common.c || Fdie
	make -C /lib/modules/`uname -r`/build M=`pwd` || Fdie
	Fmkdir /lib/modules/`uname -r`/net
	cp $Fsrcdir/acx.ko $Fdestdir/lib/modules/`uname -r`/net/acx.ko || Fdie
	Ffile /lib/firmware/ACX100_USB.bin
	Fcd fw
	Ffile fw/acx111_2.3.1.31/* /lib/firmware
	Ffile fw/acx100_1.9.8.b/* /lib/firmware
	Ffile fw/acx100_1.0.9-USB/* /lib/firmware
}

# optimalization OK - uses the kernel's option

# vim: ft=sh
