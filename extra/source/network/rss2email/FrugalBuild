# Last Modified: Wed, 06 Jul 2005 11:27:20 +0200
# Compiling Time: ~1 minute
# Contributor: CSÉCSY László <boobaa@ajrg.hu>

pkgname=rss2email
pkgver=2.3
pkgrel=1
pkgdesc="read newsfeeds from your email client"
url="http://www.aaronsw.com/2002/rss2email/"
depends=('python')
groups=('network-extra')
archs=('i686')
up2date="lynx -dump http://www.aaronsw.com/2002/$pkgname/ | grep '$pkgname-.*\.py' | head -n 1 | sed 's|.*$pkgname-\([0-9\.]*\)\.py|\1|'"
source=(http://www.aaronsw.com/2002/$pkgname/$pkgname-$pkgver.py \
	http://www.aaronsw.com/2002/html2text/html2text-1.0.py \
	http://diveintomark.org/projects/feed_parser/feedparser.py \
	http://www.aaronsw.com/2002/rss2email/r2e README.Frugalware)
# could not find official md5sum, made it myself
md5sums=('62cd2f12c5046b669679632d663c1f15' 'b3f7ea1f22dec5a906f7f51d15ce46ab' \
	 'ddfd4ea34efae5925975291c1592914d' '202d2d5cb88a80190419f403c6c47ddb' \
	 'fbbe9275c91c044af00ff9affad65afe')

build()
{
	mkdir build
	cd build
	Fsed 'python2.2' 'python' ../html2text-1.0.py
	Fsed "import sys" "import sys\nsys.path.append(\"/usr/share/$pkgname\")\nsys.path.append(\"~/.$pkgname\")" ../$pkgname-$pkgver.py
	Fsed "python $pkgname" "python /usr/share/$pkgname/$pkgname" ../r2e
	Fsed "cd ~" "mkdir -p ~/.$pkgname\ncd ~" ../r2e
	cd ..

	Fmkdir /usr/bin /usr/share/$pkgname
	Ffilerel html2text-1.0.py /usr/share/$pkgname/html2text.py
	Ffilerel /usr/share/$pkgname/feedparser.py
	Ffilerel $pkgname-$pkgver.py /usr/share/$pkgname/$pkgname.py
	Fexerel /usr/bin/r2e
	Fdoc README.Frugalware
}

# vim: ft=sh

# optimalization OK - noarch
