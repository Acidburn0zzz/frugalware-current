# Last Modified: Mon, 08 Aug 2005 12:46:59 +0200
# Compiling Time: 0.15 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=ipw2200
pkgver=1.0.6
pkgrel=1
pkgdesc="Intel. PRO/Wireless 2200BG Driver"
url="http://ipw2200.sourceforge.net/"
depends=('wireless_tools' 'kernel=2.6.12-3' 'ieee80211')
makedepends=('kernel-source=2.6.12-3')
groups=('network-extra')
archs=('i686' 'x86_64')
install=$pkgname.install
up2date="lynx -dump $url/downloads.php|grep tgz|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
# the later can be downloaded from http://ipw2200.sourceforge.net/firmware.php
source=(http://dl.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tgz \
	$pkgname-fw-2.3.tgz)
sha1sums=('d9b837204cf6626bc6e94fd7b452db8b132034cf' \
          '38d4c7d51a5da6b0faa7e5a348db701cc370900f')

build()
{
	Fsed '\(KMISC :=\) ' '\1 $(DESTDIR)' Makefile
	Fsed '/sbin/depmod -a' '' Makefile
	Fbuild || return 1
	Ffile *.fw /lib/firmware/
}

# vim: ft=sh
