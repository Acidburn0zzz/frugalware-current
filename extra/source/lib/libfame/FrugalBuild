# Last Modified: Thu, 07 Jul 2005 14:58:05 +0200
# Compiling Time: ~0.08 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=libfame
pkgver=0.9.1
pkgrel=1
pkgdesc="libFAME is a library for fast (real-time) MPEG video encoding, written in C and assembly."
url="http://fame.sourceforge.net/"
makedepends=('automake')
depends=('glibc')
groups=('lib-extra')
archs=('x86_64' 'i686')
up2date="lynx -dump 'http://prdownloads.sourceforge.net/fame/?sort_by=date&sort=desc'|grep libfame-[0-9\.]*.tar.gz|sed -n 's/.*-\(.*\).t.*/\1/;1 p'"
source=(http://dl.sourceforge.net/sourceforge/fame/$pkgname-$pkgver.tar.gz libfame-0.9.1-gentoopatchset.patch \
	libfame-0.9.1-x86_64_fmallocfix.patch)
md5sums=('880085761e17a3b4fc41f4f6f198fd3b' 'e93184cf126ed3ca7874d019b2595471' \
	'b604db210e301daa94dc90ad369fc828')
license="GPL2"
[ "$CARCH" == "x86_64" ] && sse=" --enable-sse"

build () {
	Fcd
	Fpatch libfame-0.9.1-gentoopatchset.patch || return 1
	[ "$CARCH" == "x86_64" ] && Fpatch libfame-0.9.1-x86_64_fmallocfix.patch
	Fsed "-march=i[345]86 " "" configure 
	Facu
	Fmake --includedir=/usr/include/libfame $sse
	Fmakeinstall
}

# optimalization ok

# vim: ft=sh
