# Last Modified: Wed, 12 Apr 2006 18:40:54 +0530
# Compiling Time: 2.76 SBU
# Maintainer: Priyank <priyankmg@gmail.com>

pkgname=cmake
pkgver=2.2.3
pkgrel=1
pkgdesc="Cross platform make"
url="http://www.cmake.org/"
depends=('glibc' 'ncurses')
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://cmake.org/HTML/Download.html| grep -m1 Latest | sed 's/.* \(.*\).*/\1/g' | sed 's/(\|)//g'"
source=(http://www.cmake.org/files/v2.2/$pkgname-$pkgver.tar.gz)
sha1sums=('90ad1145c9f9045511652ceb9960b77dd91e318e')

build() {
	Fcd
	./bootstrap $Fconfopts
	make || return 1
	make DESTDIR=$Fdestdir install
	
	# Install vim syntax and indentation scripts
	Fmkdir usr/share/vim/{syntax,indent}
	Finstallrel 644 Docs/cmake-syntax.vim usr/share/vim/syntax/cmake.vim
	Finstallrel 644 Docs/cmake-indent.vim usr/share/vim/indent/cmake.vim
	
	# Fix permissions
	find $Fdestdir/usr/share/CMake/Modules -type f -exec chmod 644 "{}" ";"
}

# optimalization OK
