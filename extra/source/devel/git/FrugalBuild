# Last Modified: Thu, 23 Feb 2006 22:03:36 +0100
# Compiling Time: 0.11 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=git
pkgver=1.2.3
pkgrel=1
pkgdesc="the stupid content tracker"
url="http://www.kernel.org/pub/software/scm/git/"
depends=('curl' 'openssl')
replaces=('git-core')
provides=('git-core')
conflicts=('git-core')
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump \"$url/?C=M;O=D\"|grep bz2$|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=($url/$pkgname-$pkgver.tar.bz2)
sha1sums=('3bf7ce4f3267b4dab9b31f60a81c4eaa12d1c4a8')

build()
{
	Fsed '-O2' "$CFLAGS" Makefile
	Fmkdir /usr/bin
	make prefix=/usr || Fdie
	make DESTDIR=$Fdestdir prefix=/usr install || Fdie
	Fmkdir /usr/share/doc/$pkgname-$pkgver/
	cp Documentation/*.txt $Fdestdir/usr/share/doc/$pkgname-$pkgver/

	# libgit
	Ffilerel /usr/lib/libgit.a
	Ffilerel *.h /usr/include/git/
}

# optimalization ok
