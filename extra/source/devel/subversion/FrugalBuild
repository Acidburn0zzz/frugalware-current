# Last Modified: Sun, 19 Feb 2006 20:31:45 +0100
# Compiling Time: 0.93 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=subversion
pkgver=1.3.0
pkgrel=3
pkgdesc="A version control system that is a compelling replacement for CVS."
url="http://subversion.tigris.org/"
depends=('neon' 'apr-util')
backup=(etc/httpd/conf/modules.d/mod_dav_svn.conf)
makedepends=('python' 'apache' 'j2sdk' 'ruby')
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url/project_packages.html|grep best|sed 's/.*]\(.*\)/\1/'"
source=(http://$pkgname.tigris.org/downloads/$pkgname-$pkgver.tar.bz2 rc.svnserve \
	mod_dav_svn.conf)
sha1sums=('0c5c4acfbd576da39cd60450f3e16b81c3d7c209' \
          '97c1e3055ad1e25e96d21a38e9525ce2a8c45c10' \
          'b4012364a9fbd9e8c490a4819780c31c67940428')

build()
{
	unset MAKEFLAGS
	Fconf --with-{apr-util=/usr,apr=/usr,berkeley-db,zlib,neon=/usr} --disable-neon-version-check
	( make external-all && \
		make LT_LDFLAGS="-L$Fdestdir/usr/lib" local-all ) || return 1
	Fmakeinstall

	# hook scripts
	Fmkdir /usr/share/subversion
	cp -r tools/hook-scripts $Fdestdir/usr/share/subversion
	Frm /usr/share/subversion/hook-scripts/*.in
	Fmkdir /usr/share/doc/$pkgname-$pkgver
	cp -r doc $Fdestdir/usr/share/doc/$pkgname-$pkgver
	Frcd svnserve
	Ffile /etc/httpd/conf/modules.d/mod_dav_svn.conf
}

# vim: ft=sh

# optimalization OK
