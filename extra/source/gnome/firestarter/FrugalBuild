# Last modified: Wed, 22 Jun 2005 12:13:19 +0000
# Compiling time: ~1 minutes
# Maintainer: Janny <janny@vnet.hu>

pkgname=firestarter
pkgver=1.0.3
pkgrel=2
pkgdesc="Firestarter a new ganeration Linux firewall system"
url="http://fs-security.com"
license="GPL"
makedepends=('glib2' 'gnome-vfs' 'gettext' 'libglade' 'perl-xml' 'libgnomeui' 'gtk+2' 'desktop-file-utils')
depends=('iptables' 'gtk+2' 'gnome-vfs' 'gconf')
groups=('gnome-extra')
backup=(etc/firestarter/{configuration,firestarter.sh,events-filter-hosts,events-filter-ports,firewall,sysctl-tuning,user-pre,user-post} \
	etc/firestarter/inbound/{allow-from,allow-service,forward,setup} \
	etc/firestarter/outbound/{allow-from,allow-service,allow-to,deny-from,deny-service,deny-to,setup})
archs=('i686' 'x86_64')
up2date="lynx -dump http://prdownloads.sourceforge.net/firestarter/?sort_by=date\&sort=desc|grep firestarter-[0-9\.]*\.tar.gz$|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=(http://dl.sourceforge.net/sourceforge/firestarter/$pkgname-$pkgver.tar.gz \
	rc.firestarter \
	README.Frugalware \
	$pkgname-desktop.patch)
md5sums=('f46860a9e16dac4b693bd05f16370b03' 'e0926cde46c6e2cd8581a308fb5c8d10'\
         'acc7415a5fc42a599b30de60a5cb93ac' 'be10971a058cc9e3f5fd7ca7b297ba16')

build()
{
	Fmkdir /etc/$pkgname/{inbound,outbound}

	Fbuild --sysconfdir=/etc --localstatedir=/var \
	--mandir=/usr/man --infodir=/usr/info --enable-shared || return 1

	# Install icon for the menu files.
	Ffilerel pixmaps/$pkgname.png /usr/share/pixmaps/$pkgname.png

	# Install configure files.
	touch $Fdestdir/etc/firestarter/configuration
	touch $Fdestdir/etc/firestarter/events-filter-hosts
	touch $Fdestdir/etc/firestarter/events-filter-ports
	touch $Fdestdir/etc/firestarter/firestarter.sh
	touch $Fdestdir/etc/firestarter/firewall
	touch $Fdestdir/etc/firestarter/sysctl-tuning
	touch $Fdestdir/etc/firestarter/user-pre
	touch $Fdestdir/etc/firestarter/user-post
	touch $Fdestdir/etc/firestarter/inbound/allow-from
	touch $Fdestdir/etc/firestarter/inbound/allow-service
	touch $Fdestdir/etc/firestarter/inbound/forward
	touch $Fdestdir/etc/firestarter/inbound/setup
	touch $Fdestdir/etc/firestarter/outbound/allow-from
	touch $Fdestdir/etc/firestarter/outbound/allow-service
	touch $Fdestdir/etc/firestarter/outbound/allow-to
	touch $Fdestdir/etc/firestarter/outbound/deny-from
	touch $Fdestdir/etc/firestarter/outbound/deny-service
	touch $Fdestdir/etc/firestarter/outbound/deny-to
	touch $Fdestdir/etc/firestarter/outbound/setup

	# Files atributes.
	chown -R root:root $Fdestdir/etc/$pkgname
	chmod -R 400 $Fdestdir/etc/$pkgname
	chmod 700 $Fdestdir/etc/$pkgname
	chmod 700 $Fdestdir/etc/$pkgname/{inbound,outbound,$pkgname.sh}
	
	# Start in any boot.
	Frcd

	# install Frugalware Readme file
	Fdoc README.Frugalware
}

# vim: ft=sh
