# Last modified: Mon, 01 May 2006 05:19:03 +0200
# Compiling time: 1.24 SBU
# Maintainer: alex_extreme <alex.extreme2@gmail.com>

pkgname=beagle
pkgver=0.2.6
pkgrel=2
pkgdesc="Search tool that ransacks your personal information space"
url="http://beagle-project.org"
depends=('gecko-sharp' 'gmime>=2.1.19' 'libexif' 'sqlite3' 'sqlite2' 'scrnsaverproto' 'libxscrnsaver' 'perl-xml' \
	'evolution-sharp' 'wv' 'python' 'gtk2-sharp' 'gsf-sharp')
makedepends=('intltool' 'pygtk' 'zip' 'firefox')
backup=('etc/beagle/crawl-applications' 'etc/beagle/crawl-documentation' 'etc/beagle/crawl-windows')
groups=('gnome-extra')
archs=('i686' 'x86_64')
Finclude gnome
source=(http://ftp.gnome.org/pub/GNOME/sources/beagle/$preup2date/beagle-$pkgver.tar.gz)
sha1sums=('996d4e9a8dee09384aeefee8f3cb71f68c3b25f3')

build() {
	export MONO_SHARED_DIR=$startdir/pkg/weird
	mkdir -p $MONO_SHARED_DIR
	
	Fcd
	Fpatchall 
	Fmake --disable-evolution-sharp --enable-inotify --disable-epiphany-extension
	Fmakeinstall
	
	rm -rf $startdir/pkg/etc/cron.d
	mkdir -p $startdir/pkg/etc/cron.daily
	cat > $startdir/pkg/etc/cron.daily/beagle-crawl-system << 'EOF'
#!/bin/sh

/usr/libexec/beagle-crawl-system
EOF
	
	rm -rf $MONO_SHARED_DIR
}

# optimization OK
