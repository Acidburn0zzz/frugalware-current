# Last Modified: Wed, 12 Jul 2006 14:40:08 +0200
# Compiling Time: 1.2 SBU
# Maintainer: Priyank <priyankmg@gmail.com>

pkgname=seahorse
pkgver=0.9.1
pkgrel=1
pkgdesc="GNOME application for managing PGP keys"
url="http://seahorse.sourceforge.net/"
depends=('gtksourceview' 'gpgme' 'libsoup' 'nautilus' 'libnotify' 'openssh')
makedepends=('gedit' 'gettext' 'openldap' 'intltool' 'pkgconfig' 'gnome-doc-utils')
nondevel=1
_F_gnome_schemas=('/etc/gconf/schemas/seahorse-gedit.schemas'
        '/etc/gconf/schemas/seahorse.schemas')
_F_gnome_scrollkeeper="y"
_F_gnome_desktop="y"
Finclude gnome gnome-scriptlet
groups=('gnome-extra')
archs=('i686' 'x86_64')
sha1sums=('7731987e8ca0f50a11288a128b48d1f56be744c8')

build()
{
	unset MAKEFLAGS
	Fsed 'chmod u+s $(bindir)' 'chmod u+s $(DESTDIR)$(bindir)' agent/Makefile.in
	Fsed 'mkdir -p $(datadir).*' '' plugins/nautilus/Makefile.in
	Fsed 'update-mime-database $(datadir).*' '' plugins/nautilus/Makefile.in

	Fconf --enable-ldap --enable-hkp --enable-gedit \
	--enable-nautilus --enable-agent \
	--enable-libnotify

	cd libseahorse
	make || return 1
	cd ..
	make || return 1
	Fmakeinstall GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 DESTDIR=$Fdestdir
	Fbuild_gnome_scriptlet
}

# optimization OK
