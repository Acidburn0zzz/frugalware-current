# Last modified: Sun, 20 Mar 2005 14:21:16 +0100
# Compiling time: ~1 minute
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=monodevelop
pkgver=0.5.1
pkgrel=2
pkgdesc="A project to port SharpDevelop to Gtk#"
url="http://www.mono-project.com/"
depends=('gecko-sharp' 'gtksourceview-sharp' 'shared-mime-info' 'gnome-vfs' \
	'monodoc' 'libglade' 'firefox')
makedepends=('intltool')
groups=('gnome-extra')
install=$pkgname.install
up2date=`lynx -dump 'http://www.mono-project.com/downloads/'|grep monodevelop|sed -n 's/.*-\(.*\).t.*/\1/;2 p'`
source=(http://www.go-mono.com/archive/1.0.5/$pkgname-$pkgver.tar.gz \
	00-$pkgname-$pkgver-hu.patch \
	$pkgname.install)
md5sums=('d89458a2d909da09b2cc1f37e16d8990' \
	'bd7c45f679d4a2f796a7214d68472c69' \
	'90b1ad9e6836ec1b801c9392413593e3')

build() {
	export MONO_SHARED_DIR=$startdir/pkg/weird
	mkdir -p $MONO_SHARED_DIR
	export MOZILLA_FIVE_HOME=/usr/lib/firefox

	cd $startdir/src/$pkgname-$pkgver
	patch -p1 < $startdir/src/00-$pkgname-$pkgver-hu.patch || return 1
	./configure --prefix=/usr

	make || return 1

	sed -i 's|^.*\tupdate-mime-database.*$||' Makefile

	# This makes monodevelop aware of MOZILLA_FIVE_HOME.
	sed -i 's|#!/bin/bash|\0\nexport MOZILLA_FIVE_HOME=/usr/lib/firefox|' monodevelop.in

	make GACUTIL="/usr/bin/gacutil /root $startdir/pkg/usr/lib" DESTDIR=$startdir/pkg install
	rm -rf $MONO_SHARED_DIR
}

# vim: ft=sh
