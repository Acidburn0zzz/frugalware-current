# Last modified: Tue, 05 Jul 2005 17:55:03 +0200
# Compiling time: ~7 minutes
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=dia
pkgver=0.94
pkgrel=2
pkgdesc="A program for drawing structured diagrams"
url="http://www.gnome.org/projects/dia/"
depends=('libgnomeui' 'python' 'scrollkeeper' 'desktop-file-utils')
makedepends=('intltool')
groups=('gnome-extra')
archs=('i686' 'x86_64')
install=$pkgname.install
[ -e ../../../../source/gnome/up2date.gnome ] && . ../../../../source/gnome/up2date.gnome
source=(http://ftp.gnome.org/pub/gnome/sources/$pkgname/$preup2date/$pkgname-$pkgver.tar.bz2 \
	00-$pkgname-$pkgver-hu.patch )
md5sums=('63584224912dab49fed8d2cf87ea2d85' 'efc8562d05844532b31c8d39f76799a9')

build() {
	Fcd
	Fpatch 00-$pkgname-$pkgver-hu.patch || return 1
	find . -name Makefile.in -exec sed -i -e 's/-scrollkeeper-update.*//' {} \;
	if [ -f omf.make ]; then
		sed -i -e 's/-scrollkeeper-update.*//' omf.make
	fi
	Fmake --enable-gnome --with-python
	Fmakeinstall || return 1
}

# vim: ft=sh

# optimalization OK
