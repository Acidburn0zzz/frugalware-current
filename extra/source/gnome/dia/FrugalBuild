# Last modified: Mon, 14 Mar 2005 16:33:17 +0100
# Compiling time: ~7 minutes
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=dia
pkgver=0.94
pkgrel=2
pkgdesc="A program for drawing structured diagrams"
url="http://www.gnome.org/projects/dia/"
depends=('libgnomeui' 'python' 'scrollkeeper' 'desktop-file-utils')
makedepends=('intltool')
groups=('gnome-extra')
install=$pkgname.install
[ -e ../../../../source/gnome/up2date.gnome ] && . ../../../../source/gnome/up2date.gnome
source=(http://ftp.gnome.org/pub/gnome/sources/$pkgname/$preup2date/$pkgname-$pkgver.tar.bz2 \
	00-$pkgname-$pkgver-hu.patch \
	$pkgname.install)
md5sums=('63584224912dab49fed8d2cf87ea2d85' \
	'efc8562d05844532b31c8d39f76799a9' \
	'19fdd18498d3d4b2b12c5bd11b8cab6f')

build() {
	cd $startdir/src/$pkgname-$pkgver
	patch -p1 < $startdir/src/00-$pkgname-$pkgver-hu.patch || return 1
	find . -name Makefile.in -exec sed -i -e 's/-scrollkeeper-update.*//' {} \;
	if [ -f omf.make ]; then
		sed -i -e 's/-scrollkeeper-update.*//' omf.make
	fi
	./configure --prefix=/usr --enable-gnome --with-python

	make || return 1

	make DESTDIR=$startdir/pkg install
}

# vim: ft=sh
