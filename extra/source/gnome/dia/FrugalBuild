# Last modified: Wed, 31 May 2006 21:35:15 +0200
# Compiling time: ~1.6 SBU
# Contributor: Laszlo Dvornik <dvornik@gnome.hu>
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=dia
pkgver=0.95
pkgrel=1
pkgdesc="A program for drawing structured diagrams"
url="http://www.gnome.org/projects/dia/"
depends=('libgnomeui' 'pygtk' 'atk' 'libsm' 'libxslt' 'freetype2' 'pango')
makedepends=('intltool' 'pyxml' 'docbook-xsl')
rodepends=('scrollkeeper' 'desktop-file-utils')
groups=('gnome-extra')
archs=('i686' 'x86_64')
Finclude gnome
up2date="lynx -dump $url/downld.html |grep Do.*ver |sed -ne 's/.*ion //;1p'"
source=(${source[@]} dia-0.94-CVE-2006-2480_CVE-2006-2453.patch)
sha1sums=('1cb085769a2323e67bcd7b1d7e63f00063d029f9' \
	'3239c2272ebe24084694fb965147a11b491302b7')

build() {
	find . -name Makefile.in -exec sed -i -e 's/-scrollkeeper-update.*//' {} \;
	if [ -f omf.make ]; then
		sed -i -e 's/-scrollkeeper-update.*//' omf.make
	fi
	Fbuild --enable-gnome --with-python --with-gnu-ld
}

# optimization OK
