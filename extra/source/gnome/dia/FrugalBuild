# Last modified: Mon, 22 May 2006 21:01:19 +0200
# Compiling time: ~1.6 SBU
# Contributor: Laszlo Dvornik <dvornik@gnome.hu>
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=dia
pkgver=0.94
pkgrel=6
pkgdesc="A program for drawing structured diagrams"
url="http://www.gnome.org/projects/dia/"
depends=('libgnomeui' 'pygtk' 'scrollkeeper' 'desktop-file-utils')
makedepends=('intltool')
groups=('gnome-extra')
archs=('i686' 'x86_64')
Finclude gnome
source=(${source[@]} 00-$pkgname-$pkgver-hu.patch $pkgname-$pkgver-gcc4.patch \
	dia-$pkgver-secfix.diff dia-0.94-secfix2.patch0 dia-0.94-CVE-2006-2480.patch0)
sha1sums=('5d8467738f386d3e908cdb588240dc9a9aa4584a' \
	'ba5e15cd9b18a1c9a6363e2662e9ed2852264351' \
	'76da842695a5ac06ce14b07de988c938cf95dd25' \
	'49dbfeca5895232821afd70f22d8087edeaa120b' \
	'373010fc093c852dbda46421612e9fa2eb0d9b34' \
	'710100e4661f6de5984e8235e2017e2553f893dd')

build() {
	Fpatchall
	find . -name Makefile.in -exec sed -i -e 's/-scrollkeeper-update.*//' {} \;
	if [ -f omf.make ]; then
		sed -i -e 's/-scrollkeeper-update.*//' omf.make
	fi
	Fmake --enable-gnome --with-python
	Fmakeinstall
}

# optimization OK
