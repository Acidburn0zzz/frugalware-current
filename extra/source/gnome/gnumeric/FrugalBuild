# Last modified: Wed, 22 Jun 2005 11:36:53 +0000
# Compiling time: ~10min
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=gnumeric
pkgver=1.4.3
pkgrel=1
pkgdesc="The GNOME spreadsheet"
url="http://www.gnome.org/projects/gnumeric/"
depends=('libgnomedb' 'libgsf' 'scrollkeeper' 'desktop-file-utils')
makedepends=('intltool' 'python')
groups=('gnome-extra')
archs=('x86_64')
license=('GPL-2')
install=$pkgname.install
up2date=`pud -s http://www.gnome.org/projects/gnumeric/ -e 'gnumeric-(.*?)\.tar'`
source=(ftp://ftp.gnome.org/pub/gnome/sources/$pkgname/$pkgver/$pkgname-$pkgver.tar.bz2 \
	$pkgname.install)
md5sums=('b684eec48b1696d7a8d7152d1e17741c' 'ff3013beb0af7d1bbd50c59a9b0a0226')

build() {
	Fcd
	find . -name Makefile.in -exec sed -i -e 's/-scrollkeeper-update.*//' {} \;
	if [ -f omf.make ]; then
		Fsed '-scrollkeeper-update.*' '' omf.make
	fi
	Fmake --enable-ssindex --disable-schemas-install || return 1
	Fmakeinstall GCONF_DISABLE_SCHEMA_INSTALL=1 || return 1
	Frm /usr/share/mc/
}
