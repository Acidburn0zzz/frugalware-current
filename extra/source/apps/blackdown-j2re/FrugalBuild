# Last Modified: Thu, 30 Jun 2005 02:41:46 +0000
# Compiling Time: 0.04 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=blackdown-j2re
pkgver=1.4.2_02
realver=1.4.2-02
mainver=1.4.2
relver=02
pkgrel=1
pkgdesc="Blackdown's java runtime environment"
url="http://www.blackdown.org/java-linux.html"
[ "$CARCH" == "x86_64" ] && jarch=amd64 && jfdir=amd64 && jmd5=dc4d79332f7fc5a1a729415584ab0f22 && jdir=amd64
echo "$CARCH" |grep -q 'i.86' && jarch=i586 && jfdir=i386 && jmd5= && jdir=linux
pkgurl="ftp://xenia.sote.hu/pub/mirrors/java.blackdown.org/JDK-$mainver/$jfdir"
depends=('gcc' 'x')
groups=('extra-apps')
archs=('x86_64')
#up2date="lynx -dump $pkgurl|grep '[0-9\.]\+/$'|tail -n 1|sed 's|.*/\(.*\)/|\1|'"
source=($pkgurl/$relver/j2re-$realver-linux-$jfdir.bin \
	blackdown-j2re.sh)
md5sums=("$jmd5" '6b2587affedf6fe39981b92f2b3f443b')

build()
{
	Fmkdir /usr/lib
	cd $Fdestdir/usr/lib
	echo "yes" | \
	sh $Fsrcdir/j2re-$realver-linux-$jarch.bin

	mv j2re$mainver $pkgname
	for i in $pkgname/*
	do
		[ -f $i ] && rm -f $i
	done
	chown -R root.root $Fdestdir/*

	Fexe /etc/profile.d/$pkgname.sh
	Fmkdir /usr/lib/mozilla/plugins
	Fln /usr/lib/$pkgname/plugin/$jarch/mozilla/libjavaplugin_oji.so \
		/usr/lib/mozilla/plugins/libjavaplugin_oji-BD.so
}

# optimalization ok

# vim: ft=sh
