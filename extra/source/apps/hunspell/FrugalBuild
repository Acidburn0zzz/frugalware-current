# Last modified: Tue, 07 Jun 2005 16:58:25 +0000
# Compiling time: ~10 seconds
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=hunspell
pkgver=1.0_rc2
pkgrel=1
pkgdesc="An interactive Hungarian spell checker"
url="http://magyarispell.sourceforge.net/"
depends=('gcc' 'ncurses' 'readline')
groups=('apps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://magyarispell.sourceforge.net/|grep ]Hunspell|sed -ne 's/.* \(.*\) (.*/\1/;s/-/_/;s/RC/rc/;1 p'"
source=(http://magyarispell.sourceforge.net/$pkgname-1.0-RC2.tar.gz \
	http://magyarispell.sourceforge.net/hu_HU-1.0-RC2.tar.gz \
	http://forditas.fsf.hu/scripts/huspell \
	huspell-po \
	hunspell-optimalization-fix.patch)
md5sums=('a90f951c575798616bb890a969d346d7' \
	'9368dd2105b388b0c12a58d276adad5e' \
	'f08d58e755f3435107947d87f2f01d94' \
	'6b0e7f17444c0994fd339bbeaa3267f4' \
	'4d2b8a1df6143e78a22550b80fb55c11')

build() {
	cd $startdir/src/$pkgname-1.0-RC2
	Fpatch hunspell-optimalization-fix.patch || return 1
	mv $startdir/src/hu_HU.{aff,dic} $startdir/src/$pkgname-1.0-RC2

	Fmake || return 1

	mkdir -p $startdir/pkg/usr/bin
	cp {hunspell,hunp} $startdir/pkg/usr/bin
	ln -s hunspell $startdir/pkg/usr/bin/hunstem
	install -m 755 $startdir/src/huspell $startdir/pkg/usr/bin
	install -m 755 $startdir/src/huspell-po $startdir/pkg/usr/bin
	mkdir -p $startdir/pkg/usr/share/myspell
	cp {hu_HU.aff,hu_HU.dic} $startdir/pkg/usr/share/myspell
	ln -s hu_HU.aff $startdir/pkg/usr/share/myspell/magyar.aff
	ln -s hu_HU.dic $startdir/pkg/usr/share/myspell/magyar.dic
	ln -s hu_HU.aff $startdir/pkg/usr/share/myspell/hungarian.aff
	ln -s hu_HU.dic $startdir/pkg/usr/share/myspell/hungarian.dic
	ln -s hu_HU.aff $startdir/pkg/usr/share/myspell/default.aff
	ln -s hu_HU.dic $startdir/pkg/usr/share/myspell/default.dic
	mkdir -p $startdir/pkg/usr/share/man/{man1,man4}
	cp man/{hunspell.1,hunp.1} $startdir/pkg/usr/share/man/man1
	cp man/hunspell.4 $startdir/pkg/usr/share/man/man4
	mkdir -p $startdir/pkg/usr/share/locale/hu/LC_MESSAGES
	cp hunspell.mo $startdir/pkg/usr/share/locale/hu/LC_MESSAGES
}

# vim: ft=sh
