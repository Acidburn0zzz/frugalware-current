# Last Modified: Fri, 16 Jun 2006 01:13:00 +0200
# Compiling Time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=os-prober
pkgver=37922
pkgrel=1
pkgdesc="Utility to detect other OSes on a set of drives."
url="http://svn.debian.org/wsvn/d-i"
depends=()
groups=('apps-extra')
archs=('i686')
up2date="lynx -dump http://ftp.frugalware.org/pub/other/sources/os-prober/|Flasttarbz2"
source=(http://ftp.frugalware.org/pub/other/sources/os-prober/os-prober-$pkgver.tar.bz2 \
	os-prober-frugalware.diff)

build()
{
	echo "$CARCH" |grep -q 'i.86' && _arch=x86
	[ "$CARCH" == "x86_64" ] && _arch=x86
	[ "$CARCH" == "ppc" ] && _arch=powerpc
	Fcd $pkgname
	Fpatchall
	Fmkdir /var/lib/os-prober
	Fexerel /usr/bin/os-prober
	Fexerel /usr/bin/linux-boot-prober
	Ffilerel /usr/share/os-prober/common.sh
	for i in os-probes os-probes/mounted os-probes/init \
		linux-boot-probes linux-boot-probes/mounted
	do
		Fmkdir /usr/lib/$i/ #?
		Fexerel $i/common/* /usr/lib/$i/
		[ -e "$i/$_arch" -a "`ls $i/$_arch 2>&1`" ] && Fexerel $i/$_arch/* /usr/lib/$i
	done
}

sha1sums=('18b67dbde2c361d4da7cf058fb27c228204315c6' \
	  'afe2baf4d27201e741a6912a643ce74e5aca9a2a')
