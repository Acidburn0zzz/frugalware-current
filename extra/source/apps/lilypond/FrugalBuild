# Last Modified: Sun, 14 May 2006 18:44:09 +0200
# Compiling time: 2.29 SBU
# Maintainer: CSÉCSY László <boobaa@frugalware.org>

pkgname=lilypond
pkgver=2.8.2
pkgrel=2
pkgdesc="music notation for everyone"
url="http://lilypond.org/web/"
depends=('fontforge' 'mftrace>=1.2.3' 'guile' 'texinfo' 'python' 'gettext' 'pango' 'espgs' 'urw-fonts')
rodepends=('fontconfig' 'freetype2')
makedepends=('netpbm' 'imagemagick' 'rsync')
groups=('apps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://lilypond.org/web/' | grep 'Stable.*Docum' | sed 's/.* \([0-9\.]\+\) .*/\1/'"
source=(http://lilypond.org/download/v2.8/$pkgname-$pkgver.tar.gz)
sha1sums=('dcc6cac33285ff15c7134d7a9bd2553052665120')
options=('scriptlet')

docpkg=lilypond-doc
subpkgs=('lilypond-doc')
subdescs=('Documentation for LilyPond')
subdepends=('lilypond')
subgroups=('apps-extra')
subarchs=('i686 x86_64')

build()
{
	Fbuild --with-ncsb-dir=/usr/share/ghostscript/fonts
	make web
	make DESTDIR=$Fdestdir/usr/share/doc/$pkgname-$pkgver/ webdir= web-install
	Fsplit lilypond-doc usr/share/doc/$pkgname-$pkgver/web-root/
}

# optimization OK
