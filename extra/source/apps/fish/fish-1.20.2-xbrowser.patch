diff -Naur fish-1.20.2.orig/init/fish_function.fish fish-1.20.2/init/fish_function.fish
--- fish-1.20.2.orig/init/fish_function.fish	2006-02-16 21:20:14.000000000 +0100
+++ fish-1.20.2/init/fish_function.fish	2006-02-16 21:20:57.000000000 +0100
@@ -92,7 +92,7 @@
 
 		# If we are in a graphical environment, check if there is a graphical
 		# browser to use instead.
-		if test "$DISPLAY" -a \( "$XAUTHORITY" = "$HOME/.Xauthority" -o "$XAUTHORITY" = "" \)
+		if test (echo $WINDOWID) -a \( "$LOGNAME" = "$USER" \)
 			for i in $graphical_browsers
 				if which $i 2>/dev/null >/dev/null
 					set fish_browser $i
