diff -Naur fish-1.19.0.orig/init/fish_function.fish fish-1.19.0/init/fish_function.fish
--- fish-1.19.0.orig/init/fish_function.fish	2005-12-25 23:05:36.000000000 +0100
+++ fish-1.19.0/init/fish_function.fish	2005-12-26 09:22:59.000000000 +0100
@@ -115,7 +115,7 @@
 
 		# If we are in a graphical environment, we check if there is a
 		# graphical browser to use instead.
-		if test (echo $DISPLAY) -a \( "$XAUTHORITY" = "$HOME/.Xauthority" -o "$XAUTHORITY" = "" \)
+		if test (echo $WINDOWID) -a \( "$LOGNAME" = "$USER" \)
 			for i in $graphical_browsers
 				if which $i 2>/dev/null >/dev/null
 					set fish_browser $i
