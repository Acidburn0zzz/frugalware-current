# Last Modified: Sat, 09 Jul 2005 02:07:55 +0200
# Compiling Time: ~1 minute
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=doxygen
pkgver=1.4.3
pkgrel=1
pkgdesc="Doxygen is the documentation system for C/C++"
url="http://www.doxygen.org/"
depends=('gcc' 'libpng')
groups=('apps-extra')
archs=('x86_64' 'i686')
up2date="lynx -dump ftp://ftp.stack.nl/pub/users/dimitri/|grep 'doxygen-[0-9\.]*src.tar.gz'|tail -n 1|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'| sed -n 's/.src//;1 p'"
source=(ftp://ftp.stack.nl/pub/users/dimitri/$pkgname-$pkgver.src.tar.gz \
	doxygen-cflags-and-misc-fixes.patch \
	doxygen-use-system-png.patch)
md5sums=('6cad81b86c1271777b8ee7c953a496ac' '0563683665b9462db86ccab1b5f4419d'\
         'bd624fdd084e6f665f5bec13d2e5f22e')

build () {
	Fcd
	sed -i.orig -e "s:^\(TMAKE_CFLAGS_RELEASE\t*\)= .*$:\1= ${CFLAGS}:" \
	    -e "s:^\(TMAKE_CXXFLAGS_RELEASE\t*\)= .*$:\1= ${CXXFLAGS}:" \
	    tmake/lib/linux-g++/tmake.conf
	Fpatchall
	# Do not replace with Fbuild or Fconf or any F* macros !!!
	./configure --prefix $Fdestdir/usr --release
	make DESTDIR=$Fdestdir all
	make docs
	make install INSTALL=$Fdestdir/usr
	Fmkdir usr/share/doc/$pkgname-$pkgver/
	cp -a $Fsrcdir/$pkgname-$pkgver/html/ $Fdestdir/usr/share/doc/$pkgname-$pkgver
}

# optimalization OK

# vim: ft=sh
