# Last Modified: Wed, 18 Jan 2006 16:51:19 +0100
# Compiling Time: 0.88 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=doxygen
pkgver=1.4.6
pkgrel=1
pkgdesc="Doxygen is the documentation system for C/C++"
url="http://www.doxygen.org/"
depends=('libpng' 'graphviz' 'libstdc++')
makedepends=('tetex' 'espgs')
groups=('apps-extra')
archs=('x86_64' 'i686')
up2date="lynx -dump ftp://ftp.stack.nl/pub/users/dimitri/|grep 'doxygen-[0-9\.]*src.tar.gz'|tail -n 1|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'| sed -n 's/.src//;1 p'"
source=(ftp://ftp.stack.nl/pub/users/dimitri/$pkgname-$pkgver.src.tar.gz \
	doxygen-cflags-and-misc-fixes.patch \
	doxygen-use-system-png.patch \
	doxygen-qstring-gcc4.patch0 \
	doxygen-latexgen.patch)
sha1sums=('b40fb369b38cf82ec06826dc65574953c3ad8a3c' \
	  '08e08e9fee37844a00db0eb261bd704c95ac109e' \
	  'eba842007660f5c55baaf751d407d7ce5bd4b46c' \
	  '4d4583ea8acc976a7f0f9dafa28c70f6cc494729' \
	  '2a4392fb7e61637fe399c7df3f6d081cf0496471')

build ()
{
	Fcd
	sed -i.orig -e "s:^\(TMAKE_CFLAGS_RELEASE\t*\)= .*$:\1= ${CFLAGS}:" \
	    -e "s:^\(TMAKE_CXXFLAGS_RELEASE\t*\)= .*$:\1= ${CXXFLAGS}:" \
	    tmake/lib/linux-g++/tmake.conf
	Fpatchall
	# Do not replace with Fbuild or Fconf or any F* macros !!!
	./configure --prefix $Fdestdir/usr --release || Fdie
	make DESTDIR=$Fdestdir all || Fdie
	make docs || Fdie
	make install INSTALL=$Fdestdir/usr || Fdie
	Fmkdir usr/share/doc/$pkgname-$pkgver/
	cp -a $Fsrcdir/$pkgname-$pkgver/html/ \
		$Fdestdir/usr/share/doc/$pkgname-$pkgver
}

# optimalization OK

# vim: ft=sh
