# Last Modified: Wed, 17 Aug 2005 02:02:28 +0200
# Compiling Time: 0.03 SBU
# Contributor: Tuxbubling <tuxbubling@tiscali.fr>

pkgname=john
pkgver=1.6
pkgrel=1
pkgdesc="John the Ripper is a fast password cracker."
url="http://www.openwall.com/john/"
depends=()
groups=('apps-extra')
archs=('i686')
up2date="lynx -dump http://www.openwall.com/john/ | grep 'Unix - sources' | sed 's/.*Ripper //' | cut -f 1 -d ' '"
source=(http://www.openwall.com/john/c/$pkgname-$pkgver.tar.gz \
			john john-mailer)
sha1sums=('b49d371496b8ba5e439665b83190b1e4d4640bea' '215f1d0f271c10bccff2ef652ad8f07cb6e32196' \
			'ba20178891ed1ca2aac942af00cf0ce5d6738921')

build()
{
	# Create needed dirs
	Fmkdir usr/lib/
	Fmkdir usr/share/doc/$pkgname-$pkgver

	# Add CFLAGS and run make
	Fcd $pkgname-$pkgver/src
	Fsed "CFLAGS =" "CFLAGS = $CFLAGS" ./Makefile
	Fsed "-m486" "" ./Makefile
	make linux-x86-mmx-elf || return 1

	# Move and install files
	mv ../run $Fdestdir/usr/lib/john
	mv ../doc $Fdestdir/usr/share/doc/$pkgname-$pkgver
	Fexe usr/bin/john
	Fexe usr/bin/john-mailer
	Fln /usr/lib/john/john usr/bin/unafs
	Fln /usr/lib/john/john usr/bin/unique
	Fln /usr/lib/john/john usr/bin/unshadow
	Frm usr/lib/john/un{afs,ique,shadow}
}

# optimalization ok
# vim: ft=sh
