# Last Modified: Tue, 11 Apr 2006 14:26:19 +0530
# Compiling Time: 0.17 SBU
# Maintainer: Priyank <priyankmg@gmail.com>
# Contributor: theD3viL <matej.gorenc@gmail.com>

pkgname=uptimed
pkgver=0.3.7
pkgrel=1
pkgdesc="A deamon which log your uptime and uprecords"
url="http://podgorny.cz/uptimed"
depends=('glibc')
groups=('apps-extra')
archs=('i686')
install="uptimed.install"
up2date="lynx -dump http://podgorny.cz/uptimed/releases | grep tar.bz2 | sed -n 's/.*-\(.*\)\.t.*/\1/;$ p'"
source=(http://podgorny.cz/uptimed/releases/$pkgname-$pkgver.tar.bz2 \
		rc.uptimed)
sha1sums=('5b420550e471244914eec26e0f4cb8bd540ebc76' '679143e3177b8fd45e097f6eaab25ac3ad080b7d')

build()
{	
	Fcd
	./configure $Fconfopts
	
	# Tweak certain files to work with Frugalware
	Fsed "/var/spool/uptimed" "$Fdestdir/var/log/uptimed" Makefile
	Fsed "/var/spool/uptimed" "$Fdestdir/var/log/uptimed" Makefile.am
	Fsed "/var/spool/uptimed/bootid" "/var/log/uptimed/bootid" libuptimed/urec.h
	Fsed "/var/spool/uptimed/records" "/var/log/uptimed/records" libuptimed/urec.h
	
	make || return 1
	make prefix=$Fdestdir/usr sysconfdir=$Fdestdir/etc/uptimed install
	
	# Copy the rc.uptimed script
	Frcd2

	# Move uptimed.conf-dist to uptimed.conf
	Fmv etc/uptimed/uptimed.conf-dist etc/uptimed/uptimed.conf
}

# optimalization OK
