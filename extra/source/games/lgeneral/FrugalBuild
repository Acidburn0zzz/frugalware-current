# Last Modified: Fri, 25 Nov 2005 22:28:56 +0100
# Compiling Time: 0.17 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=lgeneral
pkgver=1.2beta_9
pkgrel=1
pkgdesc="LGeneral is a turn-based strategy engine heavily inspired by Panzer General."
url="http://lgames.sourceforge.net/index.php?project=LGeneral"
depends=('sdl_mixer')
groups=('games-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://lgames.sourceforge.net/downloads.php | grep 'http.*lgeneral-.*\.tar\.gz' | sed -e 's/.*lgeneral-\(.*\)\.tar\.gz.*/\1/' | sed -e 's/-/_/'"
source=(http://switch.dl.sourceforge.net/sourceforge/lgeneral/$pkgname-`echo $pkgver | sed 's/_/-/'`.tar.gz \
	http://switch.dl.sourceforge.net/sourceforge/lgeneral/pg-data.tar.gz \
	01-gcc4-fix.patch)
sha1sums=('bcbe78e7c29761282bb12b1651e548334a07d22f' \
	  '2f7a63f0a8efc3215e5e61ec6b513b7d8ee3c32b' \
	  '8439f52f73512ab6bc63949a14443bb9fa80259f')

# NOTE: You must build this package NOT in chroot!

build()
{
	Fcd $pkgname-`echo $pkgver | sed 's/_/-/'`
	Fpatchall
	Fautoconfize

	# Needed for Panzer General data files population
	cp -pPR $Fsrcdir/$pkgname-`echo $pkgver | sed 's/_/-/'` $Fsrcdir/temp || return 1

	Fmake --localstatedir=/var/games/$pkgname --enable-sdl-mixer --disable-dependency-tracking
	Fmakeinstall

	# Populate Panzer General data files # What a braindead mode ...
	cd $Fsrcdir/temp
	Fmake --datadir=$Fdestdir/usr/share --enable-sdl-mixer --disable-dependency-tracking

	$Fsrcdir/temp/lgc-pg/lgc-pg -s $Fsrcdir/pg-data -d $Fdestdir/usr/share/games/lgeneral || return 1
}

# vim: ft=sh

# optimalization OK
