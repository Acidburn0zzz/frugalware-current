# Last modified: Fri, 28 Jan 2005 12:51:48 +0100
# Compiling time: ~1 minute
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=openttd
pkgver=0.3.6
pkgrel=1
pkgdesc="An open source clone of the Microprose game Transport Tycoon Deluxe"
url="http://www.openttd.com/"
depends=('sdl' 'zlib' 'libpng')
up2date=`elinks -dump 'http://prdownloads.sourceforge.net/openttd/?sort_by=date&sort=desc'|grep openttd-[0-9\.]*-source.tar.gz|sed -n 's/.*-\(.*\)-source.*/\1/;1 p'`
source=(http://dl.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver-source.tar.gz \
	$pkgname.desktop \
	README)
md5sums=('4127f17e45c5dd2e1720ebf2a96e7eac' \
	'0c4f8fbb62ebbccf174b9e15d02408d3' \
	'94ec8b1ff3447535eb8a1b591031df9c')

build() {
	cd $startdir/src/$pkgname-$pkgver

	make PREFIX=/usr INSTALL=1 BINARY_DIR=bin DATA_DIR=share/openttd \
		PERSONAL_DIR=.openttd USE_HOMEDIR=1 RELEASE=$pkgver || return 1

	make DEST_DIR=$startdir/pkg install

	# Install GNOME menu file.
	install -D -m644 -o root -g root $startdir/src/$pkgname.desktop \
		$startdir/pkg/usr/share/applications/$pkgname.desktop
}

# vim: ft=sh
