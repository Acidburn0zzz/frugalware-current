# Last Modified: Sat, 20 Aug 2005 13:33:53 +0200
# Compiling Time: ~7.87 SBU
# Maintainer: BMH1980 <bmh1980de@yahoo.de>

pkgname=xmame
pkgver=0.99
pkgrel=1
pkgdesc="MAME is an arcade machine emulator."
url="http://x.mame.net/"
depends=('arts' 'expat' 'sdl' 'zlib')
groups=('games-extra')
archs=('i686')
up2date="lynx -dump $url/news-info.html | grep released | head -n 1 | cut -d '-' -f 2 | cut -d ' ' -f 1"
source=($url/download/$pkgname-$pkgver.tar.bz2
        http://cheat.retrogames.com/cheat.zip
        http://www.mameworld.net/highscore/uhsdat099.zip
        http://www.arcade-history.com/download/history0_99b.zip
	http://www.mameworld.net/mameinfo/update/Mameinfo098u1a.zip
	http://www.mameworld.net/catlist/files/catver.zip)
sha1sums=('083ef1238d695b902ebf8e74d70ebae590d8248c' \
          '3eaa1be4a85a888de99ae4af38cc850e8a957b8e' \
          '621db755a333637ecc53026801fb10a942e5e78a' \
          '849a77215c16ba0daa4e6625a6911c45ebe61056' \
          'aadbd09ad261c07627fc381e73ac4f1e333a6ea6' \
          'c663013828df89ebec1e343312466b0813060f52')
license="(C) 1997-2005 Nicola Salmoria and the MAME team"

build()
{
	Fcd
	Fsed "# TARGET = mame" "TARGET = mame" makefile.unix
	Fsed "CFLAGS =" "CFLAGS = $CFLAGS" makefile.unix
	Fsed "PREFIX = /usr/local" "PREFIX = \$(DESTDIR)/usr" makefile.unix
	Fsed "# JOY_STANDARD = 1" "JOY_STANDARD = 1" makefile.unix
	Fsed "# SOUND_ESOUND = 1" "SOUND_ESOUND = 1" makefile.unix
	Fsed "# SOUND_ALSA = 1" "SOUND_ALSA = 1" makefile.unix
	Fsed "# SOUND_ARTS_TEIRA = 1" "SOUND_ARTS_TEIRA = 1" makefile.unix
	Fsed "# SOUND_ARTS_SMOTEK = 1" "SOUND_ARTS_SMOTEK = 1" makefile.unix
	Fsed "# SOUND_SDL = 1" "SOUND_SDL = 1" makefile.unix
	Fmake -f makefile.unix || return 1
	Fmakeinstall
	Fexerel chdman romcmp xml2info /usr/bin
	Fdocrel todo
	cp -rv src/unix/doc/* $Fdestdir/usr/share/doc/$pkgname-$pkgver/
	Fln /usr/bin/xmame.x11 /usr/bin/xmame
	Fmkdir /usr/share/xmame
	Ffile cheat.dat hiscore.dat history.dat mameinfo.dat /usr/share/xmame
	cp -rv src/unix/cab $Fdestdir/usr/share/xmame
	make clean
	Fsed "TARGET = mame" "# TARGET = mame" makefile.unix
	Fsed "# TARGET = mess" "TARGET = mess" makefile.unix
	Fmake -f makefile.unix
	Fmakeinstall
	Fln /usr/bin/xmess.x11 /usr/bin/xmess
}

# optimalization ok - i686

# vim: ft=sh
