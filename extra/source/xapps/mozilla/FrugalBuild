# Last Modified: Thu, 28 Jul 2005 15:47:09 +0200
# Compiling Time: ~2,1 hours
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=mozilla
pkgver=1.7.10
pkgrel=1
pkgdesc="The Mozilla Web Browser"
url="http://www.mozilla.org/"
depends=('gtk+2' 'libidl')
groups=('xapps-extra')
archs=('i686' 'x86_64')
makedepends=('zip')
up2date="lynx -dump http://www.mozilla.org/|grep 'Mozilla icon'|sed 's/.* \(.*\) /\1/'"
source=(http://ftp.mozilla.org/pub/mozilla.org/mozilla/releases/mozilla$pkgver/source/$pkgname-$pkgver-source.tar.bz2 config \
	mozilla-1.7.6-gcc4.patch mozilla-1.7.8-amd64.patch)
md5sums=('27d4215b2a52aff47dcf328b3b135fa2' '6d8ced410bf579bc002bcbeb3111d895' \
	'a3ab6ae2213780c0e20c5b9aa8f018e9' 'eb21396de389b3ef0277d5f95d59c348')

build()
{
	Fcd $pkgname
	Fpatch mozilla-1.7.6-gcc4.patch
	[ "$CARCH" == "x86_64" ] && mozilla-1.7.8-amd64.patch
	sed "s/-march i686/$CFLAGS/" $startdir/src/config >.mozconfig
	export MOZILLA_OFFICIAL=1
	export BUILD_OFFICIAL=1

	make -f client.mk build || return 1

	Fmkdir /usr/bin
	make DESTDIR=$Fdestdir install
	Frm /etc
	Fmv /usr/lib/mozilla-$pkgver /usr/lib/mozilla
	Fln mozilla /usr/lib/mozilla-$pkgver
	Fln mozilla-$pkgver /usr/include/mozilla
	Frm /usr/share/aclocal/
}

# vim: ft=sh

# optimalization OK
