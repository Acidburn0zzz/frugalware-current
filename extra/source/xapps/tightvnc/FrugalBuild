# Last modified: Wed, 14 Sep 2005 12:47:01 +0200
# Compiling time: SBU
# Maintainer: Janny <janny@frugalware.org>

pkgname=tightvnc
pkgver=1.3dev7
extraver=_unixsrc
pkgrel=1
pkgdesc="VNC Unix server && viewer"
url="http://www.tightvnc.com"
license="GPL"
depends=('xorg' 'libjpeg' 'zlib')
conflict=('vnc')
archs=('i686')
groups=('xapps-extra')
up2date="lynx -dump $url/|grep $pkgname-[0-9\.]*\$extraver.tar.bz2|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=(http://dl.sourceforge.net/sourceforge/vnc-tight/$pkgname-$pkgver$extraver.tar.bz2)
sha1sums=('7af9cf0c6b5e9dd7487429fc60f320ebdd2e097d')

build() {
	# make global
	cd $Fsrcdir/vnc_unixsrc || return 1
	xmkmf || return 1
	make World || return 1

	# building Xvnc
	cd Xvnc || return 1
	./configure || return 1
	make || return 1

	# copying files
	Fmkdir /usr/bin
	Fmkdir /usr/man/man1
	cd .. || return 1
	./vncinstall $Fdestdir/usr/bin $Fdestdir/usr/man || return 1
	Ffilerel classes/* /usr/lib/vnc/classes
}

# optimalization OK

# vim: ft=sh
