# Last modified: Mon, 26 Sep 2005 00:06:04 +0200
# Compiling time: SBU
# Maintainer: Janny <janny@frugalware.org>

pkgname=tightvnc
pkgver=1.3dev7
extraver=_unixsrc
pkgrel=1
pkgdesc="VNC Unix server && viewer"
url="http://www.tightvnc.com"
license="GPL"
depends=('xorg' 'libjpeg' 'zlib')
conflict=('vnc')
archs=('i686' 'x86_64')
groups=('xapps-extra')
up2date="lynx -dump $url/download.html|grep $pkgname-[0-9\.]*$extraver.tar.bz2|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=(http://dl.sourceforge.net/sourceforge/vnc-tight/$pkgname-$pkgver$extraver.tar.bz2 \
	tightvnc-1.3dev7-x86_64-fix.patch)
sha1sums=('7af9cf0c6b5e9dd7487429fc60f320ebdd2e097d' \
	  '42bc2b534ec9327d6b8ba9a8b3f4ff22f2660734')

build() {
	# make global
	cd $Fsrcdir/vnc_unixsrc || return 1
	Fpatchall
	
	xmkmf -a || return 1
	make CDEBUGFLAGS="$CFLAGS" World || return 1

	# building Xvnc
	cd Xvnc || return 1
	./configure || return 1
	make CDEBUGFLAGS="${CFLAGS}" || return 1

	# copying files
	Fmkdir /usr/bin
	Fmkdir /usr/man/man1
	cd .. || return 1
	./vncinstall $Fdestdir/usr/bin $Fdestdir/usr/man || return 1
	Ffilerel classes/* /usr/lib/vnc/classes
}

# optimalization OK

# vim: ft=sh
