# Last Modified: Sun, 13 Feb 2005 12:04:55 +0100
# Compiling Time: ~0.1 SBU
# Contributor: VMiklos <mamajom@axelero.hu>
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu> 

pkgname=latex2html
pkgver=2002_2_1
pkgrel=2
pkgdesc="A converter written in Perl that converts LaTeX documents to HTML."
url="http://saftsack.fs.uni-bayreuth.de/~latex2ht/"
depends=('perl' 'espgs' 'tetex' 'libpng' 'libungif' 'netpbm')
groups=('xapps-extra')
install=$pkgname.install
up2date="lynx -dump 'http://saftsack.fs.uni-bayreuth.de/~latex2ht/current/?C=M;O=D'|grep tar.gz$|sed -n 's/.*l-\(.*\)\.t.*/\1/;s/-/_/g;1 p'"
source=(http://saftsack.fs.uni-bayreuth.de/~latex2ht/current/$pkgname-`echo $pkgver|sed s/_/-/g`.tar.gz)
md5sums=('a79cda0648c8721ab6df5020cd11e220')

build() {
	cd $startdir/src/$pkgname-`echo $pkgver|sed s/_/-/g`
	./configure --prefix=$startdir/pkg/usr \
		--shlibdir=$startdir/pkg/usr/lib/$pkgname \
		--with-texpath=$startdir/pkg/usr/share/texmf/tex/latex/html \
		--enable-wrapper --enable-gif --enable-png

	make || return 1
	make check || return 1
	
	make install
	for i in `grep -R $startdir/pkg *|cut -d : -f 1|sort -u`
	do
		sed -i "s%$startdir/\(pkg\|src\)%%g" $startdir/pkg/usr/$i
	done
	cd $startdir/pkg/usr/ && mv cfgcache.pm l2hconf.pm lib/$pkgname/
	chmod 755 $startdir/pkg/usr/bin/{pstoimg,$pkgname,texexpand}
}

# vim: ft=sh
