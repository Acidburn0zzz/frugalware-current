# Last Modified: Thu, 23 Dec 2004 20:23:11 +0100
# Compiling Time: ~7 seconds
# Maintainer: Shrift <shrift@frugalware.org>
# Modified by Laszlo Dvornik <dvornik@gnome.hu>

pkgname=azureus
pkgver=2.2.0.2
pkgrel=1
pkgdesc="A Java BitTorrent Client"
url="http://azureus.sourceforge.net/"
depends=('gtk+2' 'j2re')
up2date=`lynx -dump 'http://prdownloads.sourceforge.net/azureus/?sort_by=date&sort=desc'|grep linux.GTK.tar.bz2$| sed -ne 's/.*us_\(.*\)\_linux.GTK.tar.bz2*/\1/;1 p'`
source=(http://download.sourceforge.net/$pkgname/Azureus'_'$pkgver'_'linux.GTK.tar.bz2 \
	$pkgname.desktop)
md5sums=('f827bd23d6fdec3dce06f387635a305c' \
	'1b98ceb3a0297308870376c28dd7cfca')

build() {
	cd $startdir/src/
	mkdir -p $startdir/pkg/usr/{bin,lib}
	mv azureus $startdir/pkg/usr/lib

	# Fix permissions.
	chmod 644 $startdir/pkg/usr/lib/azureus/*.*
	chmod 755 $startdir/pkg/usr/lib/azureus/*.so
	chmod 755 $startdir/pkg/usr/lib/azureus/azureus

	echo '#!/bin/sh' > $startdir/pkg/usr/bin/azureus 
	echo 'exec /usr/lib/azureus/azureus' >> $startdir/pkg/usr/bin/azureus 
	chmod 755 $startdir/pkg/usr/bin/azureus 

	# Install menu file.
	install -D -m644 -o root -g root $startdir/src/$pkgname.desktop \
		$startdir/pkg/usr/share/applications/$pkgname.desktop

	# Icon of the menu entry.
	mkdir -p $startdir/pkg/usr/share/pixmaps
	ln -s ../../lib/azureus/Azureus.png $startdir/pkg/usr/share/pixmaps/azureus.png
}

# vim: ft=sh
