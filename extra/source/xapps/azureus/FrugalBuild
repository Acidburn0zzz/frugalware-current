# Last Modified: Wed, 06 Jul 2005 01:22:48 +0200
# Compiling Time: ~7 seconds
# Maintainer: Shrift <shrift@frugalware.org>
# Modified by Laszlo Dvornik <dvornik@gnome.hu>

pkgname=azureus
pkgver=2.3.0.4
pkgrel=2
pkgdesc="A Java BitTorrent Client"
url="http://azureus.sourceforge.net/"
depends=('gtk+2' 'j2re')
groups=('xapps-extra')
archs=('i686' 'x86_64')
[ "$CARCH" == "x86_64" ] && arc=AMD64 && md5='c6ec40cc713ebece0e32fcb71ec886ea'
[ "$CARCH" != "x86_64" ] && arc=GTK && md5='ea21eec2f7bda973e8b6a7f3ec8c3234'
up2date="lynx -dump 'http://prdownloads.sourceforge.net/azureus/?sort_by=date&sort=desc'|grep linux.$arc.tar.bz2$| sed -ne 's/.*us_\(.*\)\_linux.$arc.tar.bz2*/\1/;1 p'"
source=(http://dl.sourceforge.net/sourceforge/$pkgname/Azureus'_'$pkgver'_'linux.$arc.tar.bz2 \
	$pkgname.desktop)
md5sums=($md5 '1b98ceb3a0297308870376c28dd7cfca')
    
build()
{
	Fcd ""
	Fmkdir /usr/{bin,lib}
	mv azureus $Fdestdir/usr/lib

	# Fix permissions.
	chmod 644 $Fdestdir/usr/lib/azureus/*.*
	chmod 755 $Fdestdir/usr/lib/azureus/*.so
	chmod 755 $Fdestdir/usr/lib/azureus/azureus

	echo '#!/bin/sh' > $Fdestdir/usr/bin/azureus
	echo 'exec /usr/lib/azureus/azureus' >> $Fdestdir/usr/bin/azureus
	chmod 755 $Fdestdir/usr/bin/azureus

	# Install menu file.
	Ffile /usr/share/applications/$pkgname.desktop

	# Icon of the menu entry.
	Fmkdir /usr/share/pixmaps
	Fln ../../lib/azureus/Azureus.png /usr/share/pixmaps/azureus.png
}

# vim: ft=sh
