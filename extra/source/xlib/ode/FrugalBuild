# Last Modified: Sat, 18 Mar 2006 18:13:06 +0100
# Compiling Time: 0.11 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=ode
pkgver=0.5
pkgrel=1
pkgdesc="ODE is an open source, high performance library for simulating rigid body dynamics."
url="http://ode.org/"
depends=('mesa')
groups=('xlib-extra')
options=('nodocs')
archs=('i686')
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=24884| grep -m1 '.tgz'|sed 's/.*-\(.*\).tgz .*/\1/'"
source=(http://umn.dl.sourceforge.net/sourceforge/opende/$pkgname-$pkgver.tgz)
sha1sums=('f13756f1192d24101b6d1a3c14feb43efbf0b281')

build()
{
	## let us start this weird build :p
	Fcd
	Fsed 'C_FLAGS+=-fomit-frame-pointer -ffast-math' '' \
		config/makefile.unix-gcc
	Fsed 'C_FLAGS=-c -Wall .*' 'C_FLAGS=-c -Wall $(CFLAGS)' \
		config/makefile.unix-gcc
	Fmkdir /usr/lib
	Fmkdir /usr/include
	Fmkdir /usr/share/doc/$pkgname-$pkgver
	make configure || return 1
	make ode-lib || return 1
	make drawstuff-lib || return 1
	make ode-test || return 1
	make drawstuff-test || return 1
        ## all done ? no no not yet   'make install = mv | cp' for this app  :) 
	mv lib/* $Fdestdir/usr/lib
	mv include/ode $Fdestdir/usr/include/
	mv ode/doc/* $Fdestdir/usr/share/doc/$pkgname-$pkgver/
	## now done ? I hope :)
}
# optimalization OK
