\chapter{Init}
\label{chap:init}
\section{A rendszermagról:}


A Linux magja a {\tt kernel} csomagban van. Olyan kevés patchet próbálunk használni
amennyit csak lehet, hogy közel maradjunk az eredeti Linux maghoz.
Egyetlen kivétel a {\tt bootsplash} patch, ami megengedi, hogy szép boot kép legyen.
A rendszermag alapértelmezetten tartalmazza az IDE disk vezérlõt
de minden alacsony szintû SCSI driver rendszermag modulként van forgatva.
Ha a Frugalware magja nem támogatja az Ön lemezvezérõjét, akkor saját magot
is fordíthat. Ne féljen, nem bonyolult.

1) Ha setup befejezõdik, valassza a "csinál valami speciálisat" menüpontot.

2) Változtasa meg a root könyvtárát {\tt /mnt/target} a {\tt chroot /mnt/target} paranccsal.

3) A rendszermag forráskódját(a hozzáadott patchekkel együtt) megtalálja a {\tt /usr/src/linux} könyvtárban.
Menjen a {\tt/usr/src/linux} könyvtárba, indítsa el a konfigurációs menüt ezzel a paranccsal {\tt make menuconfig}.
Itt válassza ki azt a drivert amit nem akar, hogy tovább modulként legyen fordítva, mentse el a beállítást és hadja el a menüt.
    
4.) Fordíthatja a magot {\tt make} paranccsal. Ez eltarthat néhány tíz percig is akár.
    
5.) Másolja a magot a {\tt /boot} könyvtárba ezzel a paranccsal {\tt cp /usr/src/linux/arch/\textit{yourarch}/boot/bzImage /boot/vmlinuz}.
x86-on a \textit{yourarch} i386.
   
Ez minden.

\section{Init szkriptek}

Frugalware-ban az init szkriptek a következõ módon vannak jelölve mint rc.valami és a  {\tt /etc/rc.d} könyvtárban vannak.
Menedzselheti ezeket a szkripteket a {\tt service} paranccsal:  

{\tt service adsl stop} - leállítja az adsl kapcsolatot

{\tt service httpd start} - elindítja a webszervert

{\tt service clamd add} - clamd szolgáltatás minden startkor elindul

{\tt service sshd del} -   sshd szolgáltatás nem indul automatikusan a startkor

{\tt service acpid list} - kiír egy rövid listát arról hogy melyik szolgáltatás indul automatikusan az adott futás szinten


\section{Start mechanizmus}

Ha nem ad meg extra {\tt init=/path/to/init} paramétert, akkor a rendszermag majd {\tt /sbin/init}-et fogja indítani.
Az {\tt init} keresni fogja {\tt /etc/inittab} filet és elindít, 

1.) minden {\tt S*} szkriptet a {\tt /etc/rc.d/rcS.d} könyvtárban

2.) minden {\tt S*} szkriptet a {\tt /etc/rc.d/rc\textit{n}.d} könyvtárban, \ahol a \textit{n} az alapértelmezett futás szintet jelenti.
Ez alapértelmezetten 4-re van állítva.
     
A lehetséges futás szintek listája:
    
0  = leállás
    
1 = egyfelhasználói mód
    
2 = nem használt(beállítva a ugyanarra mint a 3-as)
    
3 = több felhasználói mód(karakter módban)

4 = X11 KDM/GDM/XDM(alapértelmezett mód a Frugalwareban)

5 = nem használt(beállítva a ugyanarra mint a 3-mas)
    
6 = reboot

Ha a X11 be van állítva akkor a {\tt /etc/rc.d/rc.4} indítja a desktop környezetet ami a {\tt /etc/sysconfig/desktop}-ban van beállítva.

\section{GRUB gfxmenu}

A Frugalware tartalmazza a szép grafikus grub menut(köszönet a gfxmenu fejlesztõinek a SuSE-ból).
Ha Önnek ez nem tetszik, kikapcsolhatja kommentálással a gfxmenu-t inicializáló fileában {\tt /boot/grub/menu.lst}. Mint pl.: 

Elõtte: 
{\tt gfxmenu (hd0,5)/boot/grub/message}

Utána:
{\tt # gfxmenu (hd0,5)/boot/grub/message}


\section{Bootsplash}

A Frugalware rendszermagjában van egy bootsplash patch. Ennek köszönhetõen a felhasználó szép
képet és grafikát láthat a bootolás alatt.
Ha elõnybe helyezi a beszédes módot és nem akarja minden esetben lenyomni az {\tt F2} gombot
vagy teljesen ki akarja kapcsolni a bootsplasht akkor szükséges lesz, hogy hozzáadjon egy extra
paramétert a {\tt /boot/grub/menu.lst}-ba a rendszermag számára.


\begin{tabular}{ll}
{\tt splash=silent} & csendes mód  (alapértelmezett mód a  GRUB gfxmenuvel) \\
{\tt splash=verbose} & beszédes mód, szép háttérel (alapértelmezett mód GRUB gfxmenu nélkül)\\
{\tt splash=none} & teljesen kikapcsolja a bootsplasht \\
\end{tabular}


\textbf{Figyelmeztetés!}: \textit{Nem} használhat framebuffert 24 bit színmélységgel és bootsplash-el együtt.

Összefoglaló a {\tt vga=} paramétereirõl amit használhat és amit \textit{nem}:

\begin{tabular}{lll}
 & 800x600 & 1024x768 \\
16 bit (jó) &  788 & 791 \\
24 bit (rossz) &  789 & 792 \\
\end{tabular} 