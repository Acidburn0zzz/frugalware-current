# Compiling Time: 0.03 SBU
# Maintainer: James Buren <ryuo@frugalware.org>

pkgname=rox-session
pkgver=0.40.0
pkgrel=1
pkgdesc="Session manager for ROX desktop."
_F_rox_name=ROX-Session
options=('scriptlet')
Finclude rox
rodepends=('rox-filer' 'dbus-python' 'dbus-x11' 'oroborox')
depends=('gtk+2' 'glibc' 'freetype2' 'libxau' 'libxdmcp' 'dbus-glib' 'libxtst' 'libxxf86vm' 'libxdamage')
groups=(${groups[@]} 'rox-core')
archs=('i686')
source=(${source[@]} rox-session rox.desktop)
sha1sums=('c41010c0364c8e9fcac02e7e4cfda6684e798460' \
          '769b67010f80fde67bd1de8217f53c04a09ebdc5' \
          'bd6da8ce95ab78023f283e732d90888d66ed2ca9')

build()
{
	# tweak source code to use oroborox if nothing else is available
	# very essential to first launch for a new user, at least
	sed -i 's|twm|oroborox|' $_F_rox_name/src/wm.c || Fdie
	Fbuild_rox
	Fexe /usr/bin/rox-session
	Ffile /etc/X11/sessions/rox.desktop
}
# optimization OK
