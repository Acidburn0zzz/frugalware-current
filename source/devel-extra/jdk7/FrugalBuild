# Compiling Time: 0.13 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=jdk7
pkgver=7b12
longver=1.7.0
pkgrel=1
pkgdesc="Sun's java runtime environmen (version 7)"
url="http://download.java.net/jdk7/"
depends=()
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url/binaries/|grep Build|sed 's/.* /7/'"
if [ "$CARCH" == "i686" ]; then
	_arch=i586
	sha1sums=('34dbabf4e8dc8c88de989db9ee312bd174c4f4f3')
elif [ "$CARCH" == "x86_64" ]; then
	_arch=amd64
	sha1sums=('6a9553762dfd63ae3120720b74237cb27fe415fe')
fi
source=(http://download.java.net/jdk7/binaries/jdk-7-ea-bin-${pkgver#?}-linux-$_arch-06_may_2007.bin \
	jdk7.sh)
sha1sums=($sha1sums '9803ec2e040983d788f9b191a56179eaae257a0d')

build()
{
	Fmkdir /usr/lib/
	echo "yes" | sh ${source##*/} 2> /dev/null || Fdie
	cp -rf jdk$longver $Fdestdir/usr/lib/java/ || Fdie
	for i in jdk$longver/*
	do
		if [ -f $i ] ; then
			Frm `echo $i | sed "s|jdk$longver|/usr/lib/java|"`
		fi
	done
	chown -R root.root $Fdestdir/* || Fdie
	Fexe /etc/profile.d/$pkgname.sh
}
