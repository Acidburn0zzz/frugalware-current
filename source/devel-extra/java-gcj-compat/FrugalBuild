# Compiling Time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=java-gcj-compat
pkgver=1.0.69
pkgrel=2
gccver=4.1.2
pkgdesc="A collection of wrapper scripts, symlinks and jar files."
url="ftp://sources.redhat.com/pub/rhug/"
depends=("libgcj=$gccver" 'gjdoc')
makedepends=('gcc-gcj' 'ecj')
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url|grep $pkgname-.*tar.gz$|sed 's/.*-\([^-]*\)\.t.*/\1/'|Fsort|sed -n '$ p'"
source=(ftp://sources.redhat.com/pub/rhug/java-gcj-compat-$pkgver.tar.gz \
	java-gcj.sh)

build()
{
	Fsed 'libgcj-tools' 'libgcj' Makefile.am
	Fsed '4.1.1' $gccver Makefile.am
	Fautoreconf
	Fbuild
	Fln jvm/java-1.5.0-gcj-1.5.0.0/lib/tools.jar /usr/lib/
	Fexe /etc/profile.d/java-gcj.sh
	echo 'if [ -z "$CLASSPATH" ]; then' >>$Fdestdir/etc/profile.d/java-gcj.sh
	echo "	export CLASSPATH=/usr/share/java/libgcj-$gccver.jar" >>$Fdestdir/etc/profile.d/java-gcj.sh
	echo "else" >>$Fdestdir/etc/profile.d/java-gcj.sh
	echo "	export CLASSPATH=\$CLASSPATH:/usr/share/java/libgcj-$gccver.jar" \
		>>$Fdestdir/etc/profile.d/java-gcj.sh
	echo "fi" >>$Fdestdir/etc/profile.d/java-gcj.sh
}

sha1sums=('41c56601fe668b82167221812e275bcfd00afe74'\
          '73c1f3cc2db4f63cb051e65f0c664358289e9f13')
# optimization OK

