# Compiling Time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=java-gcj-compat
pkgver=1.0.68
pkgrel=3
pkgdesc="A collection of wrapper scripts, symlinks and jar files."
url="ftp://sources.redhat.com/pub/rhug/"
depends=('libgcj' 'gjdoc')
makedepends=('gcc-gcj' 'ecj')
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url|grep $pkgname-.*tar.gz$|sed 's/.*-\([^-]*\)\.t.*/\1/'|Fsort|sed -n '$ p'"
source=(ftp://sources.redhat.com/pub/rhug/java-gcj-compat-$pkgver.tar.gz \
	java-gcj.sh)

build()
{
	Fbuild
	Fln jvm/java-1.4.2-gcj-1.4.2.0/lib/tools.jar /usr/lib/
	Fexe /etc/profile.d/java-gcj.sh
	echo 'if [ -z "$CLASSPATH" ]; then' >>$Fdestdir/etc/profile.d/java-gcj.sh
	echo "	export CLASSPATH=/usr/share/java/libgcj-`gcc -dumpversion`.jar" >>$Fdestdir/etc/profile.d/java-gcj.sh
	echo "else" >>$Fdestdir/etc/profile.d/java-gcj.sh
	echo "	export CLASSPATH=\$CLASSPATH:/usr/share/java/libgcj-`gcc -dumpversion`.jar" \
		>>$Fdestdir/etc/profile.d/java-gcj.sh
	echo "fi" >>$Fdestdir/etc/profile.d/java-gcj.sh
}

# optimization OK

sha1sums=('5b81c2ef22d7e1becb070dec08e462f57082377c' \
	  '73c1f3cc2db4f63cb051e65f0c664358289e9f13')
