# Compiling Time: 3.13 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=darcs
pkgver=1.0.9
pkgrel=1
pkgdesc="David's Advanced Revision Control System"
url="http://darcs.net"
depends=('gmp' 'curl>=7.16.0' 'readline' 'mta')
groups=('devel-extra')
archs=('i686' 'x86_64')
makedepends=('ghc>=6.6.1-2' 'latex2html' 'git')
up2date="lynx -dump $url|grep Stable|sed 's/.*(\(.*\)).*/\1/'"
source=(http://darcs.net/$pkgname-$pkgver.tar.gz \
	README.Frugalware)
sha1sums=('b2d2238c01d530796c29db4b46fd4fd9c21be9b6' \
          '85616be72dfaa945425ab9e9f5deca57fa5ccda9')
options=('scriptlet')

build()
{
	Fcd
	Fpatchall
	if [ "$CARCH" == "x86_64" ]; then
		Fconf --enable-git --with-git-core=/usr/lib \
			--with-git-includes=-I/usr/include/git --without-docs
	else
		Fconf --enable-git --with-git-core=/usr/lib \
			--with-git-includes=-I/usr/include/git
	fi
	make all || Fdie
	Fmakeinstall
	if [ "$CARCH" != "x86_64" ]; then
		Fmv /usr/share/doc/$pkgname /usr/share/doc/$pkgname-$pkgver
	fi
}

