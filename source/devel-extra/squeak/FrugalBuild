# Compiling time: 0.02 SBU
# Maintainer: Michel Hermier <hermier@frugalware.org>

pkgname=squeak
_F_archive_name=Squeak
pkgver=3.10
pkgver_stable=1
pkgrel=1
_F_cd_path=${_F_archive_name}-${pkgver}-${pkgver_stable}
pkgdesc="Squeak is a modern, open source, full-featured implementation of the powerful Smalltalk programming language and environment."
url="http://squeak.org"
license="Apple"
depends=('alsa-lib' 'freetype2' 'libogg' 'libx11' 'libxrender' 'libxt')
groups=('devel-extra')
archs=('i686')
up2date="Flastarchive http://ftp.squeak.org/current_stable/unix-linux/ '\.src\.tar\.gz' | sed 's/\(.*\)-"${pkgver_stable}"/\1/'"
source=(http://ftp.squeak.org/current_stable/unix-linux/${_F_cd_path}.src.tar.gz)
sha1sums=('6b7ab071bcf78318a0fead94ff89d1557a877c77')

_F_conf_configure="../platforms/unix/config/configure"

build()
{
	Fcd
	mkdir build || Fdie
	cd build || Fdie

	Fmake
	make ROOT="$Fdestdir" install || Fdie

	Fsed 'MAJOR=.*' 'MAJOR=39' inisqueak
	Finstallrel 0755 inisqueak /usr/bin/ || Fdie
}

# optimization OK
