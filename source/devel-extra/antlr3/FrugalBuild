# Compiling Time: 0.85 SBU
# Maintainer: Marius Cirsta <mcirsta@frugalware.org>

pkgname=antlr3
pkgver=3.4
pkgrel=1
pkgdesc="ANother Tool for Language Recognition, version 3.x"
url="http://www.antlr3.org/download.html"
#url="http://www.antlr.org/" <-- this is v4.x
depends=() ## wrong some java foo's
Finclude openjava
makedepends=(${makedepends[@]} 'maven')
groups=('devel-extra')
archs=('x86_64')
up2date="lynx -dump http://www.antlr3.org/download.html | grep -m1 'Latest version is' | sed 's/.*is \(.*\)/\1/'"
source=(http://www.antlr.org/download/antlr-$pkgver.tar.gz openJDK7.patch)
sha1sums=('068a6bc929f9f0d6d643b31e7b56064f1bdb8442' \
          'f3917fdc8cc520034a6359a38051aa599229c202')
_F_cd_path=antlr-$pkgver

build()
{
	Fpatchall
	#clean crap from source to make it compile
	local i
	for i in `find . -regex '.*\._.*'` ; do
	    rm "$i"
	done
	Fexec mvn -Dmaven.repo.local=$Fsrcdir/repo clean package || Fdie
	Fexec mv tool/target/antlr-$pkgver.jar tool/target/antlr3.jar || Fdie
	Fjar tool/target/antlr3.jar
}

