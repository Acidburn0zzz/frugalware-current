# Compiling Time: 0.01 SBU
# Maintainer: Bence Nagy <nagybence@tipogral.hu>

pkgname=rubygems
pkgver=0.9.2
pkgrel=2
pkgdesc="RubyGems is the Ruby standard for publishing and managing third party libraries."
url="http://docs.rubygems.org/"
depends=('ruby')
makedepends=('rubygems')
groups=('devel-extra')
archs=('i686' 'x86_64')
source=(http://rubyforge.org/frs/download.php/17190/rubygems-$pkgver.tgz post-install.rb.diff)
up2date='lynx -dump "http://rubyforge.org/frs/?group_id=126" | grep "rubygems.*.tgz" | head -n 1 | sed "s/.*rubygems-\(.*\).tgz.*/\1/"'

build() {
	Fcd
	Fpatchall
	Fmkdir usr/lib/ruby/gems/1.8
	Fsed 'Gem.dir' "\"$Fdestdir/pkg\" + Gem.dir" post-install.rb
	## heh hack alarm
	ruby setup.rb all --prefix="$Fdestdir/$Fprefix" || Fdie
	cd pkgs/sources || Fdie
	gem install "sources" --local --version "0.0.1" --install-dir $Fdestdir/usr/lib/ruby/gems/1.8 --ignore-dependencies || Fdie

}
sha1sums=('ed6f48a4116d36f6f4b16fcf024a025037bf1d35'\
          'f87259c9b7a9c1266e415e2c8f5b02c9a37cb2e8')
