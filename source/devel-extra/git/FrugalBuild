# Compiling Time: 0.36 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=git
pkgver=1.5.2
pkgrel=1
pkgdesc="the stupid content tracker"
url="http://www.kernel.org/pub/software/scm/git/"
depends=('curl>=7.16.0' 'openssl')
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump '$url/?C=M;O=D'|grep bz2$|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=($url/$pkgname-$pkgver.tar.bz2 \
$url/git-manpages-$pkgver.tar.bz2)
signatures=(${source[0]}.sign ${source[1]}.sign)

build()
{
	Fsed '^\(CFLAGS =\) .*' "\1 $CFLAGS" Makefile
	Fsed 'prefix = $(HOME)' 'prefix = /usr' Makefile
	Fmkdir /usr/bin
	Fbuild
	Fdocrel Documentation/SubmittingPatches Documentation/technical/*

	# libgit
	Ffilerel /usr/lib/libgit.a
	Ffilerel *.h /usr/include/git/

	# man pages
	cd $Fsrcdir
	for i in man*
	do
		cd $i
		Fmanrel *
		cd ..
	done
}


# optimization OK
