# Compiling Time: 2.20 SBU
# Maintainer: crazy <crazy@frugalware.org>
# Contributor: Priyank Gosalia <priyankmg@gmail.com>

pkgname=cmake
pkgver=2.6.1
pkgrel=2
pkgdesc="Cross platform make"
url="http://www.cmake.org/"
depends=('glibc' 'ncurses')
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://cmake.org/HTML/Download.html | grep -m1 Latest | sed 's/.* \(.*\).*/\1/g' | sed 's/(\|)//g'"
source=(http://www.cmake.org/files/v2.6/$pkgname-$pkgver.tar.gz)
sha1sums=('a0bcdffbbd03b877f8e13c250ed6fa5d290e16d0')

build() {
	Fsed '\(${cmake_bootstrap_system_libs}\)' '\1 -DENABLE_IPV6=1' bootstrap
	./bootstrap $Fconfopts
	make || Fdie
	make test || Fdie
	make DESTDIR=$Fdestdir install || Fdie

	# Fix permissions
	find $Fdestdir/usr/share/$pkgname-*/Modules -type f -exec chmod 644 "{}" ";"
}

# optimization OK
