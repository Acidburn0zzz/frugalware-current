# Compiling Time: 1.88 SBU
# Maintainer: DeX77 <dex77@frugalware.org>
# Contributor: Priyank Gosalia <priyankmg@gmail.com>

pkgname=cmake
pkgver=3.6.2
pkgrel=3
pkgdesc="Cross platform make"
url="https://cmake.org/"
depends=('ncurses>=6.0-12' 'curl>=7.50.3-2' 'libarchive>=3.2.1' 'lz4')
#rodepends=('libldap') ## broken!
makedepends=('python-sphinx>=1.3.4-3' 'python-six' 'python-markupsafe>=0.23-2' 'gcc-g++>=6.2.1-5')
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump -source https://cmake.org/download/ | grep -v rc | grep  -m1 'cmake-\(.*\).tar.gz' | sed 's/.*cmake-\(.*\).tar.*/\1/'"
source=(http://www.cmake.org/files/v${pkgver%.*}/$pkgname-$pkgver.tar.gz)
sha1sums=('22c4c222d98146bec986ba4406c0c3e2d764fa37')
Fconfopts="$Fconfopts \
	--system-expat \
	--system-curl \
	--system-libarchive \
	--system-zlib \
	--system-liblzma \
	--system-bzip2 \
	--no-system-jsoncpp \
	--prefix=$Fdestdir/usr \
	--mandir=/share/man \
	--docdir=/share/doc/cmake \
	--sphinx-man"
_F_conf_configure="./bootstrap"
options+=('noccache')

# optimization OK
