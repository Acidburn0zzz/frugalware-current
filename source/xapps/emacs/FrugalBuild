# Last Modified: Thu, 09 Jun 2005 10:17:32 +0200
# Compiling Time: ~0.5 SBU
# Contributor: VMiklos <vmiklos@frugalware.org>
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>

pkgname=emacs
pkgver=21.4
pkgextraver=a
pkgrel=8
pkgdesc="An extensible, customizable, self-documenting real-time display editor"
url="http://www.gnu.org/software/emacs/"
depends=('xaw3d' 'libtiff' 'libjpeg' 'libungif' 'ncurses' 'zlib' 'libpng')
groups=('xapps')
archs=('i686' 'x86_64')
conflicts=('emacs-nox')
up2date="lynx -dump $url|grep stable|sed 's/.*: \([0-9\.]*\) .*/\1/'"
source=(ftp://ftp.gnu.org/gnu/emacs/$pkgname-$pkgver$pkgextraver.tar.gz $pkgname.install \
	emacs-21.4-amd64.patch)
md5sums=('8f9d97cbd126121bd5d97e5e31168a87' 'ee1e3ced6f3fe2eef88d5ce5a5c4f9e1' \
	'f51835dea86a7dcdfd12766c793ba3f7')
install=$pkgname.install

build() {
	Fcd $pkgname-$pkgver
	[ "$CARCH" == "x86_64" ] && (Fpatchall || return 1)
	Fmake --with-x11 --with-x-toolkit --with-pop || return 1
	Fmakeinstall prefix=$Fdestdir/usr || return 1
	[ -e $Fdestdir/usr/info/dir.old ] && Frm /usr/info/dir.old
	echo -e '#!/bin/sh\nemacs -nw $@' > emacs-nox
	Fexerel /usr/bin/emacs-nox
}
