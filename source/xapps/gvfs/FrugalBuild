# Compiling time: 0.66 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=gvfs
pkgver=1.6.2
pkgrel=2
pkgdesc="gvfs is a userspace virtual filesystem designed to work with the i/o abstractions of gio."
url="http://www.gnome.org/"
depends=('glib2>=2.20.1' 'dbus' 'avahi-glib' 'avahi' 'hal')
makedepends=('intltool' 'gnome-doc-utils' 'samba' 'fuse' 'libsoup>=2.29.0' 'gconf' \
		'gnome-keyring>=2.30.0' 'libcdio' 'gphoto2' 'obexftp>=0.23-2' \
		'bluez>=4.61' 'expat' 'openssh')
groups=('xapps')
archs=('i686' 'x86_64' 'ppc')
Finclude gnome
source=($source gvfs-libsoup.diff)
sha1sums=('b4ee3cb560d36d6ac7fe7bb1dded6b595c94fc81' \
          '1eb9391f6bf3716ddc8fbf75340257e537c61199')

subpkgs=("gvfs-gconf")
subdescs=('gvfs with gconf support for Gnome')
subdepends=("gconf")
subrodepends=("gvfs=$pkgver")
subgroups=('gnome')
subarchs=('i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" "gvfs-apple")
subdescs=("${subdescs[@]}" "gvfs with iPhone and iPod touch support")
subdepends=("${subdepends[@]}" "ifuse")
subrodepends=("${subrodepends[@]}" "gvfs=$pkgver")
subgroups=("${subgroups[@]}" "xapps-extra")
subarchs=("${subarchs[@]}" "i686 x86_64 ppc")

Fconfopts="$Fconfopts \
  --enable-http \
  --enable-avahi \
  --enable-udev \
  --enable-fuse \
  --enable-gconf \
  --enable-gdu \
  --enable-hal \
  --enable-gudev \
  --enable-cdda \
  --enable-afc \
  --enable-obexftp \
  --enable-gphoto2 \
  --enable-keyring \
  --enable-samba \
  --enable-archive \
  --enable-bash-completion"

build(){
	Fcd
	Fpatchall
	Fautoreconf
	Fmake
	Fmakeinstall
	Fsplit gvfs-gconf /usr/lib/gio/modules/libgiogconf*
	Fsplit gvfs-apple /usr/share/gvfs/remote-volume-monitors/afc.monitor
	Fsplit gvfs-apple /usr/share/gvfs/mounts/afc.mount
	Fsplit gvfs-apple /usr/share/dbus-1/services/org.gtk.Private.AfcVolumeMonitor.service
	Fsplit gvfs-apple /usr/libexec/gvfsd-afc
	Fsplit gvfs-apple /usr/libexec/gvfs-afc-volume-monitor
}

# optimization OK
