# Compiling Time: 0.05 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=gfpm
pkgver=1.3.1
pkgrel=3anacreon1
pkgdesc="Graphical Frugalware Package Manager"
url="http://ftp.frugalware.org/pub/other/gfpm"
depends=('glib2' 'gtk+2>=2.14.7' 'pacman-g2>=3.7.3' 'frugalwareutils>=0.8.7')
makedepends=('pkgconfig' 'intltool' 'nautilus>=2.24.2' 'thunar>=0.9.1')
groups=('xapps')
replaces=('frugalpkg')
archs=('i686' 'x86_64' 'ppc')
_F_gnome_iconcache="y"
Finclude gnome-scriptlet
subpkgs=("$pkgname-nautilus" "$pkgname-thunar")
subdescs=('GFpm extension for Nautilus' 'GFpm plugin for Thunar')
subdepends=("$pkgname=$pkgver nautilus>=2.24.2" "$pkgname=$pkgver thunar>=0.9.1")
subgroups=('gnome' 'xfce4')
subarchs=('i686 x86_64 ppc' 'i686 x86_64 ppc')
up2date="lynx -dump $url | Flasttar"
source=($url/$pkgname-$pkgver.tar.gz)
signatures=(${source[0]}.asc)

build()
{
	Fcd
	# hack to get gfpm work with gtk+2-2.14
	Fsed 'version="2.16"' 'version="2.14"' data/gfpm.ui
	Fbuild --enable-nautilus-extension --enable-thunar-plugin
	Fbuild_gnome_scriptlet
	Fsplit $pkgname-nautilus /usr/lib/nautilus
	Fsplit $pkgname-thunar /usr/lib/thunarx-1
}

# optimization OK
