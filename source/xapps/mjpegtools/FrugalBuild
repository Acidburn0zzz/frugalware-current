# Last Modified: Mon, 13 Jun 2005 19:53:31 +0000
# Compiling Time: ~2 minutes
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=mjpegtools
pkgver=1.6.2
pkgrel=2
pkgdesc="The mjpeg programs are a set of tools that can do recording of videos and playback, simple cut-and-paste editing and the MPEG compression of audio and video under Linux."
url="http://mjpeg.sourceforge.net/"
depends=('libjpeg' 'libpng' 'sdl' 'alsa-lib' 'libdv')
groups=('xapps')
makedepends=('gtk+')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://prdownloads.sourceforge.net/mjpeg/?sort_by=date&sort=desc'|grep mjpegtools-[0-9\.]*.tar.gz|sed -n 's/.*-\(.*\).t.*/\1/;1 p'"
source=(http://heanet.dl.sourceforge.net/sourceforge/mjpeg/$pkgname-$pkgver.tar.gz \
	$pkgname-$pkgver-fPIC.patch \
	$pkgname-$pkgver-gcc34.patch \
	$pkgname-$pkgver-gcc34-altivec.patch)
md5sums=('01c0120b0182de67f182ef99ad855daa' \
	'a4cae44ea5989aed95d7b8d84aaf0af4' \
	'd67f97f3bd586946968fca9b8d31be85' \
	'f16b681aebfa408a1ff5b6030c50fad8')

[ "$CARCH" == "x86_64" ] && confopts="--with-pic"

build() {
	Fcd
	patch -p2 < $startdir/src/$pkgname-$pkgver-fPIC.patch || return 1
	Fpatch $pkgname-$pkgver-gcc34.patch || return 1
	Fpatch $pkgname-$pkgver-gcc34-altivec.patch || return 1
	[ "$CARCH" == "x86_64" ] && export CFLAGS="$CFLAGS -fPIC"
	Fmake --with-dv-yv12 --enable-largefile $confopts || return 1
	Fmakeinstall || return 1
}

# vim: ft=sh
