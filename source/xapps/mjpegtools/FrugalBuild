# Last Modified: Mon, 09 May 2005 00:20:26 +0200
# Compiling Time: ~2 minutes
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=mjpegtools
pkgver=1.6.2
pkgrel=1
pkgdesc="The mjpeg programs are a set of tools that can do recording of videos and playback, simple cut-and-paste editing and the MPEG compression of audio and video under Linux."
url="http://mjpeg.sourceforge.net/"
depends=('gtk+' 'libjpeg' 'libpng' 'sdl' 'glib' 'alsa-lib' 'gcc')
groups=('xapps')
up2date=`lynx -dump 'http://prdownloads.sourceforge.net/mjpeg/?sort_by=date&sort=desc'|grep mjpegtools-[0-9\.]*.tar.gz|sed -n 's/.*-\(.*\).t.*/\1/;1 p'`
source=(http://dl.sourceforge.net/sourceforge/mjpeg/$pkgname-$pkgver.tar.gz \
	$pkgname-$pkgver-fPIC.patch \
	$pkgname-$pkgver-gcc34.patch \
	$pkgname-$pkgver-gcc34-altivec.patch)
md5sums=('01c0120b0182de67f182ef99ad855daa' \
	'a4cae44ea5989aed95d7b8d84aaf0af4' \
	'd67f97f3bd586946968fca9b8d31be85' \
	'f16b681aebfa408a1ff5b6030c50fad8')

build() {
	cd $startdir/src/$pkgname-$pkgver
	patch -p2 < $startdir/src/$pkgname-$pkgver-fPIC.patch || return 1
	patch -p1 < $startdir/src/$pkgname-$pkgver-gcc34.patch || return 1
	patch -p1 < $startdir/src/$pkgname-$pkgver-gcc34-altivec.patch || return 1
	./configure --prefix=/usr

	make || return 1

	make prefix=$startdir/pkg/usr install
}

# vim: ft=sh
