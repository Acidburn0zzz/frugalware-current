# Compiling time: 4.69 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>
# Contributor: Miklos Vajna <vmiklos@frugalware.org>

pkgname=gimp
pkgver=2.9.2
pkgrel=5
pkgdesc="The GNU Image Manipulation Program"
url="http://www.gimp.org/"
## http://mypaint.org/ missing optional lib
depends=('gegl>=0.3.6' 'libgexiv2>=0.10.3-2' 'gtk+2>=2.24.29-2' 'libmng>=2.0.3-3' \
	'aalib>=aalib' 'libxpm>=3.5.11-2' 'libjpeg>=9a' 'poppler-glib>=0.42.0' 'lcms2>=2.7-3')
groups=('xapps')
archs=('i686' 'x86_64')
makedepends=('perl-xml-parser' 'intltool' 'x11-protos' 'pygtk>=2.24.0-2' 'ghostscript>=9.18-2' 'iso-codes') ## gs is a depend()
up2date="Flasttar http://download.gimp.org/mirror/pub/gimp/v2.9/"
source=(http://download.gimp.org/mirror/pub/gimp/v2.9/$pkgname-$pkgver.tar.bz2)
sha1sums=('f8055402716f128a5685854d86b1be41aa6e4a87')
options=('scriptlet')
_F_gnome_desktop="y"
_F_gnome_iconcache="y"
Finclude gnome-scriptlet

[ "$CARCH" == "i686" ] && Fconfopts+=" --disable-sse --disable-mmx"

build()
{
	Fsed 'Icon=.*' 'Icon=gimp.png' desktop/gimp.desktop.in.in
	Fmkdir usr/share/{applications,application-registry,mime-info}

	Fbuild
	Fmkdir usr/share/pixmaps
	Fln  ../gimp/2.0/images/gimp-logo.png /usr/share/pixmaps/gimp.png

	Fbuild_gnome_scriptlet
}

# optimization OK
