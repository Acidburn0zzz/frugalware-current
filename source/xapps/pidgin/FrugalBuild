# Compiling time: 2.50 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Contributor: voroskoi <voroskoi@gmail.com>

pkgname=pidgin
pkgver=2.1.0
pkgrel=1
pkgdesc="A multi-protocol instant messaging (IM) client"
url="http://www.pidgin.im/"
depends=('gtk+2' 'libao' 'audiofile' 'gtkspell' 'nss' 'startup-notification' \
	'avahi-compat' 'gnutls>=1.6.3' 'libxml2' 'libxslt' 'libxscrnsaver' 'dbus-glib' 'dbus-x11' 'gstreamer')
makedepends=('evolution-data-server>=1.10.0' 'doxygen' 'tk' 'perl-xml' 'intltool' 'sqlite3')
conflicts=('gaim')
provides=('gaim')
replaces=('gaim')
groups=('xapps')
archs=('i686' 'x86_64')
_F_sourceforge_ext=".tar.bz2"
_F_sourceforge_broken_up2date=1
Finclude sourceforge
source=(${source[@]} perl-fix.patch)
sha1sums=('33f78d07c3c7797a710bb7d2032a8d0bd89a6ab3' \
          'c3facfbc8ec54b6b5a4f83a827cd766658fd9777')

build() {
	Fcd
	Fpatchall
	Fmake --enable-nss --enable-gnutls --disable-fatal-asserts --disable-dependency-tracking \
		--enable-static --with-howl-includes=/usr/include/avahi-compat-howl/ \
		--enable-dbus --enable-gstreamer
	make docs || Fdie
	Fmakeinstall
	Fmkdir usr/share/doc/$pkgname-$pkgver/html/
	cp -aR $Fsrcdir/$pkgname-$pkgver/doc/html/* $Fdestdir/usr/share/doc/$pkgname-$pkgver/html/
}

# optimization OK
