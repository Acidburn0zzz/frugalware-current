# Last Modified: Fri, 29 Jul 2005 19:40:44 +0200
# Compiling Time: ~0.04 SBU
# Maintainer: Shrift <shrift@frugalware.org>
# Modified by BMH1980 <bmh1980@frugalware.org>

pkgname=amsn
pkgver=0.94
pkgrel=6
pkgdesc="AMsN is a great messanger client"
url="http://amsn.sourceforge.net"
depends=('libtiff' 'libjpeg' 'imlib' 'tk')
groups=('xapps')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://prdownloads.sourceforge.net/amsn/?sort_by=date&sort=desc'|grep amsn|grep [0-9\.].tar.gz|sed -ne 's/.*n-\(.*\)\.t.*/\1/;s/_/./; 1 p'"
source=(http://download.sourceforge.net/amsn/$pkgname-`echo $pkgver|sed 's/\./_/'`.tar.gz)
md5sums=('7b7db9225342bb6c59b873ec90882e22')

build()
{
	Fmkdir /usr/{bin,share/amsn,share/applnk/Internet,share/pixmaps}
	Fcd $pkgname-`echo $pkgver | tr . _`
	Fsed "version=0.91" "version=$pkgver" Makefile || return 1
	Fsed "prefix=/usr/local" "prefix=\${DESTDIR}/usr" Makefile || return 1
	Fsed "/etc/X11/" "\${prefix}/share/" Makefile || return 1
	Fsed "@# cp \${desklink}" "cp \${desklink}" Makefile || return 1
	cd plugins/traydock || return 1
	./configure || return 1
	make || return 1
	cd ../.. || return 1
	Fmakeinstall || return 1
	Fdocrel docs/* GNUGPL HELP
	find $Fdestdir/usr/share/amsn -name Makefile -exec rm -f {} \;
	find $Fdestdir/usr/share/amsn -name "*.in" -exec rm -f {} \;
	find $Fdestdir/usr/share/amsn -name "*.log" -exec rm -f {} \;
	find $Fdestdir/usr/share/amsn -name "configure" -exec rm -f {} \;
	Frm /usr/bin/amsn
	Fln /usr/share/amsn/amsn /usr/bin/amsn
}

# vim: ft=sh
