# Last Modified: Sun, 19 Jun 2005 17:13:22 +0000
# Compiling Time: ~5 minutes
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=gvim
pkgver=6.3
pkgrel=2
pkgdesc="VIM - Vi IMproved console (GTK version)"
url="http://www.vim.org"
depends=('gpm' 'gtk+2')
groups=('xapps')
archs=('i686' 'x86_64')
backup=(usr/share/vim/vimrc)
up2date="wget -q -O - --passive-ftp ftp://ftp.vim.org/pub/editors/vim/unix/.message|grep tar.gz|tr -s ' '|sed -n '1 p'|cut -d ' ' -f 2|cut -d - -f 2"
source=(ftp://ftp.vim.org/pub/vim/unix/vim-$pkgver.tar.bz2 \
        vim-$pkgver-vimrc.diff)
md5sums=('821fda8f14d674346b87e3ef9cb96389' 'ac49851c9adf65c40eb6274b3b7ab90b')

build() {
  cd $startdir/src/
  patch -p0 <vim-$pkgver-vimrc.diff
  cd vim`echo $pkgver|sed 's/\.//'`/src
  ./configure --prefix=/usr --with-x --enable-gui=gtk2
  make || return 1
  make DESTDIR=$startdir/pkg VIMRTDIR= installvimbin
  cd $startdir/pkg/usr/bin
  mv vim gvim
}
