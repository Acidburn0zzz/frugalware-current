# Last modified: Fri, 09 Dec 2005 16:42:03 +0100
# Compiling time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>
# Modified by Laszlo Dvornik <dvornik@gnome.hu>

pkgname=xchat
pkgver=2.6.0
pkgrel=2
pkgdesc="A GTK+2 based IRC client"
url="http://www.xchat.org/"
depends=('gtk+2' 'openssl' 'gconf')
makedepends=('python' 'perl' 'tcl')
groups=('xapps')
archs=('i686' 'x86_64')
up2date="lynx -dump $url|grep Source|sed 's/.* \([0-9\.]*\)$/\1/'"
source=(http://www.xchat.org/files/source/`echo $pkgver|sed 's/\([0-9].[0-9]\).[0-9]/\1/'`/$pkgname-$pkgver.tar.bz2 \
	xchat-2.4.5-fw.diff xchat-2.4.4-unrealize.patch xchat-2.6.0_fix_unchecked_mallocs.patch)
sha1sums=('7649f94cd1b28442a46ceffec00be56f4878425f' \
	  '5a37ec8ffbfe11fb33f6fc675ef62859219f4b81' \
	  'f46d9dda90049d2ea999d472463c126ab25629ac' \
	  'aef0546af7aec75ba270f37785883edaa3d05d5f')
install=$pkgname.install

[ "$CARCH" == "x86_64" ] && opts="--enable-shm"

build()
{
	Fbuild --localstatedir=/var/lib --enable-ipv6 --enable-tcl --disable-dbus $opts
	# Needed for plugin development
	Ffile $pkgname-$pkgver/src/common/xchat-plugin.h /usr/include/xchat/xchat-plugin.h
}

# optimalization ok

# vim: ft=sh
