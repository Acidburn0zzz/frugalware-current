# Compiling Time: 0.02 SBU
# Maintainer: BMH1980 <bmh1980@frugalware.org>

pkgname=frugalpkg
pkgver=1.1
pkgrel=2
pkgdesc="Graphical frontend to pacman"
url="http://frugalware.org/"
depends=('pacman-g2' 'pygtk' 'shared-mime-info')
makedepends=('desktop-file-utils' 'python-tools')
groups=('xapps')
archs=('i686' 'x86_64')
up2date="lynx -dump http://frugalware.org/~bmh1980/$pkgname/CURRENT"
source=(http://frugalware.org/~bmh1980/$pkgname/$pkgname-$pkgver.tar.gz)
sha1sums=('e514eaf749ef122289dc7a860630d677c7e21547')
license="GPL2"
install=$pkgname.install
conflicts=('kde-frugalware-menu')

build()
{
	Fsed "$pkgname.glade" "/usr/share/$pkgname/$pkgname.glade" $pkgname.py
	Fsed "doc/help.html" "/usr/share/doc/$pkgname-$pkgver/help.html" \
		$pkgname.py
	Fsed "$pkgname.png" "/usr/share/icons/hicolor/48x48/apps/$pkgname.png" \
		$pkgname.py
	Fmkdir /usr/bin /usr/share/doc/$pkgname-$pkgver/html_data \
	       /usr/share/mimelnk/applications /usr/share/applications/kde \
	       /usr/share/icons/{crystalsvg,hicolor}/48x48/{apps,mimetypes} \
	       /usr/share/$pkgname /usr/share/mime/packages \
	       /usr/share/locale/{de_DE,hu_HU}/LC_MESSAGES
	Fexerel $pkgname.py /usr/bin/$pkgname
	Ffilerel /usr/share/$pkgname/$pkgname.glade
	Ffilerel menu/gnome-$pkgname.desktop \
		/usr/share/applications/$pkgname.desktop
	Ffilerel menu/kde-$pkgname.desktop \
		/usr/share/applications/kde/$pkgname.desktop
	Fdocrel doc/help.html
	Ffilerel doc/html_data/*.png /usr/share/doc/$pkgname-$pkgver/html_data/
	Ffilerel mime/$pkgname.xml /usr/share/mime/packages/
	Ffilerel mime/x-fpm.desktop /usr/share/mimelnk/applications/
	Ffilerel icons/$pkgname.png \
		/usr/share/icons/crystalsvg/48x48/apps/$pkgname.png
	Ffilerel icons/$pkgname.png \
		/usr/share/icons/hicolor/48x48/apps/$pkgname.png
	Ffilerel icons/gtk-$pkgname.png \
		/usr/share/icons/hicolor/48x48/mimetypes/gnome-mime-application-frugalware-package.png
	Ffilerel icons/kde-$pkgname.png \
		/usr/share/icons/crystalsvg/48x48/mimetypes/fpm.png
	msgfmt.py -o $Fdestdir/usr/share/locale/de_DE/LC_MESSAGES/$pkgname.mo \
		po/de.po || return 1
	msgfmt.py -o $Fdestdir/usr/share/locale/hu_HU/LC_MESSAGES/$pkgname.mo \
		po/hu.po || return 1
}

# optimalization ok - noarch

# vim: ft=sh
