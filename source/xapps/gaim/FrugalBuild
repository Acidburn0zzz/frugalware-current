# Last modified: Wed, 26 Jul 2006 20:34:37 +0200
# Compiling time: 2.50 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Old Maintainer: voroskoi <voroskoi@gmail.com>

pkgname=gaim
pkgver=2.0.0beta3
pkgrel=1
pkgdesc="A multi-protocol instant messaging (IM) client"
url="http://gaim.sourceforge.net/"
depends=('gtk+2' 'libao' 'audiofile' 'gtkspell' 'nss' 'startup-notification' \
	'avahi' 'gnutls')
makedepends=('evolution-data-server>=1.7.90.1' 'doxygen' 'tk' 'perl-xml' 'intltool')
groups=('xapps')
archs=('i686' 'x86_64')
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge
source=(${source[@]} \
	gaim-2.0.0-beta3-silc-realname.patch \
	gaim2-PIE.patch \
	gaim-2.0.0-beta3-utf8-name-crash.patch \
	gaim-2.0.0_beta3-as-needed.patch0 \
	gaim-2.0.0_beta3-avahi-compat.patch)
sha1sums=('e23363cdcf928d503c6fa583239537b409d10b84' \
	  'b60474886deb1c8a817694f78c3adc6240f91f13' \
	  'ddbf48b24c2094d281282effaeef6fb4de7a7de6' \
	  '6f4d8b7ecaf38ac7b9a02bba9c5e04ec929f74fc' \
	  '21416ead465dd22ae0c9b3005656ff4e00e3405e' \
	  'a7e7117ce866fb1ef277fb6048bc8b27adf36c4d')

build() {
	Fpatchall
	autoreconf || Fdie
	Fmake --sysconfdir=/etc/gaim --enable-nss=no --enable-dbus=no --enable-gnutls=yes \
		--with-perl
	make docs || Fdie
	Fmakeinstall
	Fmkdir usr/share/doc/$pkgname-$pkgver/
	Fmkdir usr/share/doc/$pkgname-$pkgver/html/
	cp -aR $Fsrcdir/$pkgname-$pkgver/doc/html/* $Fdestdir/usr/share/doc/$pkgname-$pkgver/html/
	# Nasty hack for perl stuff* :S Someone figure out why dont works good.
	Fmv Gaim.pm /usr/lib/perl5/current/$CARCH-linux-thread-multi/
	Fmkdir /usr/share/man/man3/
	Fmv Gaim.3 /usr/share/man/man3/
	Fmv /auto /usr/lib/perl5/current/$CARCH-linux-thread-multi/
}

# optimization OK
