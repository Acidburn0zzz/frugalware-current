# Compiling time: 2.50 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Contributor: voroskoi <voroskoi@gmail.com>

pkgname=gaim
pkgver=2.0.0beta6
pkgrel=1
pkgdesc="A multi-protocol instant messaging (IM) client"
url="http://gaim.sourceforge.net/"
depends=('gtk+2' 'libao' 'audiofile' 'gtkspell' 'nss' 'startup-notification' \
	'avahi-compat' 'gnutls>=1.5.2' 'libxml2' 'libxslt' 'libxscrnsaver' 'dbus-glib' 'dbus-x11')
makedepends=('evolution-data-server>=1.9.1' 'doxygen' 'tk' 'perl-xml' 'intltool' 'sqlite3')
groups=('xapps')
archs=('i686' 'x86_64')
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=235|grep -m1 '.tar.bz2'|sed 's/.*gaim-\(.*\).tar.bz2.*/\1/'"
source=(${source[@]} \
	musicmessaging-use-usr.patch \
	perl-fix.patch
	http://ftp.frugalware.org/pub/other/sources/$pkgname/yahoo-filexfer.patch)

build() {
	Fpatchall
	Fmake --sysconfdir=/etc/gaim --enable-nss=no --enable-gnutls=yes \
		--disable-fatal-asserts --disable-dependency-tracking --enable-static \
		--with-howl-includes=/usr/include/avahi-compat-howl/ --enable-dbus
	make docs || Fdie
	Fmakeinstall
	Fmkdir usr/share/doc/$pkgname-$pkgver/html/
	cp -aR $Fsrcdir/$pkgname-$pkgver/doc/html/* $Fdestdir/usr/share/doc/$pkgname-$pkgver/html/
}

# optimization OK
sha1sums=('39345fe6e0519f2e126f7f60f7d9905e3460517b' \
	  '1ba22d3dbb7b621d610987f244862b9e588e058a' \
	  '8ef38e3d66c7e7f66d8798c7f1155e1820e083eb' \
	  '97c7c4c902dbc7134452950cd33563444a80a584')
