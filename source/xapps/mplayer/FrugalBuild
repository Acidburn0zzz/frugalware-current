# Last Modified: Sun, 17 Apr 2005 14:45:33 +0200
# Compiling Time: ~16 minutes
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=mplayer
pkgver=1.0pre7
pkgextraver=
pkgrel=1
pkgdesc="The Movie Player"
depends=('esd' 'lame' 'libtheora' 'libdv' 'cdparanoia' 'termcap' 'libmad' \
	'libungif' 'codecs')
groups=('xapps')
install=$pkgname.install
up2date=`lynx -dump http://www.mplayerhq.hu/homepage/design7/dload.html|grep 'MPlayer v'|sed -n "s/.*MPlayer v\(.*\) source.*/\1/;s/$pkgextraver//;1 p"`
source=(http://www.mplayerhq.hu/MPlayer/releases/MPlayer-$pkgver$pkgextraver.tar.bz2 \
	http://www.mplayerhq.hu/MPlayer/Skin/Blue-1.1.tar.bz2 \
	http://www.mplayerhq.hu/MPlayer/releases/fonts/font-arial-cp1250.tar.bz2 \
	http://www.mplayerhq.hu/MPlayer/releases/fonts/font-arial-iso-8859-1.tar.bz2 \
	http://www.mplayerhq.hu/MPlayer/releases/fonts/font-arial-iso-8859-2.tar.bz2 \
	http://www.mplayerhq.hu/MPlayer/releases/fonts/font-arial-iso-8859-7.tar.bz2)
md5sums=('5fadd6957d3aab989cd760ff38fb8fdf' '83a9dd5753cbc0484e7e494699fecd52' \
         'd0afd83cd04c29a714a62b427aace5c5' '1ecd31d17b51f16332b1fcc7da36b312' \
	 '7b47904a925cf58ea546ca15f3df160c' '956a9d9ea51970e057f0deb7b2e25889')

# to add v4l support
# mknod -m 660 /dev/video0 c 81 0

build()
{
	Fcd MPlayer-$pkgver$pkgextraver
	Fmake --enable-gui --language=all --enable-runtime-cpudetection \
		--disable-arts --disable-smb || return 1
	make DESTDIR=$Fdestdir install
	Fmkdir /usr/share/doc/$pkgname-$pkgver
	mv DOCS/* $Fdestdir/usr/share/doc/$pkgname-$pkgver/
	
	# skin
	Fmkdir /usr/share/mplayer/Skin
	mv $Fsrcdir/Blue $Fdestdir/usr/share/mplayer/Skin/default
	chown -R root.root $Fdestdir/usr/share/mplayer/Skin
	
	# fonts
	Frm /usr/share/mplayer/font
	for i in cp1250 iso-8859-1 iso-8859-2 iso-8859-7
	do
		mv $Fsrcdir/font-arial-$i/font-arial-{14,18,24,28}-$i \
			$Fdestdir/usr/share/mplayer/
	done
	
}

# vim: ft=sh
