# Compiling Time: 0.33 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=usbguard
pkgver=0.7.0
pkgrel=5
pkgdesc='USBGuard is a software framework for implementing USB device authorization policies'
makedepends=('libxslt' 'qt5-tools>=5.9.2' 'qt5-svg>=5.9.2')
depends=("libqb" "libsodium>=1.0.15" "libcap-ng" "protobuf>=3.4.0" "polkit" "dbus-glib")
groups=('apps-extra')
archs=("x86_64")
_F_github_author="dkopecek"
Finclude github
source=("${url}/releases/download/${pkgname}-${pkgver}/${pkgname}-${pkgver}.tar.gz" \
	kernel4.13.patch )
backup=("etc/usbguard/usbguard-daemon.conf" "etc/usbguard/rules.conf")
Fconfopts="	--enable-systemd \
		--with-gui-qt=qt5 \
		--with-bundled-catch \
		--with-bundled-pegtl"
_F_gnome_iconcache="y"
sha1sums=('2c02be1055e2d45cf621da24436fdec4801521e0' \
          '54027f6a545c17b063307d78dfb203b7b5fd3886')

subpkgs=("$pkgname-applet-qt")
subdescs=("USBGuard QT Applet")
subgroups=('xapps-extra')
subarchs=('x86_64')
subdepends=('qt5-base>=5.9.2 hicolor-icon-theme')
subrodepends=("$pkgname")

build() {
	Fbuild

	Fsplit $pkgname-applet-qt usr/bin/usbguard-applet-qt
	Fsplit $pkgname-applet-qt usr/share/man/man1/usbguard-applet-qt*
	Fsplit $pkgname-applet-qt usr/share/icons
}

# optimization OK
