# Compiling Time: 0.09 SBU
# Maintainer: DNAku <DNAku@frugalware.org>

pkgname=mksh
pkgver=R28
pkgrel=1
pkgdesc="The MirOS KornShell"
url="http://mirbsd.de/mksh"
depends=()
makedepends=('cpio')
archs=('i686' 'x86_64')
up2date="lynx -dump http://mirbsd.de/mksh |grep -m1 mksh |sed 's/.*1..//g'"
groups=('apps-extra')
source=(http://www.66h.42h.de/MirOS/dist/mir/$pkgname/$pkgname-$pkgver.cpio.gz)
options=('scriptlet')
sha1sums=('857c03be697434e36cc1663f2d1657c1eff3ae6c')

build() {
	cd $startdir/src
	# makepkg only gunzipped it
	cpio -mid < $pkgname-$pkgver.cpio || Fdie
	Fcd $pkgname
	Fsed '/bin/ed' '/usr/bin/ed' histrap.c
	chmod +x Build.sh || Fdie
	sh Build.sh || Fdie
	sh test.sh || Fdie
	Fmkdir /bin
	Fmkdir /usr/man/man1
	Fexerel mksh /bin/mksh
	Ffilerel mksh.1 /usr/man/man1/mksh.1
}

# optimization OK
