diff -aur hplip-2.7.9/hpssd.py fw_hplip-2.7.9/hpssd.py
--- hplip-2.7.9/hpssd.py	2007-08-14 22:42:47.000000000 +0200
+++ fw_hplip-2.7.9/hpssd.py	2007-10-16 11:42:59.000000000 +0200
@@ -53,7 +53,7 @@
 
 # Std Lib
 import sys, socket, os, os.path, signal, getopt, time, select
-import popen2, threading, tempfile
+import subprocess, popen2, threading, tempfile
 
 from errno import EALREADY, EINPROGRESS, EWOULDBLOCK, ECONNRESET, \
      ENOTCONN, ESHUTDOWN, EINTR, EISCONN
@@ -560,21 +560,23 @@
 
         if sendmail:
             sendmail = os.path.join(sendmail, 'sendmail')
-            sendmail += ' -t -r %s' % self.from_address
+	    cmd = [sendmail,'-t','-r',self.from_address]
 
-            log.debug(sendmail)
-            std_out, std_in, std_err = popen2.popen3(sendmail) 
-            log.debug(repr(self.message))
-            std_in.write(self.message)
-            std_in.close()
-
-            r, w, e = select.select([std_err], [], [], 2.0)
-
-            if r:
-                err = std_err.read()
-                if err:
-                    log.error(repr(err))
-                    self.result = ERROR_TEST_EMAIL_FAILED
+            log.debug(repr(cmd))
+            err = None
+            try:
+                sp = subprocess.Popen(cmd, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
+                std_out, std_err = sp.communicate(self.message)
+                log.debug(repr(self.message))
+                if std_err != '':
+                    err = std_err
+
+            except OSError, e:
+                err = str(e)
+
+            if err:
+                log.error(repr(err))
+                self.result = ERROR_TEST_EMAIL_FAILED
 
         else:
             log.error("Mail send failed. sendmail not found.")
