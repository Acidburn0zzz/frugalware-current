# Compiling Time: 0 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=etckeeper
pkgver=1.18.7
pkgrel=1
pkgdesc="Stores the /etc directory in a git repo."
url="https://etckeeper.branchable.com/"
rodepends=('git>=1.5.3.4' 'pacman-g2>=3.6.7' 'dcron>=3.2-4')
makedepends=('bzr')
backup=(etc/$pkgname/$pkgname.conf)
groups=('apps-extra')
archs=('x86_64')
_F_scm_type="git"
_F_scm_url="https://git.kitenet.net/git/etckeeper.git"
_F_scm_tag="$pkgver"
Finclude scm
## get up2date from tag .. weird but can't find anything else what works
## repo(s) on github got deleted..
up2date="lynx -dump -nolist https://git.kitenet.net/git/etckeeper.git/refs/tags/  | grep [0-9].[0-9][0-9].[0-9] | sed 's/.*] \(.*\) 2.*/\1/'"

build()
{
	Funpack_scm
	Fcd $pkgname
	# our config
	Fsed '=apt' '=pacman-g2' etckeeper.conf
	Fsed '=dpkg' '=pacman-g2' etckeeper.conf

	Fmakeinstall PREFIX=$Fdestdir
	Fdocrel debian/changelog
}

# optimization OK
