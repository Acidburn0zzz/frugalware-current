# Compiling Time: 0.12 SBU
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=pvm
pkgver=3.4.6
pkgrel=1
pkgdesc="PVM (Parallel Virtual Machine) is for hooking together machines."
url="http://www.csm.ornl.gov/pvm/"
depends=()
groups=('apps-extra')
archs=('i686' 'x86_64')
Fpkgversep=""
up2date="Flasttar http://www.netlib.org/pvm3/index.html"
source=(http://www.netlib.org/pvm3/pvm${pkgver}.tgz)
sha1sums=('dc22bb3a592bb37ab86f0de8d867f67949d12e91')
_F_cd_path="${pkgname}3"

build() {
	export PVM_ROOT="${Fsrcdir}/${_F_cd_path}"
	Fcd
	Fsed 'SHAREDCFLAGS =' "SHAREDCFLAGS = ${CFLAGS}" conf/LINUX*.def
	Fsed '/usr/bin/rsh' '/usr/bin/ssh' conf/LINUX*.def
	Fbuild

	# manuals
	Ffile ${_F_cd_path}/man/man1/*.1 ${Fprefix}/share/man1/
	Ffile ${_F_cd_path}/man/man3/*.3 ${Fprefix}/share/man3/

	# binaries
	Fmkdir ${Fprefix}/bin
	Fexe ${_F_cd_path}/lib/LINUX/pvm* ${Fprefix}/bin/

	# libs
	Fmkdir ${Fprefix}/lib
	Ffile ${_F_cd_path}/lib/LINUX/*.a ${Fprefix}/lib/

	# includes
	Fmkdir ${Fprefix}/include
	Ffile ${_F_cd_path}/include/* ${Fprefix}/include/
}

# optimization OK
