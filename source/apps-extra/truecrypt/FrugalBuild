# Compiling Time: 0.08 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=truecrypt
pkgver=4.2a
pkgrel=4
pkgdesc="A free open-source disk encryption software"
url="http://www.truecrypt.org/"
Finclude kernel-module
depends=(${depends[@]} 'device-mapper')
groups=('apps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://www.truecrypt.org/downloads.php|grep Stable|sed 's/.* - //'"
source=(http://www.truecrypt.org/downloads/truecrypt-$pkgver-source-code.tar.gz \
	truecrypt-4.2a-2.6.{18,19,20}.patch truecrypt-4.2a-makefile.patch)

build()
{
	Fpatchall
	cd Linux
	Fsed 'uname -r' "echo $_F_kernelmod_uname" build.sh
	./build.sh || return 1
	Ffilerel Kernel/truecrypt.ko $_F_kernelmod_dir/misc/truecrypt.ko
	Fexerel Cli/truecrypt /usr/bin/truecrypt
	Ffilerel Cli/Man/truecrypt.1 /usr/share/man/man1/truecrypt.1
	Fdocrel ../Readme.txt ../Release
}

sha1sums=('915a8771f9a76d06f5071ca07f5fe902a7f26575'\
          '094c0f365718b46c3f6c5f14da4525891d28a6dc'\
          'bafe37681e8c81722da69c9d17f5f13e7e290e01'\
          '0ee8f80bcbb78188e6477089a628674e05970a5e'\
          'c9ca37521e0861c3ccc24550f862eacb14bc6242')
