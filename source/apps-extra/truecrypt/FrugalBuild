# Compiling Time: 0.08 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=truecrypt
pkgver=4.3
pkgrel=2
pkgdesc="A free open-source disk encryption software"
url="http://www.truecrypt.org/"
Finclude kernel-module
depends=(${depends[@]} 'device-mapper')
groups=('apps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://www.truecrypt.org/downloads.php|grep Stable|sed 's/.* - //'"
source=(http://www.truecrypt.org/downloads/truecrypt-$pkgver-source-code.tar.gz)
sha1sums=('42754b3c192edb94880c97ca5453558738bf2cb1')

build()
{
	unset MAKEFLAGS
	Fcd truecrypt-$pkgver-source-code/Linux
	Fsed 'uname -r' "echo $_F_kernelmod_uname" build.sh
	./build.sh || return 1
	Ffilerel Kernel/truecrypt.ko $_F_kernelmod_dir/misc/truecrypt.ko
	Fexerel Cli/truecrypt /usr/bin/truecrypt
	Ffilerel Cli/Man/truecrypt.1 /usr/share/man/man1/truecrypt.1
	Fdocrel ../Readme.txt ../Release
}
