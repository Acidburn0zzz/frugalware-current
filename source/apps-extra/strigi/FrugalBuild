# Compiling Time: 1.62 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=strigi
pkgver=0.7.0
pkgrel=1
pkgdesc="An advanced, desktop independent search daemon"
depends=('bzip2' 'dbus' 'clucene>=0.9.20-2' 'exiv2>=0.18.2' 'gamin')
makedepends=('qt4-qdbus' 'libqtgui' 'libgcc')
if [ "$CARCH" != "ppc" ]; then
        makedepends=(${makedepends[@]} 'j2sdk')
fi
groups=('apps-extra')
archs=('i686' 'x86_64' 'ppc')
_F_sourceforge_ext=".tar.bz2"
_F_cmake_confopts="-DENABLE_INOTIFY:BOOL=ON -DENABLE_FAM:BOOL=ON -DLIB_DESTINATION=lib"
options=('scriptlet')
Finclude sourceforge cmake
source=(http://www.vandenoever.info/software/$pkgname/$pkgname-$pkgver.tar.bz2)
up2date="lynx -dump http://www.vandenoever.info/software/strigi/ChangeLog | head -n 1"
sha1sums=('c8f299ae3b5778c6891b58a1966b7342fb5e9e32')
## TODO : Add missing optional depends

subpkgs=("$pkgname-qt4-gui" "libstrigiqtdbusclient")
subdescs=('Qt4 GUI for strigi.' 'Strigi library for writing Qt4 D-Bus clients.')
subdepends=("qt4-qdbus libqtgui libgcc libice libxrender libxfixes libxext" \
	'qt4-qdbus libgcc')
subrodepends=("$pkgname=$pkgver libstrigiqtdbusclient=$pkgver" "")
subgroups=('xapps-extra' 'apps-extra')
subarchs=('i686 x86_64 ppc' 'i686 x86_64 ppc')

build()
{
	CMake_build
	Fsplit libstrigiqtdbusclient usr/lib/libstrigiqtdbusclient.so*
	Fsplit libstrigiqtdbusclient usr/include/strigi/qtdbus
	Fsplit $pkgname-qt4-gui usr/bin/strigiclient
}
# optimization OK
