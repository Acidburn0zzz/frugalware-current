# Compiling Time: 0.33 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=containerd
pkgver=0.2.5
pkgrel=4
_commit="422e31ce907fd9c3833a38d7b8fdd023e5a76e73"
pkgdesc="open and reliable container runtime"
archs=('x86_64')
groups=('apps-extra')
depends=('glibc')
makedepends=('go>=1.6' 'git')
_F_github_author="docker"
_F_github_tag_v="y"
_F_github_devel=y
Finclude github

build() {
        Funpack_scm
        Fexec git checkout -q ${_commit}

	export GOPATH="$Fsrcdir/gopath"
	unset LDFLAGS

	Fexec mkdir -p $GOPATH/src/github.com/docker/ || Fdie
	Fexec mv $Fsrcdir/$pkgname $GOPATH/src/github.com/docker/$pkgname || Fdie
	Fexec cd $GOPATH/src/github.com/docker/$pkgname || Fdie
	Fmake

	Fexe gopath/src/github.com/docker/containerd/bin/containerd usr/bin/docker-containerd
	Fexe gopath/src/github.com/docker/containerd/bin/containerd-shim usr/bin/docker-containerd-shim
	Fexe gopath/src/github.com/docker/containerd/bin/ctr usr/bin/docker-ctr

}

# optimization OK
