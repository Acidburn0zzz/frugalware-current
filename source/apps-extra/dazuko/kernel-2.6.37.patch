diff --git a/dazuko_redirfs.c b/dazuko_redirfs.c
index 8659d2b..884c30a 100644
--- a/dazuko_redirfs.c
+++ b/dazuko_redirfs.c
@@ -96,7 +96,7 @@ static struct file_operations	fops = {
 
 inline void xp_init_mutex(struct xp_mutex *mutex)
 {
-	init_MUTEX(&(mutex->mutex));
+	sema_init(&(mutex->mutex), 1);
 }
 
 inline void xp_down(struct xp_mutex *mutex)
