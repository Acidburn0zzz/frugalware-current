# Last modified: Thu, 07 Sep 2006 12:45:18 +0200
# Compiling time: 0.01 SBU
# Maintainer: Janny <janny@frugalware.org>
 
pkgname=dazuko
pkgver=2.3.1_pre3
pkgrel=2
pkgdesc="On-access virus scanning kernel interface"
url="http://www.dazuko.org"
license="GPL-2 BSD"
Finclude kernel-module
archs=('i686' 'x86_64')
groups=('apps-extra')
up2date="lynx -dump '$url/files/?M=D'| grep -m 1 $pkgname | sed -ne 's/.*o-\(.*\).t.*/\1/ p' | sed 's/-/_/'"
source=(http://www.dazuko.org/files/$pkgname-${pkgver//_/-}.tar.gz \
	dazuko_kernel_hack.patch README.Frugalware)
 
build() {
	Fcd $pkgname-${pkgver//_/-}
	# no Fcheckkernel, crosscompilation verified
	Fpatchall
	Fsed '`uname -r`' "$kernelbasever-fw$kernelrel" configure
	./configure --system=linux26 --disable-chroot-support || Fdie
	make || Fdie
	Ffilerel /lib/modules/`uname -r`/extra/$pkgname.ko
	make -C library || Fdie
	Ffile $pkgname-${pkgver//_/-}/library/libdazuko.a /usr/lib/libdazuko.a
	Fdoc README.Frugalware
}
# A minor problem in the configure script for Linux 2.6 systems was found. 
# 2.3.1-pre2 has been posted to address this problem.
sha1sums=('9dbf914082c2b7b993f38b541cbfb89ec776075d' \
	  '6135c59c9dd4992b17122a5352263543ed5fa2b3' \
	  'cb594d340b3874cea03f74092f3f570c18186fc0')
