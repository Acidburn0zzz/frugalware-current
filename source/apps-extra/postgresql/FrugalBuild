# Compiling Time: 1.07 SBU
# Maintainer: crazy <crazy@frugalware.org>
# Contributor: VMiklos <vmiklos@frugalware.org>

pkgname=postgresql
pkgver=8.2
pkgextraver=.0
pkgrel=1
pkgdesc="An advanced Object-Relational database management system (DBMS)"
url="http://www.postgresql.org/"
depends=('zlib' 'readline')
makedepends=('openssl')
rodepends=("libpq=$pkgver")
groups=('apps-extra')
archs=('i686' 'x86_64')
up2date="wget --passive-ftp -O - -q ftp://ftp.postgresql.org/pub/source/|grep '\.[0-9]/</a> $'|sed -n 's|.*v\([0-9\.]*\)/</a> $|\1|;$ p'"
source=(ftp://ftp.postgresql.org/pub/source/v$pkgver/postgresql-$pkgver$pkgextraver.tar.bz2 rc.postgresql)

subpkgs=('libpq')
subdescs=('PostgreSQL Library.')
subdepends=('openssl')
subgroups=('lib')
subarchs=('i686 x86_64')

build()
{
	Fmake --datadir=/usr/share/pgsql \
		--localstatedir=/var/lib/pgsql --with-openssl
	make DESTDIR=$Fdestdir install
	Frcd
	Fmkdir /usr/share/doc/
	Fmv /usr/doc/$pkgname /usr/share/doc/$pkgname-$pkgver
	Fsplit libpq usr/lib/libpq.so*
}

# optimization ok
sha1sums=('377034c155ebc6a063a1d54069d1a56da4d11f93' \
	  'ccaf6e648078424adf433fd33dc2408aa84e6b25')
