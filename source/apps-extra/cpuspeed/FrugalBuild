# Compiling Time: 0.01 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=cpuspeed
pkgver=1.2.1
pkgrel=1
pkgdesc="A daemon that saves laptop battery by controlling the cpu speed"
url="http://carlthompson.net/Software/CPUSpeed"
depends=('glibc')
groups=('apps-extra')
archs=('i686')
backup=('etc/cpuspeed.conf')
up2date="lynx -dump http://carlthompson.net/dl/$pkgname | Flasttar"
source=(http://carlthompson.net/dl/$pkgname/$pkgname-$pkgver.tar.gz \
	rc.cpuspeed README.Frugalware)
sha1sums=('370d863902e19db0f3f58e3f8864787b19d01ab8' \
	'50287878a1a82f79060beaa101e4ffadabe55c17' \
	'a14b53ebcb520d0ff948b5dc8c980068adb339fb')

build()
{
	Fcd

	CFLAGS+=" -fno-exceptions"
	Fmessage "Compiling cpuspeed"
	Fmessage "gcc -o cpuspeed ${CFLAGS} cpuspeed.cc"
	gcc -o cpuspeed ${CFLAGS} cpuspeed.cc || Fdie
	Finstallrel 755 cpuspeed /sbin/cpuspeed
	
	# Config file
	Ffilerel cpuspeed.conf etc/cpuspeed.conf

	Frcd2
	Fdoc README.Frugalware
}

# optimization OK
