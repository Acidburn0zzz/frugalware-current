# Compiling Time: 0.01 SBU
# Maintainer: James Buren <ryuo@frugalware.org>

pkgname=vwm
pkgver=2.0.1
pkgrel=1
pkgdesc="A 'window manager' for your console sessions."
Finclude sourceforge
depends=('ncurses' 'libgtop' 'libviper' 'libpseudo')
groups=('apps-extra')
archs=('i686' 'x86_64')
# I'll handle the documentation this time, thank you. ;)
options=('nodocs')
sha1sums=('d47c15d204feaaf0954315e2f1fdedc2fe95f9b4')
# fix for SMP
unset MAKEFLAGS

build()
{
	Fcd $pkgname
	Fsed "-O2" "${CFLAGS}" {modules/vwmterm2,.}/Makefile
	Fsed "-O2" "${CFLAGS} -I../.." modules/sysmon/Makefile
	make || Fdie
	make -C modules/sysmon || Fdie
	Fexerel /usr/bin/$pkgname
	Fexerel modules/vwmterm2/vwmterm.so /usr/lib/vwm/modules/vwmterm.so
	Fexerel modules/sysmon/sysmon.so /usr/lib/vwm/modules/sysmon.so
	Fmkdir /usr/share/terminfo
	tic modules/vwmterm2/vwmterm-tic.txt -o "${Fdestdir}/usr/share/terminfo" || Fdie
	Ffilerel samples/vwmrc /usr/share/vwm/vwmrc
	Ffilerel modules/sysmon/{INSTALL,LICENSE} /usr/share/doc/$pkgname-$pkgver/sysmon
	Ffilerel modules/vwmterm2/{INSTALL,LICENSE} /usr/share/doc/$pkgname-$pkgver/vwmterm2
	Fdocrel {CHANGELOG,LICENSE,NOTES,INSTALL}
}

# optimization OK
