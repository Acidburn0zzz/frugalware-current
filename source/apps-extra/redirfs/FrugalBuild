# Compiling Time: 0.04 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=redirfs
pkgver=0.7
realver=${pkgver/pre/-pre}
pkgrel=12haven1
pkgdesc="Redirecting FileSystem"
url="http://www.redirfs.org/tiki-index.php"
_F_kernelmod_scriptlet=$pkgname.install
Finclude kernel-module
groups=('apps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://www.redirfs.org/tiki-index.php?page=redirfs_download|grep -v pre |Flasttar"
source=(http://www.redirfs.org/packages/$pkgname-$realver.tar.gz \
	kernel-2.6.3{1,4}.patch)
sha1sums=('91705689def812ca50db2d1d461509fe5ae9a753' \
          'c46860548855b658885fd292ce7ced9d725e7dc9' \
          '66c506fcd4dc9fe2daca1e0fde862a84e9619f45')

build()
{
	Fcd $pkgname-$realver
	Fpatchall
	# no Fcheckkernel, crosscompilation verified
	make -C /lib/modules/$_F_kernelmod_uname/build M=`pwd` modules || return 1
	Ffilerel /lib/modules/$_F_kernelmod_uname/extra/$pkgname.ko
	Fbuild_kernelmod_scriptlet
}
