--- redirfs/rfs_path.c	2009/09/04 12:43:48	1.1
+++ redirfs/rfs_path.c	2009/09/04 12:45:35
@@ -683,8 +683,9 @@
 	spin_unlock(&dcache_lock);
 	dput(dtmp);
 	mntput(mtmp);
+	struct path path = { .mnt = mmnt, .dentry = dmnt };
 
-	if (follow_up(&mmnt, &dmnt)) {
+	if (follow_up(&path)) {
 		dentry = dmnt;
 		mnt = mmnt;
 		goto again;
