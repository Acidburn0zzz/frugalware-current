# Compiling Time: 3.44 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=octave-forge
pkgver=2006.07.09
pkgrel=1
pkgdesc="A collection of custom scripts, functions and extensions for Octave."
_F_sourceforge_dirname="octave"
Finclude sourceforge
url="http://octave.sourceforge.net/"
depends=('octave>=2.9.12' 'gsl' 'ginac' 'qhull' 'pcre' 'libjpeg' 'libpng')
makedepends=('gcc-gfortran')
groups=('apps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=2888|grep use_mirror|sed 's/.*-\(.*\)\.t.*/\1/;q'"
sha1sums=('9088313c02f2097036bd19fd680186ea4f7de0a2')

build()
{
	Fcd
	octavever="`octave-config --version`"
	Fpatchall
	rm -rf main/plot extra/mex
	Fmkdir usr/share/octave/${octavever}/site/m/octave-forge \
		usr/libexec/octave/${octavever}/site/oct/$CHOST/octave-forge \
		usr/libexec/octave/${octavever}/site/exec/$CHOST \
		usr/share/octave/${octavever}/site/octave-forge-alternatives/m \
		usr/libexec/octave/${octavever}/site/octave-forge-alternatives/oct/$CHOST
	Fconf \
		--with-path=$Fdestdir \
		--with-mpath=/usr/share/octave/${octavever}/site/m/octave-forge \
		--with-opath=/usr/libexec/octave/${octavever}/site/oct/$CHOST/octave-forge \
		--with-xpath=/usr/libexec/octave/${octavever}/site/exec/$CHOST \
		--with-altmpath=/usr/share/octave/${octavever}/site/octave-forge-alternatives/m \
		--with-altopath=/usr/libexec/octave/${octavever}/site/octave-forge-alternatives/oct/$CHOST
	make || Fdie
	make DESTDIR=$Fdestdir install || Fdie
	cd $Fdestdir/usr/libexec/octave/${octavever}/site/oct/$CHOST/octave-forge
	Fmessage "Running strip on all *oct files.."
	/usr/bin/strip *.oct
}
# optimization OK
