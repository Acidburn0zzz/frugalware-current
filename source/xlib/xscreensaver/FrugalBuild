# Last Modified: Thu, 05 Jan 2006 14:25:31 +0100
# Compiling Time: ~1.03 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=xscreensaver
pkgver=4.23
pkgrel=2
pkgdesc="A screen saver and locker for the X Window System."
url="http://www.jwz.org/xscreensaver"
depends=('freetype2' 'libglade' 'gtk+2' 'libxml2' 'expat')
makedepends=('bc')
groups=('xlib')
archs=('i686' 'x86_64')
up2date="lynx -dump $url/download.html |grep ]$pkgname|sed -ne 's/.*r-\(.*\)\.t.*/\1/;1 p'"
source=($url/$pkgname-$pkgver.tar.gz $pkgname-4.22-head.diff)
sha1sums=('b7d3f0b4a94d879a2450a268ae941b92ca4fc39e' \
          'aff9f153023249c8c82bfaf35f1552610747de78')

build()
{
	Fpatchall || return 1
	Fmake --with-shadow --with-jpeg --with-gl --without-pam || return 1
	make install_prefix=$Fdestdir install
	# conflicts with pacman :)
	Fmv /usr/share/man/man1/pacman.1 /usr/share/man/man1/$pkgname-pacman.1
       	Fmv /usr/share/man/man1/barcode.1 /usr/share/man/man1/$pkgname-barcode.1
	Fmkdir /usr/share/wallpapers
}

# vim: ft=sh

# optimalization OK
