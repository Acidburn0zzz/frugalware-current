# Compiling Time: 0.37 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=imlib2
pkgver=1.3.0
pkgrel=2
pkgdesc="Imlib 2 is the successor to Imlib, it is NOT a newer version"
_F_sourceforge_dirname="enlightenment"
Finclude sourceforge
url="http://enlightenment.org"
depends=('libtiff' 'freetype2' 'libxext' 'libjpeg' \
	'libsm' 'bzip2' 'libungif' 'libpng' 'libid3tag')
groups=('xlib')
archs=('i686' 'x86_64')
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=2 |grep imlib2-src |sed 's/.*]\([0-9\.]*\) [A-Z].*/\1/;q'"
source=($source loader_overflows.patch)

if [ "$CARCH" != "x86_64" ]; then
	Fconfopts="$Fconfopts --enable-mmx"
else
	Fconfopts="$Fconfopts --enable-amd64"
fi

build()
{
	Fpatchall
	Fmake --sysconfdir=/etc/imlib2
	Fmkdir /usr/{bin,include,lib/pkgconfig}
	Fmakeinstall DESTDIR=$Fdestdir
	Ffilerel src/lib/Imlib2.h /usr/include/Imlib2.h
}

# optimization OK

sha1sums=('ad9c673a94d4e5e610704cefd06855f900151e25' \
	  '96e062ee7f3ccd7e5720c8d60a43e7e800126da8')
