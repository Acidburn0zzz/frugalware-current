# Compiling Time: 0.08 SBU
# Maintainer: DeX77 <dex77@frugalware.org>
# Contributor: Devil505 <devil505linux@gmail.com>
# Contributor: Priyank Gosalia <priyankmg@gmail.com>


pkgname=glew
pkgver=1.13.0
pkgrel=4
pkgdesc="GLEW is a cross-platform C/C++ extension loading library."
depends=('libgl>=11.1.0-3' 'libglu>=9.0.0-2')
makedepends=('mesa>=11.1.0-3' 'x11-protos')
groups=('xlib')
archs=('i686' 'x86_64')
_F_sourceforge_ext=".tgz"
_F_archive_grepv="snapshot"
Finclude sourceforge
sha1sums=('d5b1c499f429aa91c466193b4e8ea94a84019e37')

subpkgs=("${subpkgs[@]}" "${pkgname}mx")
subdescs=("${subdescs[@]}" "A cross-platform C/C++ extension loading library (MX version)")
subdepends=("${subdepends[@]}" "libgl>=11.1.0-3")
subrodepends=("${subrodepends[@]}" "glew>=$pkgver")
subgroups=("${subgroups[@]}" 'xlib-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64')

build()
{
	Fsed 'CFLAGS = $(OPT) $(WARN) $(INCLUDE) $(CFLAGS.EXTRA)' \
		'CFLAGS += $(WARN) $(INCLUDE) $(CFLAGS.EXTRA)' Makefile
	Fmake
	Fexec make GLEW_DEST=$Fdestdir/usr install.all

	# Fixup for x86_64 :S
	if [ "$CARCH" == "x86_64" ] ; then
		Fmv usr/lib64/ usr/lib/
	fi

	Fremove_static_libs

	Fsplit ${pkgname}mx usr/lib/libGLEWmx*
	Fsplit ${pkgname}mx usr/lib/pkgconfig/glewmx.pc
}

# optimization OK

