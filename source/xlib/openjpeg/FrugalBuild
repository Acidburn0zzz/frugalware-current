# Compiling Time: 0.07 SBU
# Maintainer: Baste <baste@frugalware.org>

pkgname=openjpeg
pkgver=1.5.2
pkgrel=5
pkgdesc="An open-source JPEG 2000 codec written in C"
_F_github_author="uclouvain"
_F_github_tag=y
_F_github_ver="version.$pkgver"
_F_cmake_confopts="	-DBUILD_JPIP=ON \
			-DBUILD_JPWL=ON \
			-DBUILD_MJ2=ON \
			-DBUILD_THIRDPARTY=OFF"
Finclude cmake github openjava
up2date="$pkgver"
url="http://www.openjpeg.org/"
depends=('libpng>=1.6.25' 'libtiff>=4.0.6-2' 'lcms2>=2.8-2')
groups=('xlib')
archs=("x86_64")
sha1sums=('08dca196cc3fecee04cbfcbdfaa1ac74e57b8aba')
_F_cross32_simple_auto="yes"
_F_cross32_delete=('usr/include' 'usr/bin')
Finclude cross32
_F_cd_path="$pkgname-version.${pkgver}"

build() {
        Fcross32_prepare
        Fcross32_copy_source
	CMake_build -DOPENJPEG_INSTALL_LIB_DIR="lib32" \

        Fcross32_copy_back_source
        Fcross32_reset_and_fix
        Fcross32_delete_empty
        Fsplit "${subpkgs[0]}" /\* ## everything else ignored only first one

	CMake_build

	Fln /usr/include/openjpeg-1.5/openjpeg.h /usr/include/openjpeg.h
}

# optimization OK
