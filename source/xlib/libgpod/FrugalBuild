# Compiling Time: 0.14 SBU
# Maintainer: DNAku <DNAku@frugalware.org>

pkgname=libgpod
pkgver=0.4.0
pkgrel=3
pkgdesc="libgpod is a library allowing direct access to the iPod's contents"
_F_sourceforge_dirname="gtkpod"
Finclude python sourceforge
url="http://www.gtkpod.org/libgpod.html"
depends=('gtk+2' 'hal>=0.5.7.1-3' 'pmount>=0.9.9-2' 'eject' \
	'dbus-glib>=0.71' 'python>=2.5' 'taglib')
makedepends=('perl-xml' 'swig')
archs=('i686' 'x86_64')
groups=('xlib')
options=('scriptlet')
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=67873 |grep -m1 libgpod-[0-9] |sed 's/.*pod-//g'|sed 's/ .*//g'"
sha1sums=('1ebad590212d1c6951ca10bb5117a7af54060105')

build()
{
	Fbuild
	Fmkdir $_F_python_libdir/gpod/examples
	cd bindings/python
	Fsed "python2.3" "$_F_python_ver" Makefile
	Fsed "/mnt/ipod/" "/media/ipod" examples/play_with_smart_playlists.py
	make || Fdie
	Finstall 0644 $pkgname-$pkgver/bindings/python/gtkpod.py $_F_python_libdir/gtkpod.py
	cp examples/* $Fdestdir/$_F_python_libdir/gpod/examples || Fdie
}

# optimization OK
