# Compiling Time: 0.13 SBU
# Maintainer: kikadf <kikadf.01@gmail.com>
# Contributor: DeX77 <dex77@frugalware.org>

pkgname=openal
pkgver=1.17.2
pkgrel=4
pkgdesc="A cross-platform 3D audio API appropriate for use with gaming applications."
url="http://kcat.strangesoft.net/openal.html"
depends=('glibc>=2.24-4')
makedepends=('alsa-lib>=1.1.2-2' 'pulseaudio>=9.0-2' 'x11-protos' 'sdl2>=2.0.4-2' 'sdl>=1.2.15-4' 'ffmpeg>=3.1.3')
#32-bit
makedepends+=('lib32-alsa-lib>=1.1.2-2')
Finclude cmake cross32
groups=('xlib')
archs=('x86_64')
_F_archive_name="$pkgname-soft"
_F_cd_path="$_F_archive_name-$pkgver"
up2date="Flasttar http://kcat.strangesoft.net/openal.html"
source=(http://kcat.strangesoft.net/$pkgname-releases/$_F_archive_name-$pkgver.tar.bz2)
sha1sums=('5d6151b544caaf53a15b798a495308e421044b0d')

subpkgs=("${subpkgs[@]}" "lib32-$pkgname")
subdescs=("${subdescs[@]}" "A cross-platform 3D audio API appropriate for use with gaming applications. (32-bit)")
subdepends=("${subdepends[@]}" "")
subrodepends=("${subrodepends[@]}" "$pkgname=$pkgver")
subgroups=("${subgroups[@]}" 'lib32-extra')
subarchs=("${subarchs[@]}" "${archs[*]}")
suboptions+=('force')

build() {
	# 32-bit
        Fcross32_prepare
        Fcross32_copy_source

	_F_cmake_confopts="	-DLIB_SUFFIX=32"
	CMake_build
	Frm usr/{include,share,bin}
	Fsplit lib32-$pkgname /\*


	# 64-bit
	_F_cmake_confopts=""
        Fcross32_copy_back_source
        Fcross32_reset_and_fix
        Fcross32_delete_empty
	CMake_build
}

# optimization OK

