# Compiling Time: 0.70 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=swfdec
pkgver=0.4.5
pkgrel=1
pkgdesc="Swfdec is a decoder/renderer library for Macromedia Flash animations.."
url="http://swfdec.freedesktop.org/"
license="LGPL"
depends=('libmad' 'gtk+2' 'liboil' 'ffmpeg>=20070422' 'alsa-lib' 'faad2' 'gstreamer')
options=('scriptlet')
groups=('xlib')
archs=('i686' 'x86_64')
up2date="lynx -dump $url | grep -m1 'Swfdec [0-9]' | sed 's/.*Swfdec \(.*\) is released.*/\1/'"
source=($url/download/$pkgname/0.4/$pkgname-$pkgver.tar.gz)
Fconfopts="${Fconfopts[@]} --enable-gnome-vfs=no"
sha1sums=('86ecc5881c7951e09f6bcf4c978764c42f098bd7')

if [ "$CARCH" == "x86_64" ] ; then
# Well. Somehow on x86_64 and in chroot jscpucfg did not create jsautocfg.h automatically.
# If i try this hack below, then it works and swfdec compiles :S strange :S
build() {
	Fcd
	Fconf
	cd $Fsrcdir/$pkgname-$pkgver/libswfdec/js || Fdie
	make jscpucfg || Fdie
	make jsautocfg.h || Fdie
	cd $Fsrcdir/$pkgname-$pkgver || Fdie
	make || Fdie
	Fmakeinstall
}
fi

# optimization OK
