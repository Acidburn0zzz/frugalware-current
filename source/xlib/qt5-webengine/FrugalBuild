# Compiling Time: 64.56 SBU
# Maintainer: Marius Cirsta <mcirsta@frugalware.org>

pkgname=qt5-webengine
pkgrel=4
depends=('qt5-declarative>=5.6.0-2' 'qt5-webchannel>=5.6.0-2' 'libxcomposite' 'libxrandr' 'nss' 'libxtst' 'libxscrnsaver' \
	 'zlib' 'libwebp' 'libxml2' 'libevent' 'jsoncpp' 'opus' 'libvpx' 'snappy' 'icu4c' 'ffmpeg' 'zlib' \
	 'libsrtp')
makedepends=('git' 're2c' 'x11-protos')
Finclude qt5
source=(${source[@]} libjpeg.patch nss321.patch)
replaces=('libqt5webengine')
conflicts=("${replaces[@]}")
provides=("${replaces[@]}")
sha1sums=('8e0a8d8fb988f7935655681f6ed6288923d74dc0' \
          'fc40f2d0b97dfec78b3ca4a125dee8edbbd4da0a' \
          '21281d067a47467e632a4d1e3bb76e7ca3c79e04')

build()
{
	Fpatchall
	qmake-qt5 -d WEBENGINE_CONFIG+=" use_proprietary_codecs use_system_ffmpeg"
	make || Fdie
	make  INSTALL_ROOT=$Fdestdir install || Fdie
}

# optimization OK
