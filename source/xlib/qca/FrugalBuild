# Compiling Time: 1.44 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=qca
pkgver=2.1.1
pkgrel=1
pkgdesc="QCA aims to provide a straightforward and cross-platform crypto API, using Qt datatypes and conventions."
url="http://delta.affinix.com/qca/"
groups=('xlib')
archs=('i686' 'x86_64')
license="LGPL 2.1"
depends=('libqtcore>=4.2' 'libqtnetwork>=4.7' 'libqttest')
makedepends=('doxygen')
source=("http://download.kde.org/stable/qca/$pkgver/src/qca-$pkgver.tar.xz")
up2date="Flastverdir http://download.kde.org/stable/qca/"
sha1sums=('a4df34c2147c721109594c6dc822f693f572ad04')
options=('scriptlet')
Finclude cmake

Faddsubpkg	'qca-ossl' \
		'Plugins for qca providing TLS, CMS, X.509, RSA, DSA, Diffie-Hellman, PKCS#7, PKCS#12, SHA0, SHA1, SHA224, SHA256, SHA384, SHA512, MD4, MD5, RIPEMD160, Blowfish, DES, 3DES, AES128, AES192, AES256, CAST5, HMAC(SHA1, MD5, RIPEMD160), PBKDF1(MD2, SHA1), PBKDF2(SHA1).' \
		'' \
		'qca' \
		'qca-tls' \
		'' \
		'' \
		'' \
		'' \
		'' \
		'' \
		'' \
		'xlib-extra' \
		'i686 x86_64'


Faddsubpkg      'qca-cyrus-sasl' \
		'Plugins for qca providing SASL' \
                'cyrus-sasl' \
                'qca' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                'xlib-extra' \
                'i686 x86_64'

Faddsubpkg      'qca-gcrypt' \
                'Plugins for qca with gcrypt' \
                'libgcrypt' \
                'qca' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                'xlib-extra' \
                'i686 x86_64'

Faddsubpkg      'qca-gnupg' \
                'Plugins for qca with gnupg' \
                '' \
                'qca gnupg2' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                'xlib-extra' \
                'i686 x86_64'

Faddsubpkg      'qca-nss' \
                'Plugins for qca with nss' \
                'nss' \
                'qca' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                'xlib-extra' \
                'i686 x86_64'

Faddsubpkg      'qca-botan' \
                'Plugins for qca with botan' \
                'botan' \
                'qca' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                'xlib-extra' \
                'i686 x86_64'

Faddsubpkg      'qca-qt5' \
                'QCA for QT5' \
                'libqt5core libqt5network libqt5test botan cyrus-sasl nss' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                '' \
                'xlib-extra' \
                'i686 x86_64'


build() {
	# First Qt5 build
	CMake_build
	Fsplit qca-qt5 /usr

	cd ..

	# Now Qt4
	CMake_build -DQT4_BUILD=ON -DQCA_FEATURE_INSTALL_DIR=/usr/share/qt4/mkspecs/features

	Fsplit qca-cyrus-sasl	/usr/lib/qca/crypto/libqca-cyrus-sasl.so
	Fsplit qca-gcrypt	/usr/lib/qca/crypto/libqca-gcrypt.so
	Fsplit qca-gnupg	/usr/lib/qca/crypto/libqca-gnupg.so
	Fsplit qca-ossl		/usr/lib/qca/crypto/libqca-ossl.so
	Fsplit qca-nss		/usr/lib/qca/crypto/libqca-nss.so
	Fsplit qca-botan        /usr/lib/qca/crypto/libqca-botan.so
}


# optimization OK
