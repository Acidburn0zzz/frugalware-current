# Last modified: Tue, 06 Jun 2006 12:44:16 +0200
# Compiling time: 0.89 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=poppler
pkgver=0.5.3
pkgrel=1
pkgdesc="A PDF rendering library"
url="http://poppler.freedesktop.org/"
depends=('libxext' 'fontconfig' 'libstdc++' 'cairo' 'libjpeg' 'libxrender' 'libpng')
makedepends=('qt' 'gtk+2' 'gtk-doc')
groups=('xlib')
archs=('i686' 'x86_64')
up2date="lynx -dump http://poppler.freedesktop.org/releases.html|grep tar.gz|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=(http://poppler.freedesktop.org/$pkgname-$pkgver.tar.gz \
	01-poppler.conf)
options=('scriptlet')
sha1sums=('e197f5cf56f0676b5ca313577dd6456a393c46ec' \
	  'a048348d9a8c6d545714350d3ab66dc7028e4b7f')

subpkgs=('poppler-glib' 'poppler-qt' 'poppler-pdftools')
subdescs=('Poppler glib/GTK+ bindings' 'Poppler QT bindings' 'poppler xpdf tools')
subgroups=('gnome' 'kde' 'xapps')
subdepends=('poppler pango gtk+2' 'poppler qt' 'poppler')
subarchs=('i686 x86_64' 'i686 x86_64' 'i686 x86_64')

build()
{
	if [ "$CARCH" != "x86_64" ]; then
		Fbuild --enable-a4-paper --enable-qt --enable-gtk-doc --enable-xpdf-headers \
		--enable-zlib
	else
		Fbuild --enable-a4-paper --enable-qt --enable-xpdf-headers \
		--enable-zlib
	fi
	Ffile 01-poppler.conf etc/fonts/conf.d/01-poppler.conf
	Fsplit poppler-pdftools usr/bin/*
	Fsplit poppler-pdftools usr/man/man1/*
	Fsplit poppler-glib usr/lib/libpoppler-glib*
	Fsplit poppler-glib usr/include/poppler/glib/
	Fsplit poppler-glib usr/lib/pkgconfig/poppler-glib.*
	Fsplit poppler-qt usr/lib/libpoppler-qt*
	Fsplit poppler-qt usr/lib/pkgconfig/poppler-qt.*
	Fsplit poppler-qt usr/include/poppler/poppler-qt.h
}

# optimization OK
