# Compiling Time: 0 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=rtkit
pkgver=0.11
pkgrel=4
pkgdesc="Realtime Policy and Watchdog Daemon"
archs=('i686' 'x86_64')
groups=(base-extra)
depends=(dbus polkit)
_F_github_author="heftig"
_F_github_tag_v=y
Finclude github
source+=(0002-Drop-Removed-ControlGroup-stanza.patch \
	0001-SECURITY-Pass-uid-of-caller-to-polkit.patch \
        libsystemd.patch \
	rtkit-mq_getattr.patch)

sha1sums=('dc4bcaa898ef3cadb6fff35dcce752bc9f64e435' \
          '13d911b1379de8b885797379234a866d1d35d680' \
          '10631452619fa578e72366f6b08e5379de1e6510' \
          'c8fdac1a4750542bb3399f70a7d2f3c43f864c5a' \
          '6d0fa0b1f542e3b1f7cd339b214e0cc4ebc91ae4')

build(){
  Fbuild

  Fmkdir usr/share/dbus-1/interfaces

  Fexec ./rtkit-daemon --introspect \
    > "$Fdestdir/usr/share/dbus-1/interfaces/org.freedesktop.RealtimeKit1.xml"

}
# optimization OK
