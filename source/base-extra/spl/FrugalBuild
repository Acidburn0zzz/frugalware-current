# Compiling Time: 0.1 SBU
# Maintainer: James Buren <ryuo@frugalware.org>

pkgname=spl
pkgver=0.7.0
pkgextraver="-rc3"
pkgrel=23
pkgdesc="ZFS Solaris Porting Layer"
url="http://zfsonlinux.org"
depends=('glibc')
groups=('base-extra')
archs=('x86_64')
up2date="Flasttar $url"
source=(https://github.com/zfsonlinux/$pkgname/archive/$pkgname-$pkgver$pkgextraver.tar.gz \
	kernel-4.11.patch )
sha1sums=('bd1909cae5711713926e40d1c3ec7256e789be8b' \
          'bf1fde48dd509e296f6269e09d6c91d7d7f15ff8')
_F_cd_path="$pkgname-$pkgname-$pkgver$pkgextraver"
Finclude kernel-module

subpkgs=("$pkgname-source")
subrodepends=("$pkgname=$pkgver-$pkgrel")
subdescs=("Source code for the ZFS Solaris Porting Layer")
subgroups=("devel-extra")
subarchs=("${archs[*]}")

build()
{
	Fcd
	Fpatchall
	Fautogen

	Fmake --with-config=all
	Fmakeinstall

	Fbuild_kernelmod_scriptlet
	Fkernelver_compress_modules
	Fsplit $pkgname-source /usr/src
}

# optimization OK
