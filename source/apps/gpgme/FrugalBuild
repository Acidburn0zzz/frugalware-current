# Compiling time: 0.01 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=gpgme
pkgver=1.7.1
pkgrel=1
pkgdesc="A high-level crypto API for encryption"
url="http://www.gnupg.org/related_software/gpgme/"
groups=('apps')
archs=("x86_64")
depends=('libgpg-error>=1.25' 'libassuan>=2.4.3-2' 'glibc>=2.24-4')
source=(ftp://ftp.gnupg.org/gcrypt/$pkgname/$pkgname-$pkgver.tar.bz2)
up2date="lynx -dump http://www.gnupg.org/download/index.en.html |grep gpgme |Flasttarbz2"
sha1sums=('af95d75878200407eb577245eeb0681b1ad313ed')


makedepends+=('x11-protos' 'swig')
export CFLAGS+=" -D_FILE_OFFSET_BITS=64"
Finclude texinfo


subpkgs=("libgpgmepp")
subdescs=("C++ bindings for $pkgname")
subdepends=('libstdc++>=6.2.1-5')
subrodepends=("$pkgname>=$pkgver")
subgroups=('lib')
subarchs=("x86_64")

subpkgs+=("libqgpgme")
subdescs+=("Qt5 bindings for $pkgname")
subdepends+=('qt5-base>=5.7.0-3')
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xlib')
subarchs+=('x86_64')

subpkgs+=("python3-$pkgname")
subdescs+=("Python3 bindings for $pkgname")
subdepends+=('python3>=3.5.2-2')
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('devel')
subarchs+=('x86_64')

subpkgs+=("python2-$pkgname")
subdescs+=("Python2 bindings for $pkgname")
subdepends+=('python>=2.7.12-2')
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('devel')
subarchs+=('x86_64')


build() {

	Fbuild

	## C++
	Fsplit libgpgmepp    usr/lib/libgpgmepp.*
	## Qt5
	Fsplit libqgpgme    usr/lib/libqgpgme.*
	## python{2,3}
	Fsplit python3-$pkgname  usr/lib/python3.*
	Fsplit python2-$pkgname  usr/lib/python2.*

}
# optimization OK
