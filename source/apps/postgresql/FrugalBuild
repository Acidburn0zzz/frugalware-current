# Last Modified: Wed Aug 18 20:55:03 CEST 2004
# Compiling Time: ~12 minutes
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=postgresql
pkgver=7.4.6
pkgrel=1
pkgdesc="An advanced Object-Relational database management system (DBMS)"
url="http://www.postgresql.org/"
depends=('glibc' 'openssl' 'zlib' 'readline')
up2date=`wget --passive-ftp -O - -q ftp://ftp.postgresql.org/pub/source/|grep '[0-9]/</a> $'|tail -n 1|sed 's|.*v\([0-9\.]*\)/</a> $|\1|'`
source=(ftp://ftp.postgresql.org/pub/source/v$pkgver/postgresql-$pkgver.tar.gz \
	rc.postgresql)
md5sums=('e67dff3cab615a3795b8fc13c5341a79' 'ffe092a6793d5a323b81656752ea54d3')

build() {
	cd $startdir/src/$pkgname-$pkgver
	./configure --prefix=/usr/ --sysconfdir=/etc \
		--datadir=/usr/share/pgsql --localstatedir=/var/lib/pgsql \
		--with-openssl
	
	make || return 1
	
	make DESTDIR=$startdir/pkg install
	mkdir -p $startdir/pkg/etc/rc.d/rc.messages
	install -m755 $startdir/rc.$pkgname $startdir/pkg/etc/rc.d/rc.$pkgname
	install -m644 $startdir/messages/$pkgname.* \
		$startdir/pkg/etc/rc.d/rc.messages
}

# vim: ft=sh
