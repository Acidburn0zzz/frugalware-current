# Last Modified: Sat Jul 24 20:46:38 CEST 2004
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=quota-tools
pkgver=3.12
pkgrel=1
pkgdesc="Linux disk quota utilities"
url="http://sourceforge.net/projects/linuxquota/"
depends=('e2fsprogs')
install=$pkgname.install
up2date=`lynx -dump http://sourceforge.net/projects/linuxquota|grep quota-tools|sed 's/.*[0-9]]\([0-9\.]*\) .*/\1/'`
source=(http://dl.sourceforge.net/sourceforge/linuxquota/quota-$pkgver.tar.gz \
	rc.quota)
md5sums=('d69870f4a9732ed2fe072952ee7f1462' 'd8e3af667e12a84c999a9ebd13a73cd3')

build() {
	cd $startdir/src/$pkgname
	./configure --prefix=/usr

	make || return 1

	make ROOTDIR=$startdir/pkg install || return 1
	mkdir -p $startdir/pkg/etc/rc.d/rc.messages
	install -m755 $startdir/rc.quota $startdir/pkg/etc/rc.d/rc.quota
	install -m644 $startdir/messages/quota.* \
		$startdir/pkg/etc/rc.d/rc.messages
	# remove conflicts: glibc and nfs-utils
	rm $startdir/pkg/usr/include/rpcsvc/rquota.{h,x}
	rm $startdir/pkg/usr/man/man{2/quotactl.2,8/rquotad.8}
	rm $startdir/pkg/usr/sbin/rpc.rquotad
}
