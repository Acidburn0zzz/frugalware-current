# Compiling Time: 0.05 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=quota-tools
pkgver=4.03
pkgrel=1
pkgdesc="Linux disk quota utilities"
depends=('e2fsprogs>=1.42.13-4')
rodepends=('systemd>=227-14')
groups=('apps')
archs=('i686' 'x86_64' 'arm')
_F_sourceforge_dirname=linuxquota
_F_sourceforge_realname=$pkgname
_F_sourceforge_name=quota
_F_archive_grepv="pre"
Finclude sourceforge
backup=('etc/warnquota.conf' 'etc/quotatab' 'etc/quotagrpadmins')
url="http://sourceforge.net/projects/linuxquota/"
source=($source README.Frugalware \
	quota-4.03-fix_build_without_ldap.patch \
	quota-4.03-dont_override_cflags.patch)
sha1sums=('a8898331870459f73018043d139514b040125bdb' \
          '5c16336dce569446d9df7ce7a70c951f2b9a2af4' \
          '603ac878e8b6d4d51674926fa548088ae91511e8' \
          '65d65935c543495db4cf1bcac571a24893b87127')

build()
{
	Fcd quota-$pkgver

	Fpatchall
	Fautoreconf

	Fmake --sysconfdir=/etc --disable-ldapmail
	Fmakeinstall

	Fmv /usr/sbin /sbin

	# remove conflicts: glibc and nfs-utils
	Frm /usr/include/rpcsvc/rquota.{h,x}
	Frm /usr/share/man/man{2/quotactl.2,8/rquotad.8}
	Fdoc README.Frugalware
	Fmkdir /var/lib/quota
}

# optimization OK
