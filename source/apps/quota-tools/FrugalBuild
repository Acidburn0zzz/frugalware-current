# Compiling Time: 0.05 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=quota-tools
pkgver=3.17
pkgrel=4
pkgdesc="Linux disk quota utilities"
depends=('e2fsprogs')
rodepends=('systemd')
groups=('apps')
archs=('i686' 'x86_64' 'ppc' 'arm')
_F_sourceforge_dirname=linuxquota
_F_sourceforge_realname=$pkgname
_F_sourceforge_name=quota
_F_archive_grepv="pre"
Finclude sourceforge
url="http://sourceforge.net/projects/linuxquota/"
source=($source rc.quota README.Frugalware)
sha1sums=('8dc04ea803a43496dfe275a8260757f558a2d762' \
          'd4dd7a1b2d41e156145dfbb32318211f913471dc' \
          '5c16336dce569446d9df7ce7a70c951f2b9a2af4')

build()
{
	Fcd $pkgname
	Fmake --sysconfdir=/etc || return 1
	make ROOTDIR=$Fdestdir install || return 1
	Fmv /usr/sbin /sbin
	Frcd2 quota
	# remove conflicts: glibc and nfs-utils
	Frm /usr/include/rpcsvc/rquota.{h,x}
	Frm /usr/share/man/man{2/quotactl.2,8/rquotad.8}
	Fdoc README.Frugalware
	Fmkdir /var/lib/quota

	# don't run old sysv init script with different name when using systemd
	Fln quotaon.service /lib/systemd/system/quota.service
}

# optimization OK
