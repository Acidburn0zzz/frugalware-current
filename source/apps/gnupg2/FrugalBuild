# Compiling Time: 0.75 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=gnupg2
origname=gnupg
pkgver=2.0.17
pkgrel=1
pkgdesc="GnuPG2 is the new modularized version of GnuPG supporting OpenPGP and S/MIME"
url="http://www.gnupg.org/"
## libldap
depends=('openssl>=1.0.0' 'bzip2' 'curl>=7.20.0' 'pth' 'libksba>=1.0' 'libusb' 'readline' 'libgpg-error>=1.0' 'libgcrypt')
groups=('apps')
archs=('i686' 'x86_64' 'ppc')
up2date="lynx -dump http://www.gnupg.org/download/index.html |grep gnupg-2.0.*tar |sed -n -e 's/.*g-\(.*\)\.t.*/\1/;s/-/_/;1 p'"
source=(ftp://ftp.gnupg.org/gcrypt/$origname/$origname-$pkgver.tar.bz2)
sha1sums=('41ef5460417ca0a1131fc730849fe3afd49ad2de')

subpkgs=('gpg-agent')
subdescs=('gpg-agent is made for handling gpg-keys')
subdepends=('libgcrypt pth libgpg-error>=1.0 libassuan')
subgroups=('apps')
subarchs=('i686 x86_64 ppc')


build()
{
	Fcd $origname-$pkgver
	Fbuild \
		--enable-symcryptrun \
		--enable-threads=posix
	## FAQ and so conflicts
	Fmv usr/share/$origname usr/share/$pkgname
	# no gpg-zip binary is installed
	Frm usr/share/man/man1/gpg-zip.1
	## gpg-agent
	Fsplit gpg-agent usr/bin/gpg-agent
	Fsplit gpg-agent usr/libexec/gpg-preset-passphrase
	Fsplit gpg-agent usr/libexec/gpg-protect-tool
	Fsplit gpg-agent usr/bin/gpg-connect-agent

}

# optimization OK
