# Last Modified: Wed, 11 Oct 2006 10:42:57 +0200
# Compiling Time: 0.01 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=chkrootkit
pkgver=0.47
pkgrel=1
pkgdesc="chkrootkit is a tool to locally check for signs of a rootkit."
url="http://www.chkrootkit.org/"
pkgurl="ftp://ftp.pangeia.com.br/pub/seg/pac/"
groups=('apps')
depends=()
archs=('i686' 'x86_64')
up2date="lynx --dump http://www.chkrootkit.org/ | grep 'is now available' | sed 's/.* \([0-9\.a-z]\+\) is.*/\1/'"
source=($pkgurl$pkgname-$pkgver.tar.gz chkrootkit.diff)
sha1sums=('ef9ba1208572662a0da51dc284de550bf6378143' \
	  'e255222ab2735cd94e6b91a31b6d0123beb826f8')

build() {
	Fcd
	Fpatchall
	Fsed "CFLAGS\(.*\)=" "CFLAGS\1+=" Makefile || return 1
	Fsed "${head} -1" "${head} -n 1" chkrootkit || return 1

	Fmake
	Fmkdir /usr/sbin
	Fexe $pkgname-$pkgver/{chkdirs,chklastlog,chkproc,chkrootkit,chkwtmp,chkutmp,ifpromisc,strings-static,check_wtmpx} \
	    /usr/sbin
}

# optimization OK
