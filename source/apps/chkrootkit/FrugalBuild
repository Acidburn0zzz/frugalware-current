# Last Modified: Sun, 03 Jul 2005 15:19:08 +0200
# Compiling Time: ~1 minute
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=chkrootkit
pkgver=0.45
pkgrel=1
pkgdesc="chkrootkit is a tool to locally check for signs of a rootkit."
url="http://www.chkrootkig.org/"
pkgurl="ftp://ftp.pangeia.com.br/pub/seg/pac/"
groups=('apps')
archs=('x86_64')
up2date="wget --passive-ftp -O - -q $pkgurl|grep '$pkgname*tar.gz<'|tail -n 1|sed 's/.*d-\([0-9\.]*\).tar.gz<.*/\1/'"
# NOTE: Need to fix up2date
source=($pkgurl$pkgname-$pkgver.tar.gz chkrootkit.diff)
md5sums=('57493e24ca81750a200d8bcb4049e858' '231619188c52274641057c0449fb70aa')

build() {
	Fcd
	Fpatchall || return 1
	Fsed "CFLAGS\(.*\)=" "CFLAGS\1+=" Makefile || return 1
	Fsed "${head} -1" "${head} -n 1" chkrootkit || return 1
	
	Fmake || return 1
	Fmkdir /usr/sbin
	Fexe $pkgname-$pkgver/{chkdirs,chklastlog,chkproc,chkrootkit,chkwtmp,chkutmp,ifpromisc,strings-static,check_wtmpx} \
	    /usr/sbin
}

# vim: ft=sh
