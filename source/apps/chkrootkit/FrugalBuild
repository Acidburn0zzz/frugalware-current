# Last Modified: Fri, 28 Oct 2005 11:33:03 +0200
# Compiling Time: ~1 minute
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=chkrootkit
pkgver=0.46
pkgrel=1
pkgdesc="chkrootkit is a tool to locally check for signs of a rootkit."
url="http://www.chkrootkig.org/"
pkgurl="ftp://ftp.pangeia.com.br/pub/seg/pac/"
groups=('apps')
archs=('i686' 'x86_64')
up2date="wget --passive-ftp -O - -q $pkgurl | grep \"$pkgname.*tar\.gz<\" | tail -n 1 | sed 's/.*-\([0-9\.]*\).tar.gz.*/\1/'"
source=($pkgurl$pkgname-$pkgver.tar.gz chkrootkit.diff)
sha1sums=('20f9ac664e1795ce128ef94b89a9f14e67ef5c5c' \
	  'e255222ab2735cd94e6b91a31b6d0123beb826f8')

build() {
	Fcd
	Fpatchall || return 1
	Fsed "CFLAGS\(.*\)=" "CFLAGS\1+=" Makefile || return 1
	Fsed "${head} -1" "${head} -n 1" chkrootkit || return 1
	
	Fmake || return 1
	Fmkdir /usr/sbin
	Fexe $pkgname-$pkgver/{chkdirs,chklastlog,chkproc,chkrootkit,chkwtmp,chkutmp,ifpromisc,strings-static,check_wtmpx} \
	    /usr/sbin
}

# vim: ft=sh

# optimalization OK
