# Last Modified: Mon, 31 Oct 2005 10:51:19 +0100
# Compiling Time: ~1 minute
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=chkrootkit
pkgver=0.46a
pkgrel=1
pkgdesc="chkrootkit is a tool to locally check for signs of a rootkit."
url="http://www.chkrootkit.org/"
pkgurl="ftp://ftp.pangeia.com.br/pub/seg/pac/"
groups=('apps')
archs=('i686' 'x86_64')
up2date="lynx --dump http://www.chkrootkit.org/ | grep available | sed 's/.* \([0-9\.a-z]\+\) is.*/\1/'"
source=($pkgurl$pkgname-$pkgver.tar.gz chkrootkit.diff)
sha1sums=('5213b107cda5e5165da463650885efe8c15a14d2' \
	  'e255222ab2735cd94e6b91a31b6d0123beb826f8')

build() {
	Fcd
	Fpatchall || return 1
	Fsed "CFLAGS\(.*\)=" "CFLAGS\1+=" Makefile || return 1
	Fsed "${head} -1" "${head} -n 1" chkrootkit || return 1
	
	Fmake || return 1
	Fmkdir /usr/sbin
	Fexe $pkgname-$pkgver/{chkdirs,chklastlog,chkproc,chkrootkit,chkwtmp,chkutmp,ifpromisc,strings-static,check_wtmpx} \
	    /usr/sbin
}

# vim: ft=sh

# optimalization OK
