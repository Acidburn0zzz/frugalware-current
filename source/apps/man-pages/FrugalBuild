# Compiling Time: 0.01 SBU
# Maintainer: CSÉCSY László <boobaa@frugalware.org>
# Former m8r: VMiklos <vmiklos@frugalware.org>

pkgname=man-pages
pkgver=2.44
pkgrel=1
pkgdesc="Man pages are online documentation for Linux"
url="http://www.win.tue.nl/~aeb/linux/man"
depends=()
groups=('apps')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://www.kernel.org/pub/linux/docs/manpages/?C=M;O=D'|grep tar.gz$|sed -n -e 's/.*s-\(.*\)\.tar\.gz$/\1/' -e '1 p'"
source=(http://www.kernel.org/pub/linux/docs/manpages/$pkgname-$pkgver.tar.gz)

build()
{
	Fsed "MANDIR=\$(prefix)/usr/share/man" "MANDIR=\$(DESTDIR)/usr/man" \
		Makefile
	Fmakeinstall
	# removing files conflicting with other packages: coreutils
	Frm /usr/man/man1/{chgrp,chmod,chown,cp,dir,dd}.1
	Frm /usr/man/man1/{df,dircolors,du,install,ln,ls}.1
	Frm /usr/man/man1/{mkdir,mkfifo,mknod,mv}.1
	Frm /usr/man/man1/{rm,rmdir}.1
	Frm /usr/man/man1/{touch,vdir}.1
	# shadow
	Frm /usr/man/man{3/getspnam.3,5/passwd.5}
	# diffutils
	Frm /usr/man/man1/diff.1
	# fdutils
	Frm /usr/man/man4/fd.4
	# xfsprogs-attr
	Frm /usr/man/man2/{flistxattr,fremovexattr}.2
	Frm /usr/man/man2/{fsetxattr,getxattr,lgetxattr}.2
	Frm /usr/man/man2/{listxattr,llistxattr}.2
	Frm /usr/man/man2/{lremovexattr,lsetxattr}.2
	Frm /usr/man/man2/{removexattr,setxattr}.2
	Frm /usr/man/man2/fgetxattr.2
	# xorg
	Frm /usr/man/man4/mouse.4
}
# optimization OK - noarch
sha1sums=('b1460f64141b298e3c20568e8c12a960f964396f')
