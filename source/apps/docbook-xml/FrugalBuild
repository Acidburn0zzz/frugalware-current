# Compiling Time: 0 SBU
# Maintainer: AlexExtreme <alex@alex-smith.me.uk>

pkgname=docbook-xml
pkgver=4.5
pkgrel=2
pkgdesc="A widely used XML scheme for writing documentation and help"
url="http://www.oasis-open.org/docbook/xml/"
depends=('libxml2')
rodepends=('sed')
groups=('apps')
archs=('i686' 'x86_64' 'ppc')
up2date="lynx -dump ${url}index.1.shtml|grep current|sed 's/.*V\([0-9\.]\+\) .*/\1/'"
source=(${url}$pkgver/$pkgname-$pkgver.zip \
    ${url}4.4/$pkgname-4.4.zip \
    ${url}4.3/$pkgname-4.3.zip \
    ${url}4.2/$pkgname-4.2.zip \
    ${url}4.1.2/docbkx412.zip)
sha1sums=('b9124233b50668fb508773aa2b3ebc631d7c1620' \
          '7c4d91c82ad3747e1b5600c91782758e5d91c22b' \
          'e79a59e9164c1013b8cc9f64f96f909a184ca016' \
          '5e3a35663cd028c5c5fbb959c3858fec2d7f8b9e' \
          'b9ae7a41056bfaf885581812d60651b7b5531519')

build() {
    subver=('412' '4.2' '4.3' '4.4' '4.5')
    for version in "${subver[@]}"
    do
	if [ "$version" != "412" ]; then
        	Fextract $pkgname-$version.zip
	else
		Fextract docbkx412.zip
		version=4.1.2
	fi
	Fmkdir /usr/share/sgml/docbook/dtd/xml-dtd-$version
	Ffilerel *.cat /usr/share/sgml/docbook/dtd/xml-dtd-$version/
	Ffilerel *.dtd /usr/share/sgml/docbook/dtd/xml-dtd-$version/
        Ffilerel *.xml /usr/share/sgml/docbook/dtd/xml-dtd-$version/
        Ffilerel *.mod /usr/share/sgml/docbook/dtd/xml-dtd-$version/
        Fcprel ent /usr/share/sgml/docbook/dtd/xml-dtd-$version/
    done
}

