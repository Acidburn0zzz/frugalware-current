# Last Modified: Wed Aug  4 11:44:33 CEST 2004
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=j2re
pkgver=1.5.0
pkgrel=1
pkgdesc="Sun's java runtime environment"
url="http://java.sun.com"
pkgurl="http://ftp.isu.edu.tw/pub/Sun/java/J2SE/"
# the official mirror seems to be exremly slow :-(
#pkgurl="http://public.www.planetmirror.com/pub/java-sun/J2SE"
depends=('gcc' 'glibc')
makedepends=('x')
up2date=`lynx -dump $pkgurl/\?M=D|grep ][0-9\._]*/|sed -ne 's|.*]\(.*\)/.*|\1|' -e '1 p'`
source=($pkgurl/$pkgver/linux/jre-`echo $pkgver|sed 's/\./_/g'`-linux-i586.bin j2re.profile)
md5sums=('cf2aac02eef3d0607c916db7b5de65f5' '34a4af7fc9c700bc3d144a09f10b06cf')

build() {
	mkdir -p $startdir/pkg/usr/lib
	cd $startdir/pkg/usr/lib
	echo "yes" | \
	sh $startdir/src/jre-`echo $pkgver|sed 's/\./_/g'`-linux-i586.bin

	mv jre$pkgver $pkgname
	for i in $pkgname/*
	do
		[ -f $i ] && rm -f $i
	done
	chown -R root.root $startdir/pkg/*

	install -D -m755 $startdir/src/$pkgname.profile \
		$startdir/pkg/etc/profile.d/$pkgname.sh

	mkdir -p $startdir/pkg/usr/lib/mozilla/plugins
	cd $startdir/pkg/usr/lib/mozilla/plugins
	ln -sf /usr/lib/j2re/plugin/i386/ns7/libjavaplugin_oji.so .
}

# vim: ft=sh
