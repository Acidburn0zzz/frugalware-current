# Compiling Time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=memtest86+
pkgver=1.70
pkgrel=1
pkgdesc="An advanced memory diagnostic tool"
url="http://www.memtest.org/"
depends=()
groups=('apps')
archs=('i686' 'x86_64')
up2date="lynx -dump $url|grep tar.gz$|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=($url/download/$pkgver/$pkgname-$pkgver.tar.gz \
	memtest86+-1.70-cflags.diff \
	memtest86+-1.70-cflags-amd64.diff)

build()
{
	if [ "$CARCH" == "x86_64" ] ; then
	    Fpatch memtest86+-1.70-cflags-amd64.diff
	fi
	if [ "$CARCH" != "x86_64" ] ; then
	    Fpatch memtest86+-1.70-cflags.diff
	fi

	make memtest.bin || return 1
	Ffilerel /boot/memtest.bin
}

sha1sums=('d090699df558fc7f48604955c91fba1d06754661' \
          'bb04610aa060f0187a954311c9fbc48fc7ec859a' \
          '7305bd8f896ce553fa584513c965f03ec73826e2')

# optimization OK
