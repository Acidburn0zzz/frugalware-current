# Last Modified: Wed, 28 Dec 2005 11:52:42 +0100
# Compiling Time: 0.70 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=opensp
pkgver=1.5.1
pkgrel=3
pkgdesc="The OpenJade Group's SGML and XML parsing tools"
url="http://openjade.sourceforge.net/"
depends=('sgml-common')
groups=('apps')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://sourceforge.net/project/showfiles.php?group_id=2115'|grep -m1 'OpenSP-\(.*\).tar.gz'|sed 's/.*-\(.*\).t.* .*/\1/'"
source=(http://heanet.dl.sourceforge.net/sourceforge/openjade/OpenSP-$pkgver.tar.gz $pkgname-$pkgver-silent.diff $pkgname-$pkgver-gcc34.diff)
sha1sums=('93bd4f99972c9a50e07c68e3161ed3c25f9a3b22' \
          '33c0586cf758c091d857a5deb877ed23422554f6' \
          'fd3a7ea778003669e7c9ca55b5315a1aaf0145bd')

build()
{
	Fcd OpenSP-$pkgver
	Fpatchall
	Fconf --disable-static --enable-http \
		--enable-default-catalog=/etc/sgml/catalog \
		--enable-default-search-path=/usr/share/sgml
		
	make pkgdatadir=/usr/share/sgml/OpenSP-$pkgver || return 1
	
	Fmakeinstall pkgdatadir=/usr/share/sgml/OpenSP-$pkgver
	Fln onsgmls /usr/bin/nsgmls
	Fln osgmlnorm /usr/bin/sgmlnorm
	Fln ospam /usr/bin/spam
	Fln ospcat /usr/bin/spcat
	Fln ospent /usr/bin/spent
	Fln osx /usr/bin/sx
	Fln osx /usr/bin/sgml2xml
	Fln libosp.so /usr/lib/libsp.so
	Fmkdir /etc/sgml/
}

# vim: ft=sh

# optimization OK
