# Compiling Time: 0.42 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=bluez
pkgver=4.81
pkgrel=1
pkgdesc="Library to use the BlueZ Linux Bluetooth stack"
url="http://bluez.sourceforge.net/"
depends=('dbus-glib>=0.76' 'hal>=0.5.14-7' 'alsa-lib' 'libnl' 'zlib' 'libsndfile')
groups=('apps')
archs=('i686' 'x86_64' 'ppc')
up2date="Flasttar http://www.bluez.org/download/"
source=(http://www.kernel.org/pub/linux/bluetooth/$pkgname-$pkgver.tar.gz \
	 rc.bluetooth bluetooth.default Fix_netdevgroup.diff)
sha1sums=('852c79e2af55ca7db4e4dd66a2e98f839464093b' \
          'c9db2651400cc9261798afcc7e438acffbd2cc37' \
          'b54b6eb3606edcbac635f32f94d0afe32091c89f' \
          '21f7a64b47eb9578c91799a341a3a7ef67d786b6')
conflicts=('bluez-utils' 'bluez-libs')
provides=('bluez-utils' 'bluez-libs')
replaces=('bluez-utils' 'bluez-libs')
backup=(etc/sysconfig/bluetooth etc/bluetooth/rfcomm.conf etc/bluetooth/uart.conf)

#--enable-gstreamer disable for now

build() {
	Ffile bluetooth.default /etc/sysconfig/bluetooth
        Fbuild --enable-serial \
		--enable-input \
		--enable-audio \
		--enable-alsa \
		--enable-usb \
		--enable-netlink \
		--enable-tools \
		--enable-bccmd \
		--enable-hid2hci \
		--enable-dfutool \
		--enable-hidd \
		--enable-pand \
		--enable-dund \
		--enable-cups \
		--enable-configfiles \
		--localstatedir=/var \
		--enable-udevrules
	Fmkdir /etc/udev/rules.d
	cd scripts || Fdie
	Fcprel bluetooth.rules /etc/udev/rules.d/bluetooth.rules
	Frcd2 bluetooth
}

# optimization OK
