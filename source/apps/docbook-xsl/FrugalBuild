# Compiling Time: 0.01 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=docbook-xsl
pkgver=1.73.0
pkgrel=4
pkgdesc="XML stylesheets for Docbook-xml transformations."
depends=('libxml2' 'libxslt')
rodepends=('sed')
groups=('apps')
archs=('i686' 'x86_64')
_F_sourceforge_dirname="docbook"
Finclude sourceforge
up2date="lynx -dump 'http://sourceforge.net/project/showfiles.php?group_id=21935'|grep -m1 'docbook-xsl-\(.*\).tar.gz'|sed 's/.*xsl-\(.*\).t.*/\1/'"
source=($source docbook-xsl-manpages-charmap.patch)
sha1sums=('508872e782c4ada3929d43fe10bab73d2e969866' \
          'c2848edfd21b171b936e471410ed98485fb15a25')

build() {
	Fpatchall
	Fmkdir usr/share/xml/docbook/xsl/
	# we want * for enumerations, not ·
	sed -i 's/\\(bu/*/' manpages/*
	# prefer dejavu in fo, the default font does not support most accents
	sed -i 's/sans-serif/DejaVuSans/g' fo/*
	sed -i 's/serif/DejaVuSerif/g' fo/*
	for fn in VERSION common html xhtml javahelp fo template lib manpages highlighting
	do
		cp -a $Fsrcdir/$pkgname-$pkgver/$fn $Fdestdir/usr/share/xml/docbook/
	done
	Fmkdir etc/xml
}

# optimization OK
