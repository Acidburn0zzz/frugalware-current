# Compiling Time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=logrotate
pkgver=3.7.4
# lynx -dump http://cvs.fedora.redhat.com/viewcvs/devel/logrotate/sources?view=markup |grep tar |sed -e 's/  .*//'
pkg_md5="dcf518fe08ae3825e00b38b909d152d9"
pkgrel=1
pkgdesc="Rotates, compresses, removes and mails system log files."
url="http://cvs.fedora.redhat.com"
depends=('popt')
rodepends=('mailx')
groups=('base')
archs=('i686' 'x86_64' 'ppc')
up2date="lynx -dump $url/viewcvs/devel/logrotate/sources?view=markup |grep tar |sed -e 's/.*-\(.*\).t.*/\1/'"
source=("$url/repo/dist/logrotate/logrotate-$pkgver.tar.gz/$pkg_md5/logrotate-$pkgver.tar.gz" \
	logrotate-fdLeak.patch logrotate-sizeOption.patch logrotate-widecharPath.patch \
        logrotate.conf logrotate)

build()
{
	Fsed 'CFLAGS = -Wall' "CFLAGS = -Wall $CFLAGS" Makefile
	Fmkdir /etc/logrotate.d
	Fpatchall
	Fmake
	make PREFIX=$Fdestdir install || Fdie
	Ffile /etc/logrotate.conf
	Fexe /etc/cron.daily/logrotate
}
sha1sums=('2256bc1ac68e22be79ac1530378f6804580f6cef' \
	  '69e201eba0d94e516dc8f4fce3836f66226c6144' \
	  '6e4b1793a8f1a04bf5539c3428f340e86b8fe279' \
	  '946bd2f346ac5b5a631ba508c0277f4f14683827' \
	  '4cdc2cfc1077668fae05bfb0ce61bfd781c34d95' \
	  'cadda9e47640ea91e5f1488b518e4982acebad49')

# optimization OK
