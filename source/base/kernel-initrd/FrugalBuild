# Compiling Time: 0 SBU
# Maintainer: James Buren <ryuo@frugalware.org>

Finclude kernel-version

pkgname=kernel-initrd
pkgver=$_F_kernelver_ver
pkgrel=$_F_kernelver_rel
pkgdesc="The initrd for the Frugalware Linux Kernel."
url="http://www.frugalware.org"
depends=("kernel=$pkgver-$pkgrel")
makedepends=('dracut' 'linux-firmware' 'xz' 'eject' 'sysvinit-tools' \
	'module-init-tools' 'less' 'xfsprogs' 'jfsutils' 'reiserfsprogs')
groups=('base')
archs=('i686' 'x86_64')
up2date="$pkgver"
options=('nofakeroot')

build()
{
	_UNAME="$pkgver-fw$pkgrel"
	Fmkdir /boot
	Fexec /sbin/depmod -a $_UNAME
	Fexec /sbin/dracut --xz --force \
		$Fdestdir/boot/initrd-$_UNAME.img.xz $_UNAME
	Fln initrd-$_UNAME.img.xz /boot/initrd.img.xz
}
