# Compiling Time: 0.50 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=vim
pkgver=7.0
pkgrel=3
pkgdesc="VIM - Vi IMproved console"
url="http://www.vim.org"
depends=('ncurses')
groups=('base')
archs=('i686' 'x86_64' 'ppc')
backup=(usr/share/vim/vimrc)
up2date="lynx -dump $url/sources.php|grep bz2$|sed 's/.*-\(.*\)\.t.*/\1/;q'"
source=(ftp://ftp.vim.org/pub/vim/unix/$pkgname-$pkgver.tar.bz2 \
        vim-vimrc.diff frugalware.diff)

build()
{
	Fcd vim${pkgver/.}
	Fpatchall
	cd src
	Fmake --localstatedir=/var/lib/$pkgname --disable-gpm --with-x=no \
		--enable-gui=no --enable-multibyte
	make DESTDIR=$Fdestdir VIMRTDIR= install || return 1
	Fln vim /usr/bin/vi
	Fcp /usr/share/vim/vimrc_example.vim /usr/share/vim/vimrc
}

# optimization ok

sha1sums=('38ef48cabf942d0dc804a794dcc6f002b9457fc8' \
	  'd58d1eadd1c8a0276680c86e8ca859e9c6282f3f' \
	  '745cfd9d301b5167f3239a42e36f9bcd553a6462')
