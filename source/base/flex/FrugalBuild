# Compiling Time: 0.05 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=flex
pkgver=2.5.33
pkgrel=1
pkgdesc="A tool for generating text-scanning programs"
url="http://flex.sourceforge.net"
depends=('glibc' 'bash')
groups=('base' 'chroot-core')
archs=('i686' 'x86_64' 'ppc')
Finclude sourceforge
# avoid 2.5.34: it miscompiles itself and it break openoffice.org build:
# http://sourceforge.net/tracker/index.php?func=detail&aid=1849812&group_id=97492&atid=618177
# http://sourceforge.net/tracker/index.php?func=detail&aid=1849809&group_id=97492&atid=618177
# http://sourceforge.net/tracker/index.php?func=detail&aid=1849805&group_id=97492&atid=618177
up2date="$up2date |sed 's/2.5.34/2.5.33/'"
source=(${source[@]} lex)
sha1sums=('9bf2d66bb2e15c26c466eb88218cca6ad9476805' \
          '76701388d28fe8b1fb269c79c11a1316a02b4e46')

build()
{
	Fmake
	make check || return 1
	Fln libfl.a /usr/lib/libl.a
	Fexe /usr/bin/lex
}

# optimization ok
