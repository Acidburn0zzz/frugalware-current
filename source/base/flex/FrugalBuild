# Last Modified: Tue, 13 Dec 2005 18:11:46 +0100
# Compiling Time: ~1 minute
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=flex
pkgver=2.5.31
pkgrel=4
pkgdesc="A tool for generating text-scanning programs"
url="http://lex.sourceforge.net"
depends=('glibc' 'bash')
groups=('base' 'chroot-core')
archs=('i686' 'x86_64')
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=72099|grep flex-|sed 's/.*flex-\([^ ]*\) .*/\1/;q'"
source=(http://dl.sourceforge.net/sourceforge/lex/$pkgname-$pkgver.tar.bz2 \
	$pkgname-$pkgver-debian.diff)
md5sums=('363dcc4afc917dc51306eb9d3de0152f' 'bea8241afec0639333352dfcfd1809bf')

build()
{
	Fpatchall
	Fsed 'head -1' 'head -n 1' configure
	touch doc/flex.1
	
	Fmake || return 1
	
	Fmakeinstall
	Fln libfl.a /usr/lib/libl.a
	echo -e '#!/bin/sh\n\n' >lex
	echo -e 'exec /usr/bin/flex -l "$@"'>>lex
	Fexerel /usr/bin/lex
	Frm /usr/info/dir
}

# optimalization ok

# vim: ft=sh
