# Compiling Time: 0.02 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=acpid
pkgver=1.0.10
pkgrel=2
pkgdesc="Utilities for using ACPI power management"
depends=('glibc>=2.8-3')
backup=(etc/acpi/acpi_handler.sh)
groups=('base')
archs=('i686' 'x86_64' 'ppc')
_F_archive_grepv="20010510"
Finclude sourceforge
source=(${source[@]} acpi_handler.sh default acpid.service)
sha1sums=('743a11f34993cbd70f011d45634c4520e2d4d426' \
          'f232c48dbd9200e4ac79e2edc6ab5929835f42e0' \
          'afac4fc82e6ca65d4a156f39016ee8d15c6eeabc' \
          '6e8e2fadb63903c8ed336a579aba9aa765b64d63')

build()
{
	Fpatchall
	Fsed "-Werror" "$CFLAGS -D_GNU_SOURCE" Makefile
	Fmake

	Fmkdir /usr/bin
	make INSTPREFIX=$Fdestdir MAN8DIR=$Fdestdir/usr/share/man/man8 install
	Fexe /etc/acpi/acpi_handler.sh
	Fexe /etc/acpi/events/default

	#systemd
	Fmkdir lib/systemd/system
	Fcp acpid.service lib/systemd/system
}

# optimization OK
