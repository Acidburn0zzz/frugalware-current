--- rc.udev.in-0.5	2004-05-13 12:13:36.000000000 +0200
+++ rc.udev.in-0.6	2004-05-26 15:36:36.000000000 +0200
@@ -55,11 +55,11 @@
 
 if [ "$mode" == "dirs" ]; then
 	(cd /mnt; rm -rf floppy cdrom cdrecorder dvd dvdrecorder)
+	cat /etc/fstab |grep -v ^/dev/floppy>/etc/fstab.new
+	mv -f /etc/fstab.new /etc/fstab
 	if [ -e /dev/floppy ]; then
 		(
 		cd /etc
-		cat fstab |grep -v ^/dev/floppy>fstab.new
-		mv -f fstab.new fstab
 		echo "/dev/floppy /mnt/floppy auto user,noauto$mountopts 0 0" >>fstab
 		)
 		mkdir /mnt/floppy
@@ -67,11 +67,11 @@
 
 	for i in cdrom cdrecorder dvd dvdrecorder
 	do
+		cat /etc/fstab |grep -v ^/dev/$i>/etc/fstab.new
+		mv -f /etc/fstab.new /etc/fstab
 		if [ -e /dev/$i ]; then
 			(
 			cd /etc
-			cat fstab |grep -v ^/dev/$i>fstab.new
-			mv -f fstab.new fstab
 			echo "/dev/$i /mnt/$i auto ro,user,noauto$mountopts 0 0" >>fstab
 			)
 			mkdir /mnt/$i
