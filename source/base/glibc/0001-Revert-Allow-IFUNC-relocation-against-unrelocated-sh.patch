From d7f109e7b7f3befdbaacefec44e42adaeb2644f2 Mon Sep 17 00:00:00 2001
From: crazy <crazy@frugalware.org>
Date: Fri, 3 Mar 2017 17:39:08 +0100
Subject: [PATCH 1/3] Revert "Allow IFUNC relocation against unrelocated shared
 library"

This reverts commit 6fab532b4781b0bcb554fd5c2f2e6d5448343aff.
---
 sysdeps/i386/dl-machine.h   | 2 +-
 sysdeps/x86_64/dl-machine.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/sysdeps/i386/dl-machine.h b/sysdeps/i386/dl-machine.h
index 99a72f68f4..6eca69d567 100644
--- a/sysdeps/i386/dl-machine.h
+++ b/sysdeps/i386/dl-machine.h
@@ -329,7 +329,7 @@ elf_machine_rel (struct link_map *map, const Elf32_Rel *reloc,
 	    {
 	      const char *strtab
 		= (const char *) D_PTR (map, l_info[DT_STRTAB]);
-	      _dl_error_printf ("\
+	      _dl_fatal_printf ("\
 %s: Relink `%s' with `%s' for IFUNC symbol `%s'\n",
 				RTLD_PROGNAME, map->l_name,
 				sym_map->l_name,
diff --git a/sysdeps/x86_64/dl-machine.h b/sysdeps/x86_64/dl-machine.h
index daf4d8c070..3e7ae22c67 100644
--- a/sysdeps/x86_64/dl-machine.h
+++ b/sysdeps/x86_64/dl-machine.h
@@ -339,7 +339,7 @@ elf_machine_rela (struct link_map *map, const ElfW(Rela) *reloc,
 	    {
 	      const char *strtab
 		= (const char *) D_PTR (map, l_info[DT_STRTAB]);
-	      _dl_error_printf ("\
+	      _dl_fatal_printf ("\
 %s: Relink `%s' with `%s' for IFUNC symbol `%s'\n",
 				RTLD_PROGNAME, map->l_name,
 				sym_map->l_name,
-- 
2.12.0

