# Compiling Time: 0.02 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=unzip
pkgver=5.52
pkgrel=2
pkgdesc="Info-ZIP's unzip utility"
url="http://www.info-zip.org/UnZip.html"
depends=('glibc')
groups=('base' 'chroot-core')
archs=('i686' 'x86_64' 'ppc')
up2date="lynx -dump http://www.info-zip.org/UnZip.html|grep UnZip|sed -n 's/.*p \(.*\) \[.*/\1/;1 p'"
source=(http://ftp.info-zip.org/pub/infozip/src/unzip552.tar.gz CVE-2005-2475.diff CVE-2005-4667.diff)
sha1sums=('1831bd59b9e607a69052f83b263384895e2d4a19'\
          '9b0ea13f9176a428d87c93e7c76465f4dc63d628'\
          '0e6c8b3821c000590edeb42e33082704131dd6ec')

build()
{
	Fpatchall
	[ "$CARCH" == "ppc" ] && \
		make -f unix/Makefile LOCAL_UNZIP="$CFLAGS" prefix=$Fprefix \
			linux_noasm

	[ "$CARCH" != "ppc" ] && \
		make -f unix/Makefile LOCAL_UNZIP="$CFLAGS" prefix=$Fprefix \
			linux
	Fmakeinstall -f unix/Makefile
}

# optimization OK
