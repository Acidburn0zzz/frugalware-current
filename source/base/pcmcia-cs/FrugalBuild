# Last Modified: Fri, 27 May 2005 21:16:46 +0200
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=pcmcia-cs
pkgver=3.2.8
pkgrel=3
pkgdesc="A complete PCMCIA support package"
url="http://pcmcia-cs.sourceforge.net"
depends=('glibc')
makedepends=('kernel-source')
groups=('base')
archs=('i686' 'x86_64')
backup=(etc/pcmcia/{config.opts,ftl.opts,ide.opts,ieee1394.opts,memory.opts} \
        etc/pcmcia/{network.opts,parport.opts,scsi.opts,serial.opts} \
        etc/pcmcia/wireless.opts)
install=$pkgname.install
up2date="lynx -dump http://sourceforge.net/projects/pcmcia-cs/ |grep pcmcia-cs|sed -n '2 p'|tr -s ' '|cut -d ] -f 3|cut -d ' ' -f 1"
source=(http://dl.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.gz \
        rc.pcmcia)
md5sums=('0d6d65be8896eff081aee996049afaa5' '74d224e0366eec4ae6f405ca458e1b27')

build()
{
	Fsed '^\(CFLAGS =\) .* \($(WFLAG)\)' "\1 $CFLAGS \2" rules.mk
	echo -e "\ny\ny\ny\n2\n"| ./Configure

	make all || return 1

	make PREFIX=$Fdestdir install
	Frm /etc/{rc.d/rc.pcmcia,modules.conf}
	Frm /etc/init.d /etc/rc?.d
	Frcd pcmcia
}

# optimalization ok

# vim: ft=sh
