# Last Modified: Sat Oct 30 13:13:54 CEST 2004
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=frugalware
pkgver=0.1
pkgrel=1
pkgdesc="Basic FrugalWare Linux filesystem package"
depends=()
backup=(etc/{profile.d/lang.sh,issue.net,ld.so.conf,nsswitch.conf,securetty,termcap})
install=$pkgname.install
up2date=`cat frugalware-release |sed 's/.* \(.*\) .*/\1/'`
source=($pkgname-$pkgver.tar.gz frugalware-release issue rc.frugalware service \
	xconfig)
md5sums=('cd309e08fb74ac35bffdd3872a7f42c8' '6a3e98b871efb851ecc3473115bfada6' \
         'b9fd5c83ab76249c286e2186e6394641' '7ab667639b216216fb58c02f3dc4b698' \
	 '8d9002bcff40944b60775a5127cd666d' '8cbefd9c6dd9ad3fb3ddf15ab69d1fcb')

build() {
	cd $startdir/src/$pkgname-$pkgver
	mv * $startdir/pkg/
	cp $startdir/src/{frugalware-release,issue} $startdir/pkg/etc/
	sed -i "s/%version%/$pkgver/" $startdir/pkg/etc/issue

	mkdir -p $startdir/pkg/etc/rc.d/rc.messages
	install -m755 $startdir/rc.$pkgname $startdir/pkg/etc/rc.d/rc.$pkgname
	install -m644 $startdir/messages/$pkgname.* \
		$startdir/pkg/etc/rc.d/rc.messages
	
	mkdir -p $startdir/pkg/var/lib/frugalware/{system,messages}
	mkdir -p $startdir/pkg/sbin
	for i in service xconfig
	do
		install -m755 $startdir/src/$i \
			$startdir/pkg/var/lib/frugalware/system/
		install -m644 $startdir/messages/$i.* \
			$startdir/pkg/var/lib/frugalware/messages/
		( cd $startdir/pkg/sbin/
		  ln -s ../var/lib/frugalware/system/$i ./ )
	done
}

# vim: ft=sh
