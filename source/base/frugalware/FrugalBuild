# Last modified: Sun, 14 May 2006 14:05:24 +0200
# Compiling time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=frugalware
pkgver=0.4
pkgrel=2
pkgdesc="Basic Frugalware Linux filesystem package"
url="http://frugalware.org/"
depends=()
groups=('base' 'core')
archs=('i686' 'x86_64' 'ppc')
backup=(etc/{profile.d/lang.sh,issue.net,ld.so.conf,nsswitch.conf,securetty,termcap})
up2date="cat frugalware-release |sed 's/.* \(.*\) .*/\1/'"
source=(http://ftp.frugalware.org/pub/other/$pkgname/$pkgname-$pkgver.tar.gz \
        $pkgname-release issue rc.frugalware rc.frugalware-{de,hu,it}.po \
        service{,-{de,hu}.po} xconfig{,-{de,hu}.po} xwmconfig)
sha1sums=('1e09e2480a294f9b39229948570a9ee882adc30e' \
          '37996387dbf28236a64f9ce6d3ab2a3ea9049f37' \
          '63e6d8587abc73874f86824986f525cc8f50bd05' \
          'db49eba139ef1c27e524be89532c7937177c6c23' \
          'ce06a324037dcf9ef4e468f3ced295460b1cb864' \
          '276e9d7da0818a8d63748046347d0b92e586d2cb' \
          'ffb800312f72b04a1141ebe765ae2299e6626f9a' \
          '6a79b21d13d602b1fce456a90672b644dcc3a029' \
          '111f8e32941a25f67c6881aab115de8c4db3bc03' \
          'c18f10b81f004dc0245bcfa500e0e75b1a18871d' \
          '6fcc5b695e63faabd8ef168fcfb5a769ef45408f' \
          '7acf1ea4bb4691edef9526227c16558099be3665' \
          '99b9c09f241e4828c00552dc54dc398725553452' \
          '5ca27d9ab59505feab84351bf0b4d4c8e5da3fd3')

build()
{
	Fcd
	mv * $Fdestdir
	Ffile $pkgname-release issue /etc/
	Fsed "%version%" "$pkgver" $Fdestdir/etc/issue
	Frcd2
	for script in service xconfig xwmconfig ; do
		for lang in de hu ; do
			[ -f $Fsrcdir/$script-$lang.po ] || continue
			Fmsgfmt /var/lib/frugalware/messages $lang $script $script-$lang
		done
		Fexe /var/lib/frugalware/system/$script
		Fln ../var/lib/frugalware/system/$script /sbin/$script
	done
	if [ "$CARCH" == "x86_64" ]; then
		Fln /lib /lib64
		Fln /usr/lib /usr/lib64
		Fln /usr/local/lib /usr/local/lib64
	fi
}
