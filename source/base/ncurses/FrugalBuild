# Last Modified: Tue, 03 May 2005 13:21:43 +0200
# Compiling Time: ~7 minutes
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=ncurses
pkgver=5.4
pkgrel=2
pkgdesc="A System V Release 4.0 curses emulation library"
url="http://www.gnu.org/software/ncurses/ncurses.html"
depends=('glibc')
groups=('base')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://ftp.gnu.org/pub/gnu/ncurses/?M=D' |grep tar.gz$|sed -n 's/.*s-\(.*\)\.t.*/\1/;1 p'"
source=(ftp://ftp.gnu.org/pub/gnu/$pkgname/$pkgname-$pkgver.tar.gz \
        Eterm.ti rxvt.terminfo screeninfo.src)
md5sums=('069c8880072060373290a4fefff43520' '0378ad30ca37e13bfc2528f427b3c436' \
         'bab15c67f70798dae3afab65643ac6ad' '917241b16d4bb81c6257da3f4318df67')

build()
{
	Fmake --with-shared --with-normal --without-debug \
		--with-install-prefix=$Fdestdir || return 1
	make install
	
	# Set TERMINFO to point to the package:
	export TERMINFO=$Fdestdir/usr/share/terminfo
	# Update screen entry:
	progs/tic -v $Fsrcdir/screeninfo.src
	# Update rxvt entry:
	progs/tic -v $Fsrcdir/rxvt.terminfo
	# Update Eterm entry:
	progs/tic -v $Fsrcdir/Eterm.ti
	unset TERMINFO

	# move libs from /usr/lib to /lib
	Fmkdir /lib
	Fmv /usr/lib/libncurses.so.$pkgver /lib/
	Fln ../../lib/libncurses.so.$pkgver /usr/lib/libncurses.so.$pkgver
	Fln libncurses.so.$pkgver /lib/libncurses.so.5
	Frm /lib/libcurses.so
}

# optimalization ok

# vim: ft=sh
