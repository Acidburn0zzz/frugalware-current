# Compiling Time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=ncurses
pkgver=5.6
pkgrel=1
pkgdesc="A System V Release 4.0 curses emulation library"
url="http://www.gnu.org/software/ncurses/ncurses.html"
depends=('glibc')
groups=('base' 'chroot-core')
archs=('i686' 'x86_64' 'ppc')
up2date="lynx -dump 'http://ftp.gnu.org/pub/gnu/ncurses/?M=D' |grep tar.gz$|sed -n 's/.*s-\(.*\)\.t.*/\1/;1 p'"
source=(ftp://ftp.gnu.org/pub/gnu/$pkgname/$pkgname-$pkgver.tar.gz \
        Eterm.ti rxvt.terminfo screeninfo.src)
signatures=($source.sig '' '' '')

build()
{
	Fmake --with-shared --with-normal --without-debug \
		--with-install-prefix=$Fdestdir
	make install
	
	# Set TERMINFO to point to the package:
	export TERMINFO=$Fdestdir/usr/share/terminfo
	# Update screen entry:
	progs/tic -v $Fsrcdir/screeninfo.src
	# Update rxvt entry:
	progs/tic -v $Fsrcdir/rxvt.terminfo
	# Update Eterm entry:
	progs/tic -v $Fsrcdir/Eterm.ti
	unset TERMINFO

	# move libs from /usr/lib to /lib
	Fmkdir /lib
	Fmv /usr/lib/libncurses.so.$pkgver /lib/
	Fln ../../lib/libncurses.so.$pkgver /usr/lib/libncurses.so.$pkgver
	Fln libncurses.so.$pkgver /lib/libncurses.so.5
	Frm /lib/libcurses.so
}

# optimization ok
