# Last Modified: Tue, 12 Apr 2005 19:43:29 +0200
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=net-tools
pkgver=1.60
pkgrel=10
pkgdesc="Important tools for controlling the network subsystem"
depends=('glibc')
groups=('base')
install=$pkgname.install
up2date=`lynx -dump http://www.tazenda.demon.co.uk/phil/net-tools/|tail -n 1|tr '-' '\n'|sed 's/.tar.bz2//'|tail -n 1`
source=(http://www.tazenda.demon.co.uk/phil/net-tools/$pkgname-$pkgver.tar.bz2 \
        $pkgname-$pkgver-configure.diff $pkgname-$pkgver-gcc34.diff \
	$pkgname-$pkgver-i18n.diff rc.hostname rc.interfaces netconfig ipmask.c)
md5sums=('888774accab40217dde927e21979c165' '8f57d49f985441ebf3cbd5fc6cde7e43' \
         'de179aba910e9ac7d49a5f1f1dce5eb3' 'a9f59f7e076930e366cf7f3050583a33' \
	 'b85bc0f91cd0823ec8ba341a1fdbc7ea' 'c8597ce92258802da12d06e93d237612' \
	 '9932b1fe258934c589d8ddf772a3ffbd' 'b5c0a7ca246bb93bbbcf717edc5e4ba0')

# TODO: built with kernel-headers 2.4

build()
{
	Fpatchall
#	Fsed '^\(COPTS = .*\) -O2 \(.*\)' "\1 $CFLAGS \2" Makefile
	Fmake || return 1
	make BASEDIR=$Fdestdir update
	
	Fln ../../bin/hostname /usr/bin/hostname
	Frcd hostname
	Fexe /etc/rc.d/rc.interfaces
	# netconfig
	Fexe /var/lib/frugalware/system/netconfig
	Ffile ../messages/netconfig.* /var/lib/frugalware/messages/
	Fln ../var/lib/frugalware/system/netconfig /sbin/netconfig
	# ipmask
	cd $Fsrcdir
	cc -s $CFLAGS -o ipmask ipmask.c
	Fexerel /bin/ipmask
}

# vim: ft=sh
