# Last Modified: Sun, 31 Jul 2005 19:35:18 +0200
# Compiling Time: ~1 minute
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=net-tools
pkgver=1.60
pkgrel=11
pkgdesc="Important tools for controlling the network subsystem"
depends=('glibc' 'debianutils')
groups=('base')
archs=('i686' 'x86_64')
up2date="lynx -dump http://www.tazenda.demon.co.uk/phil/net-tools/|tail -n 1|tr '-' '\n'|sed 's/.tar.bz2//'|tail -n 1"
source=(http://www.tazenda.demon.co.uk/phil/net-tools/$pkgname-$pkgver.tar.bz2 \
        $pkgname-$pkgver-configure.diff $pkgname-$pkgver-gcc34.diff \
	$pkgname-$pkgver-i18n.diff rc.hostname rc.interfaces netconfig \
	ipmask.c $pkgname-$pkgver-kernel26.diff)
sha1sums=('944fb70641505d5d1139dba3aeb81ba124574b83' \
          'ffc3cd8044f83af7f0dd544d767d5d7623b91093' \
          'ff8daa4d48f867679d9feab2123cea4838684f79' \
          '8dd9e07f99356870104dc4c168746055e78b03f1' \
          '168330ad740abdeaf79dac58e682f73110454969' \
          '6d892f5a087c14ee6f5f40d78e1b1b55116e57b4' \
          '2f2d0f3f00393995dee90bffe84d8860d8e4de52' \
          '80c781fa238d0ddb80b135ec5dee367ec9914dec' \
          '448f5da06b9936c0c0e7ccf38cc36aa3ca5bd9f8')

build()
{
	Fpatchall
	Fsed '^\(COPTS = .*\) -O2 \(.*\)' "\1 $CFLAGS \2" Makefile
	Fmake
	make BASEDIR=$Fdestdir update
	
	Fln ../../bin/hostname /usr/bin/hostname
	Frcd hostname
	Fexe /etc/rc.d/rc.interfaces
	# netconfig
	Fexe /var/lib/frugalware/system/netconfig
	Ffile ../messages/netconfig.* /var/lib/frugalware/messages/
	Fln ../var/lib/frugalware/system/netconfig /sbin/netconfig
	# ipmask
	cd $Fsrcdir
	cc -s $CFLAGS -o ipmask ipmask.c
	Fexerel /bin/ipmask
}

# vim: ft=sh

# optimalization OK
