# Last Modified: Thu Sep  2 19:30:16 CEST 2004
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=gpm
pkgver=1.20.1
pkgrel=7
pkgdesc="General purpose mouse server"
depends=('ncurses')
backup=(etc/sysconfig/gpm)
install=$pkgname.install
up2date=`lynx -dump 'http://arcana.linux.it/pub/gpm/?M=D' |grep tar.gz|sed -n '1 p'|tr -s ' '|cut -d ' ' -f 4|sed 's/.tar.gz//'|cut -d - -f 2`
source=(http://arcana.linux.it/pub/$pkgname/$pkgname-$pkgver.tar.gz \
        rc.gpm mouseconfig gpm)
md5sums=('632a8fa8a6613027e407ee3e7a54cf13' '178385edf3e0f5aa95a3d7d596204a3f' \
         'f866e51e40501e1ff3ea3c5b41b82101' '7f2ef1ec0cdef45d0e4a451a6eb69e38')

build() {
	cd $startdir/src/$pkgname-$pkgver
	./configure --prefix=/usr --sysconfdir=/etc
	
	make || return 1

	make prefix=$startdir/pkg/usr install
	mkdir -p $startdir/pkg/etc/rc.d/rc.messages
	install -D -m755 $startdir/src/rc.gpm $startdir/pkg/etc/rc.d/rc.gpm
	install -D -m755 $startdir/src/mouseconfig \
		$startdir/pkg/var/lib/frugalware/system/mouseconfig
	mkdir -p $startdir/pkg/var/lib/frugalware/messages/
	cp -a $startdir/messages/mouseconfig.* \
		$startdir/pkg/var/lib/frugalware/messages/
	cp -a $startdir/messages/gpm.* $startdir/pkg/etc/rc.d/rc.messages/
	install -D -m644 $startdir/src/gpm $startdir/pkg/etc/sysconfig/gpm
	mkdir -p $startdir/pkg/sbin/ && cd $startdir/pkg/sbin/
	ln -s ../var/lib/frugalware/system/mouseconfig ./
}

# vim: ft=sh
