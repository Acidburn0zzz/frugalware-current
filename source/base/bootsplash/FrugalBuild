# Last Modified: Sun, 20 Nov 2005 20:52:20 +0100
# Compiling Time: 0.03 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=bootsplash
pkgver=3.2
fwver=0.3
pkgrel=3
pkgdesc="Graphical boot process for the linux kernel"
url="http://www.bootsplash.org"
depends=('freetype2' 'chkconfig' 'libmng' 'lcms')
groups=('base')
archs=('i686' 'x86_64')
install=$pkgname.install
up2date="lynx -dump 'http://www.bootsplash.de/files/splashutils/?M=D'|grep tar.bz2$|sed -n 's/.*h-\(.*\)\.t.*/\1/;1 p'"
source=(http://www.bootsplash.de/files/splashutils/$pkgname-$pkgver.tar.bz2
        http://ftp.frugalware.org/pub/other/artwork/bootsplash-theme/theme-frugalware-$fwver.tar.gz \
	rc.splash rc.splash-{de,hu,it}.po)
sha1sums=('096721c11058f64ea6e79f11af8ea71e16ce1843' \
          '07cfa5e5225658bbf9c8daa2e53d1842a3524f8c' \
          '0819557a80e36e1b78c89f248c1dbf7f6ed68342' \
          '262757c888c61175991f22671dd2d78a9d55ca7c' \
          '526ac51b93d64872e0b2be6e2cd560240db02831' \
          '99f9142aa06f6e154d27382edf129be37b891731')

build()
{
	Fcd $pkgname-$pkgver/Utilities
	Fsed "libmng-mini.a" "libmng.so" Makefile
	Fmake || return 1
	Fmkdir /sbin
	Fexerel fbmngplay fbresolution fbtruetype splash /sbin/
	Ffile $pkgname-$pkgver/Documentation/* /usr/share/doc/$pkgname-$pkgver/
	Frcd2 splash
	
	# bootsplash theme
	Fmkdir /etc/bootsplash/themes
	mv $Fsrcdir/frugalware $Fdestdir/etc/bootsplash/themes
	Fln frugalware /etc/bootsplash/themes/current
}

# vim: ft=sh
