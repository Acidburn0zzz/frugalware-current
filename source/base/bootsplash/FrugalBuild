# Last Modified: Tue, 15 Nov 2005 21:04:01 +0100
# Compiling Time: 0.03 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=bootsplash
pkgver=3.2
fwver=0.3
pkgrel=1
pkgdesc="Graphical boot process for the linux kernel"
url="http://www.bootsplash.org"
depends=('freetype2' 'chkconfig' 'libmng' 'lcms')
groups=('base')
archs=('i686' 'x86_64')
install=$pkgname.install
up2date="lynx -dump 'http://www.bootsplash.de/files/splashutils/?M=D'|grep tar.bz2$|sed -n 's/.*h-\(.*\)\.t.*/\1/;1 p'"
source=(http://www.bootsplash.de/files/splashutils/$pkgname-$pkgver.tar.bz2
        http://ftp.frugalware.org/pub/other/artwork/bootsplash-theme/theme-frugalware-$fwver.tar.gz \
	rc.splash rc.splash-{de,hu,it}.po)
sha1sums=('096721c11058f64ea6e79f11af8ea71e16ce1843' \
          '07cfa5e5225658bbf9c8daa2e53d1842a3524f8c' \
          'fed8c44b13f02d50c0b02bfae25a6b3db692320b' \
          'eae3a476fecd353ac02f1d71a204d54d8f6e0ea6' \
          '522d5394b3baf7d651728bf10ef3c3d102a248b9' \
          '97d0cdf7f4618a80ab17c2ae9549ad200589a021')

build()
{
	Fcd $pkgname-$pkgver/Utilities
	Fsed "libmng-mini.a" "libmng.so" Makefile
	Fmake || return 1
	Fmkdir /sbin
	Fexerel fbmngplay fbresolution fbtruetype splash /sbin/
	Ffile $pkgname-$pkgver/Documentation/* /usr/share/doc/$pkgname-$pkgver/
	Frcd2 splash
	
	# bootsplash theme
	Fmkdir /etc/bootsplash/themes
	mv $Fsrcdir/frugalware $Fdestdir/etc/bootsplash/themes
	Fln frugalware /etc/bootsplash/themes/current
}

# vim: ft=sh
