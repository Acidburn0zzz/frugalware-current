# Last Modified: Wed Sep 22 12:35:01 CEST 2004
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=bootsplash
pkgver=3.1
pkgrel=6
pkgdesc="Graphical boot process for the linux kernel"
url="http://www.bootsplash.org"
depends=('freetype2' 'chkconfig')
install=$pkgname.install
up2date=`wget --passive-ftp -O - -q ftp://ftp.suse.com/pub/people/stepan/bootsplash/rpm-sources/bootsplash/|grep tar.bz2|tail -n 1|sed 's/.tar.bz2//'|cut -d - -f 3 |cut -d '"' -f 1`
source=(ftp://ftp.suse.com/pub/people/stepan/bootsplash/rpm-sources/$pkgname/$pkgname-$pkgver.tar.bz2
        theme-frugalware.tar.gz rc.splash)
md5sums=('f9950a4d61fe6261e3211d317eab0e03' '70d9dcc7474c357ef3ccee3598d1b7bb' \
         '3fac206ef312377b2ce6ffad1e87b90f')

build() {
  cd $startdir/src/$pkgname-$pkgver/Utilities
  
  make || return 1
  
  # intalling binaries
  mkdir -p $startdir/pkg/sbin
  cp fbmngplay fbresolution fbtruetype splash $startdir/pkg/sbin/
  
  # bootsplash theme
  cd $startdir/src/
  mkdir -p $startdir/pkg/etc/bootsplash/themes
  mv frugalware $startdir/pkg/etc/bootsplash/themes
  cd $startdir/pkg/etc/bootsplash/themes
  ln -s frugalware current
  
  # init script
  mkdir -p $startdir/pkg/etc/rc.d/rc.messages
  install -m755 $startdir/src/rc.splash $startdir/pkg/etc/rc.d/rc.splash
  cp -a $startdir/messages/splash.* $startdir/pkg/etc/rc.d/rc.messages/
}

# vim: ft=sh
