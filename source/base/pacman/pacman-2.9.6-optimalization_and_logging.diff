diff -Naur pacman-2.9.6.orig/doc/makepkg.8.in pacman-2.9.6/doc/makepkg.8.in
--- pacman-2.9.6.orig/doc/makepkg.8.in	2005-07-02 12:57:56.000000000 +0200
+++ pacman-2.9.6/doc/makepkg.8.in	2005-07-02 12:59:26.000000000 +0200
@@ -390,6 +390,9 @@
 Sets MAKEFLAGS="-j<jobs>" before building the package.  This is useful for overriding
 the MAKEFLAGS setting in /etc/makepkg.conf.
 .TP
+.B "\-k, \-\-logging"
+Logging package build process
+.TP
 .B "\-l <pkgname>"
 Download the package's buildscript before starting the build.  This is useful
 if you do not want to do a full 'repoman upd' nor want to download manually the
diff -Naur pacman-2.9.6.orig/scripts/makepkg pacman-2.9.6/scripts/makepkg
--- pacman-2.9.6.orig/scripts/makepkg	2005-07-02 12:57:56.000000000 +0200
+++ pacman-2.9.6/scripts/makepkg	2005-07-02 13:06:32.000000000 +0200
@@ -189,6 +189,7 @@
 	echo "  -h, --help       This help"
 	echo "  -i, --install    Install package after successful build"
 	echo "  -j <jobs>        Set MAKEFLAGS to \"-j<jobs>\" before building"
+	echo "  -k, --logging    Logging package build process"
 	echo "  -l <pkgname>     Download buildscipts before building"
 	echo "  -m, --nocolor    Disable colorized output messages"
 	echo "  -n, --nostrip    Do not strip binaries/libraries"
@@ -219,6 +220,7 @@
 NOSTRIP=0
 NOBUILD=0
 RMDEPS=0
+LOGGING=0
 NOUP2DATE=0
 BUILDSCRIPT="./FrugalBuild"
 
@@ -241,6 +243,7 @@
 		--genmd5)     GENMD5=1 ;;
 		--rmdeps)     RMDEPS=1 ;;
 		--noup2date)     NOUP2DATE=1 ;;
+		--logging)    LOGGING=1 ;;
 		--help)
 			usage
 			exit 0
@@ -250,7 +253,7 @@
 			exit 1
 			;;
 		-*)
-			while getopts "acCsbdehifgj:l:Lmnorp:uw:-" opt; do
+			while getopts "acCsbdehifgj:l:Lkmnorp:uw:-" opt; do
 				case $opt in
 					a) SEARCHDEPS=1 ;;
 					c) CLEANUP=1 ;;
@@ -266,6 +269,7 @@
 						;;
 					i) INSTALL=1 ;;
 					j) export MAKEFLAGS="-j$OPTARG" ;;
+					k) LOGGING=1 ;;
 					l) DOWNLOAD="$OPTARG" ;;
 					m) USE_COLOR="n" ;;
 					n) NOSTRIP=1 ;;
@@ -638,8 +642,9 @@
 # build
 msg "Starting build()..."
 stime=`date +%s`
-build 2>&1
-if [ $? -gt 0 ]; then
+BUILDLOG=${startdir}/${pkgname}-${pkgver}-${pkgrel}-${CARCH}.log
+build 2>&1 | tee "${BUILDLOG}"
+if [ ${PIPESTATUS[0]} -gt 0 ]; then
 	error "Build Failed.  Aborting..."
 	exit 2
 fi
@@ -827,6 +832,27 @@
 	pacman -R $makedeplist $deplist
 fi
 
+# check optimalization and write it to $BUILDSCRIPT
+msg "Checking for optimalization..."
+if grep -q -- "\($CFLAGS\|$CXXFLAGS\)" "${BUILDLOG}" ; then
+	if ! grep -q "# optimalization" "${BUILDSCRIPT}" ; then
+		echo -e "\n# optimalization OK" >> "${BUILDSCRIPT}"
+	fi
+else
+	warning "This package isn't ${CARCH} optimized!"
+fi
+
+# add vim ft line if missing
+if ! grep -q "vim: ft=sh" "${BUILDSCRIPT}" ; then
+	echo -e "\n# vim: ft=sh" >> "${BUILDSCRIPT}"
+fi
+
+# remove build log
+if [ "${LOGGING}" == "0" ] ; then
+	msg "Removing build log..."
+	rm -f "${BUILDLOG}"
+fi
+
 # update last mod line
 sed -i "s/^\(# Last modified: \).*/\1`date -R`/i" $BUILDSCRIPT
 
