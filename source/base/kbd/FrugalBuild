# Compiling Time: 0.06 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=kbd
pkgver=1.12
pkgrel=22
pkgdesc="Keyboard maps and console fonts"
url="http://www.ibiblio.org/pub/Linux/system/keyboards/"
up2date="lynx -dump 'http://www.ibiblio.org/pub/Linux/system/keyboards/?C=M;O=D'|grep kbd.*tar.gz$ | grep -v 'GR' |sed -n 's/.*d-\(.*\)\.t.*/\1/;1 p'"
depends=('sed' 'bash')
groups=('base')
archs=('i686' 'x86_64' 'ppc')
backup=(etc/sysconfig/font)
source=(ftp://ftp.win.tue.nl/pub/linux-local/utils/$pkgname/$pkgname-$pkgver.tar.gz \
	$pkgname-$pkgver-{alias,find_map_fix}.patch rc.font \
	rc.font-{de,hu}.po rc.keymap rc.keymap-{de,hu}.po font \
	kbd_mode.diff)

build()
{
	# optimization
	Fcd
	for i in `find . -name Makefile.in` ; do
		Fsed "^CFLAGS  =" "CFLAGS  +=" $i
	done
	# main package
	Fbuild
	# init script
	Frcd2 font
	Frcd2 keymap
	# config
	Ffile /etc/sysconfig/font
}

# optimization OK

sha1sums=('d4917da308e01e74d67d7b814bf527063b3919fc' \
          '2a266a3fc520371bba9050ea8fa13f4592892e83' \
          '420fd29fc06e3518dac3fac8003c8ac71ae3b28e' \
          'd9d18594eb5b2e4c163e90d4bfb775ba46b9321b' \
          '7b1e17e399608f54ff70ac22cf8e697e01ea6b23' \
          'd385735e880bea9f8444dfbc5144007eaaffee32' \
          '1f340e6351baceae3bb393d3f7395c7df746dcfb' \
          'beceda61cdf168e4063873a9ea6312dbc8284613' \
          'b9c50c54c7f3b1efce7858a39b0dd7490cc742a3' \
          '84e361527f415ef4d560b3e6affea0d463d544de' \
          'dde0580490e0b7c62bacaadc5c3a3e2ece7fa1ff')
