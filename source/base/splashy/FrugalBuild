# Last Modified: Sat, 29 Jul 2006 11:17:16 +0200
# Compiling Time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=splashy
pkgver=0.1.8.1
themever=0.4
pkgrel=3
pkgdesc="A complete user-space boot splash system"
url="http://alioth.debian.org/projects/splashy/"
depends=('libgcc')
replaces=('bootsplash')
conflicts=('bootsplash')
makedepends=('directfb>=0.9.25.1-5' 'glib2' 'procps')
backup=(etc/splashy/config.xml)
removes=(etc/splashy/splashy.fifo)
groups=('base')
archs=('i686' 'x86_64')
up2date="lynx -dump $url |grep ' splashy '|sed 's/.*splashy \([^ ]*\) .*/\1/'"
source=(http://alioth.debian.org/download.php/1702/splashy-$pkgver.tar.bz2 \
	splashy-0.1.8-frugalware.diff splashy-0.1.8.1-nof2.diff\
	rc.splash rc.splash-{de,hu,it}.po \
	http://ftp.frugalware.org/pub/other/artwork/splashy-theme/splashy-frugalware-$themever-$CARCH.tar.gz)
sha1sums=('31955d542373d7996787751fe002283dbff8780d' \
	  'c5e8743fd8b1e30e46b29fc5ccdb8e7d49699134' \
	  'a030fe185ea4a3a844803442f4b58f9469cac656' \
	  'a9ece5cc96e04d1010d423fe91e69b92beb81498' \
	  '82c272166e89ecc840169fa76cc3fb45e2236712' \
	  'd86d3554aa64b129352e826d1e659a5a4611b47d' \
	  'c9da7e70efb6070e61ba2e6908a712ac524ae90b')
[ "$CARCH" == "i686" ] && sha1sums=(${sha1sums[@]} '2d09b182e6999c5da8a19cb6a660b2e44a1acb6e')
[ "$CARCH" == "ppc" ] && sha1sums=(${sha1sums[@]} '47a2bd19095858e5e09e5ba6894ed9fb529b5ca9')
[ "$CARCH" == "x86_64" ] && sha1sums=(${sha1sums[@]} 'eecb7a7acf59a7d704c16ae6b8077939a31a734b')

build()
{
	Fcd
	mv ../frugalware themes/
	Fbuild
	Frm /etc/init.d
	Frcd2 splash
	mkfifo -m 640 $Fdestdir/etc/splashy/splashy.fifo
}

# optimization OK
