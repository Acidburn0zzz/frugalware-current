# Compiling Time: 0.47 SBU
# Maintainer: James Buren <ryuo@frugalware.org>
# Contributor: Miklos Vajna <vmiklos@frugalware.org>

pkgname=bash
pkgver=4.4.12
pkgrel=2
pkgdesc="The GNU Bourne Again shell"
url="http://tiswww.case.edu/php/chet/bash/bashtop.html"
dlurl="http://ftp.gnu.org/gnu/$pkgname"
backup=(etc/{profile,shells,skel/.bashrc})
depends=('glibc>=2.25-5' 'readline>=6.3-9') ## not true right now it need readline 7.0
groups=('base' 'core')
archs=('x86_64')
up2date="Flasttar $dlurl"
source=("$dlurl/$pkgname-$pkgver.tar.gz" profile shells bashrc system.bashrc)
signatures=("${source[0]}.sig" '' '' '' '')
Fconfopts+="	--with-curses \
                --enable-readline \
                --without-bash-malloc \
                --enable-brace-expansion \
                --enable-debugger \
                --enable-dparen-arithmetic"

options=('force')

build()
{
	_bashconfig=(-DSYS_BASHRC=\'\"/etc/bashrc\"\')
	export CFLAGS="${CFLAGS} ${_bashconfig[@]}"
	Fcd

	Fbuild

	Fmv /usr/bin /
	Ffile profile shells /etc/
	Ffile bashrc /etc/skel/.bashrc
	Ffile system.bashrc /etc/bashrc
	Fln bash /bin/sh
}

# optimization OK
