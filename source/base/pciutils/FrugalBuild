# Last Modified: Sun, 10 Jul 2005 17:45:48 +0200
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=pciutils
pkgver=2.1.11
pkgrel=4
pkgdesc="PCI utilities"
url="http://atrey.karlin.mff.cuni.cz/~mj/pciutils.html"
depends=('glibc')
groups=('base')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://www.kernel.org/pub/software/utils/pciutils/?C=M&O=D'|grep tar.bz2|grep -v sign|sed -n '1 p'|tr -s ' '|cut -d ' ' -f 4|sed 's/.tar.bz2//'|cut -d - -f 2"
source=(http://www.kernel.org/pub/software/utils/$pkgname/$pkgname-$pkgver.tar.bz2 $pkgname-$pkgver-pcimodules.diff \
	pciutils-2.1.11-sysfs.patch pciutils-2.1.11-scan.patch)
md5sums=('2b3b2147b7bc91f362be55cb49fa1c4e' 'c6135ce795940ebf3777592d4e6f8049'\
         'f4d220c568a00c1ceafe6dc129ae6e95' '60d79fbf53038186b939f83841d5f318')

build()
{
	Fpatchall
	Fsed '^OPT=.*' "OPT=$CFLAGS" Makefile
	make PREFIX=/usr || return 1
	rm -f pci.ids
	wget http://pciids.sourceforge.net/pci.ids
	make PREFIX=$Fdestdir/usr install
	Fmkdir /usr/{include/pci,lib}
	Ffilerel lib/*.h usr/include/pci/
	Frm usr/include/pci/config.h
	Ffilerel lib/libpci.a /usr/lib/
}

# optimalization ok

# vim: ft=sh
