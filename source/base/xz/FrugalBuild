# Compiling Time: 0.20 SBU
# Maintainer: crazy <crazy@frugalware.org>
# Contributor: Tuxbubling <tuxbubling@jabber.fr>

pkgname=xz
pkgver=4.999.9beta
pkgrel=2
pkgdesc="XZ Utils is free general-purpose data compression software with high compression ratio."
url="http://tukaani.org/xz/"
depends=('glibc>=2.8-4')
groups=('base' 'chroot-core')
archs=('i686' 'x86_64' 'ppc' 'arm')
#_F_archive_grepv="\(999\|alpha\)"
up2date="Flasttar $url"
source=($url/$pkgname-$pkgver.tar.gz)
sha1sums=('9627de3997ddcdb02f8d327e84b2cf1941ecd230')
options=('force')

subpkgs=('xz-lzma')
subdescs=('LZMA compatibility commands for XZ.')
subgroups=('base-extra')
subrodepends=("$pkgname=$pkgver")
subarchs=('i686 x86_64 ppc')
subconflicts=('lzma')
subprovides=('lzma')

if [ "$CARCH" == "x86_64" ]; then
	export CFLAGS="$CFLAGS -fPIC"
	export CXXFLAGS="$CXXFLAGS -fPIC"
fi

build() {
	Fbuild

	Fsplit xz-lzma /usr/bin/{lz\*,unlzma}
	Fsplit xz-lzma /usr/share/man/man1/{lz,unlzma}\*
}

# optimization OK
