# Last Modified: Sat, 01 Oct 2005 20:07:32 +0200
# Compiling Time: 0.31 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=shadow
pkgver=4.0.12
pkgrel=4
pkgdesc="Shadow password file utilities"
url="http://shadow.pld.org.pl"
backup=(etc/{login.defs,group,passwd,shadow,adduser.conf} etc/limits)
depends=('glibc')
groups=('base' 'chroot-core')
archs=('i686' 'x86_64')
up2date="lynx -dump http://shadow.pld.org.pl/|grep Latest|tr -s ' '|cut -d ' ' -f 4"
source=(ftp://ftp.pld.org.pl/software/$pkgname/$pkgname-$pkgver.tar.bz2 \
        adduser group passwd shadow $pkgname-4.0.9-login_defs.diff adduser.conf)
sha1sums=('cf54e6803d35a55ab8ed2df649f07c82d3a75b2c' \
          '0a66f80c88fba31e5666dd9c986871f0d6468bb1' \
          '8390982db776d844354fb0e33cf06c00abcd4988' \
          '714b51937e9bb3a4d721108249921e038ccc1c0a' \
          'a70e741ccea2d2f81b25b8b608a5fc3d3ab83ebe' \
          '033d9ad6a330f2b9849588d097a690e398215e04' \
          'b9815f46e4965d6f972554629babf54ccdf7a71a')

build()
{
	Fbuild --enable-static=yes --enable-shared=no --disable-desrpc \
		--mandir=/usr/man || return 1
	Frm /bin/{vigr,sg}
	Ffilerel etc/login.defs.linux /etc/login.defs
	Ffilerel etc/login.access /etc/login.access
	Fexe /usr/sbin/adduser
	Ffile /etc/group
	Ffile /etc/passwd
	Fsed '\(#sysadm  -\)' '\1\n# max number of processes for users\n* U 256/' etc/limits
	Ffilerel etc/limits /etc/limits
	Finstall 600 /etc/shadow
	Ffile /etc/adduser.conf
	# From gentoo ebuild
	Frm /lib/lib{misc,shadow}.{a,la}
}

# optimalization ok

# vim: ft=sh
