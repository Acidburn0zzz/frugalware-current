# Last Modified: Mon, 11 Apr 2005 00:25:58 +0200
# Compiling Time: ~4 minutes
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=shadow
pkgver=4.0.7
pkgrel=3
pkgdesc="Shadow password file utilities"
url="http://shadow.pld.org.pl"
backup=(etc/{login.defs,group,passwd,shadow} etc/default/useradd etc/limits)
depends=('glibc')
groups=('base')
archs=('i686' 'x86_64')
up2date="lynx -dump http://shadow.pld.org.pl/|grep Latest|tr -s ' '|cut -d ' ' -f 4"
source=(ftp://ftp.pld.org.pl/software/$pkgname/$pkgname-$pkgver.tar.bz2 \
        adduser group passwd shadow $pkgname-$pkgver-login_defs.diff)
md5sums=('89ebec0d1c0d861a5bd5c4c63e5cb0cc' 'cc880cb940a66b5da7440390ef7a1406' \
	 '9cfb09a207215330324c1fd0d6699d03' '500fedaf9fc5231d4497104e16202a30' \
	 '4d01cd4ea40bd95f1d233614dd970e64' 'ce82cd703aaef7e532be68c00f325d3c')

build()
{
	Fbuild --prefix=/usr --disable-shared --disable-desrpc \
		--mandir=/usr/man || return 1
	Frm /bin/{vigr,sg}
	Ffilerel etc/login.defs.linux /etc/login.defs
	Ffilerel etc/login.access /etc/login.access
	Fexe /usr/sbin/adduser
	Ffile /etc/group
	Ffile /etc/passwd
	Fsed '\(#sysadm  -\)' '\1\n# max number of processes for users\n* U 256/' etc/limits
	Ffilerel etc/limits /etc/limits
	Finstall 600 /etc/shadow
}

# optimalization ok

# vim: ft=sh
