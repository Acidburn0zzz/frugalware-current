# Last Modified: Tue Oct 26 22:16:29 CEST 2004
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=submount
pkgver=0.9
pkgrel=9
pkgdesc="Automatically mounts and unmounts removable media devices."
url="http://submount.sourceforge.net/"
depends=('glibc' 'kernel=2.6.9')
backup=(etc/sysconfig/submount)
install=$pkgname.install
up2date=`lynx -dump http://sourceforge.net/projects/submount/|grep submount|sed -n '2 p'|tr -s ' ' |cut -d ' ' -f 3|cut -d ] -f 2`
source=(http://download.sourceforge.net/submount/$pkgname-$pkgver.tar.gz \
	rc.submount submount)
md5sums=('f6abac328dbfb265eff18561065575c6' '61e35bf8bc17a169d0dbbdbd815be1a5' \
	 '8dc5f1dd1a404df33503386be9539346')

build() {
	if ! [ -e /usr/src/linux/include/asm ]; then
		echo "Please run make in /usr/scr/linux !"
		exit 1
	fi
	cd $startdir/src/$pkgname-$pkgver
	cd subfs-$pkgver
	
	make || return 1
	cd ..
	./submountd-$pkgver/configure
	make || return 1
	
	make install DESTDIR=$startdir/pkg
	cd subfs-$pkgver
	make install DESTDIR=$startdir/pkg
	mkdir $startdir/pkg/media
	install -D $startdir/src/rc.submount \
		$startdir/pkg/etc/rc.d/rc.submount
	install -D -m644 $startdir/src/submount \
		$startdir/pkg/etc/sysconfig/submount
}

# vim: ft=sh
