# Compiling Time: 0.05 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=ca-certificates
pkgver=20130906
pkgrel=1
pkgdesc='Common CA certificates'
archs=('i686' 'x86_64' 'arm')
groups=('base')
depends=('openssl' 'scriptlet-core' 'perl')
url='http://packages.qa.debian.org/c/ca-certificates.html'
_F_cd_path="$pkgname"
source=("http://ftp.debian.org/debian/pool/main/c/${pkgname}/${pkgname}_${pkgver}.tar.gz" disable-hooks.patch remove-old-certificates.patch)
up2date="lynx -dump  http://packages.qa.debian.org/c/ca-certificates.html | grep version: | sed 's/\(.*\)version: \[\(.*\)\]\([:xdigit:]*\)/\3/'"
backup=('etc/ca-certificates.conf')
sha1sums=('7f197c1bf7c7fc82e9f8f2fec6d8cc65f6a6187b' \
          'b78762f50fd1cb31563c76cef72c1c3d3fa37878' \
          '43301995ef55bbc6e2c24aa312d5b116e1ab85c7')

build() {
	Fmkdir usr/share/ca-certificates
	Fmkdir usr/sbin
	Fbuild
	Fmkdir /etc
	echo "# Automatically generated by ${pkgname}-${pkgver}-${pkgrel}" > $Fdestdir/etc/ca-certificates.conf || Fdie
	echo "#" >> $Fdestdir/etc/ca-certificates.conf || Fdie
	find $Fdestdir/usr/share/$pkgname -name '*.crt' | sed "s|^$Fdestdir/usr/share/$pkgname/||" | sort -u >> $Fdestdir/etc/ca-certificates.conf
}
