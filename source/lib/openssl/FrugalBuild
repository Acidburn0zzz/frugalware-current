# Last Modified: Thu, 14 Apr 2005 15:17:07 +0200
# Compiling Time: ~6 minutes
# Contributor: VMiklos <mamajom@axelero.hu>
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>

pkgname=openssl
pkgver=0.9.7g
pkgrel=1
pkgdesc="The Open Source toolkit for Secure Sockets Layer and Transport Layer Security"
url="http://www.openssl.org/source/"
groups=('lib')
archs=('i686')
depends=('glibc')
up2date="lynx -source http://www.openssl.org/source/ |grep LATEST|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=($url$pkgname-$pkgver.tar.gz $pkgname-$pkgver-soname.diff)
md5sums=('991615f73338a571b6a1be7d74906934' '7ba249fa808b8945f2060826dec5c646')

build()
{
	Fpatchall
	# optimize the build
	sed -i "s/^\(\"linux-pentium\".*\) -O3 -fomit-frame-pointer -mcpu=pentium \(.*\)/\1 $CFLAGS \2/" Configure
	./config --prefix=/usr --openssldir=/etc/ssl shared
	
	Fmake || return 1
	
	make INSTALL_PREFIX=$Fdestdir MANDIR=/usr/man install
	Frm /usr/man/man{3,5,7}
	(cd $Fdestdir/usr/man/man1 && rename '' openssl_ *)
	Fmv /usr/man/man1/openssl_openssl.1 /usr/man/man1/openssl.1
}

# vim: ft=sh
