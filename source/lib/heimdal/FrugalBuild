# Last Modified: Sun, 12 Feb 2006 19:39:04 +0100
# Compiling Time: ~0.8 SBU
# Contributor: Laszlo Dvornik <dvornik@gnome.hu>
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>

pkgname=heimdal
pkgver=0.7.2
pkgrel=1
pkgdesc="Heimdal Kerberos V5 libraries"
url="http://www.pdc.kth.se/heimdal/"
groups=('lib')
archs=('i686' 'x86_64')
depends=('db' 'openssl' 'e2fsprogs' 'texinfo' 'termcap')
up2date="lynx -dump $url |grep current|sed 's/.*e \(.*\) and.*/\1/'"
source=(http://ftp.pdc.kth.se/pub/heimdal/src/$pkgname-$pkgver.tar.gz)
sha1sums=('a902e6ad7c31d940b588dc0235b348936f0d719d')
[ "$CARCH" == "x86_64" ] && Fconfopts="$Fconfopts --with-pic --with-gnu-ld"

build()
{
	Fbuild --enable-shared=yes --without-x
	rm $startdir/pkg/usr/include/fnmatch.h
	rm $startdir/pkg/usr/include/glob.h
	rm $startdir/pkg/usr/include/ss/ss.h
	rm $startdir/pkg/usr/lib/libss.*
	for i in ftp pagsh rcp rsh su telnet mk_cmds; do
		mv $startdir/pkg/usr/bin/$i $startdir/pkg/usr/bin/k$i
		mv $startdir/pkg/usr/man/man1/$i.1 $startdir/pkg/usr/man/man1/k$i.1
	done
	mv $startdir/pkg/usr/bin/login $startdir/usr/libexec
	rm $startdir/pkg/usr/man/man8/rshd.8
	rm $startdir/pkg/usr/man/man8/telnetd.8
	rm $startdir/pkg/usr/man/man1/login.1
	rm $startdir/pkg/usr/man/man5/ftpusers.5
	rm $startdir/pkg/usr/man/man5/login.access.5
	rm -rf $startdir/pkg/usr/man/cat*
	# backward compatibility
	Fln libgssapi.so.4 /usr/lib/libgssapi.so.1
}

# optimalization OK
