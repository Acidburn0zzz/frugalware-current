# Compiling Time: 0.74 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=mpfr
basever=3.0.0
patchver=08
if [ -n "$patchver" ]; then
	pkgver=${basever}_$patchver
else
	pkgver=${basever}
fi
pkgrel=2
pkgdesc="Library for multiple-precision floating-point computations."
url="http://www.mpfr.org/mpfr-current/"
depends=('gmp>=5.0.1')
groups=('lib' 'devel-core')
archs=('i686' 'x86_64' 'ppc')
up2date="echo \$(lynx -dump $url |grep version|sed 's/.*n \(.*\) (.*/\1/;q')_\$(lynx -source -dump $url |grep 'patch[0-9]\{2\}'|sed -n 's/.*patch\([0-9]\{2\}\).*/\1/;$ p')|sed 's/_$//'"
source=(http://www.mpfr.org/mpfr-current/mpfr-$basever.tar.bz2)
if [ -n "$patchver" ]; then
	for i in `seq -w $patchver`
	do
		source=(${source[@]} $url/patch$i)
	done
fi
sha1sums=('8ae8bc72ac26a0f17ad9f57c520264c056c64770' \
          '906e7a111ffcfb488307067e295af6a35a5a9d14' \
          '8d692a797f848b9b3e9b886f9e68285885fe00b0' \
          'f30cf103229b85137a5f3f368e174209ff4fa8e3' \
          'b41b1f26ddd0917c024c573d9612b2af1451299f' \
          '9ef3d433b82be498e9a34fb149d2d3682e83180f' \
          '9a53b5a646e2ccf6bf46a18641aff32062035c01' \
          'f34e0b4bc0b719e0a427cbef7c41e4853d7fe9da' \
          'ba47fc128717ee71b4a46a067ae4b29eed2c6b82')
options=('noversrc')
_F_cd_path=$pkgname-$basever
Fconfopts="$Fconfopts --enable-shared --enable-static"

build() {
	Fbuild
	## add a temporary tricky symlink to avoid breaking gcc
    Fln /usr/lib/libmpfr.so.4 /usr/lib/libmpfr.so.1
}
# optimization OK
