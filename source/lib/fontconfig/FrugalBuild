# Last modified: Sun, 04 Sep 2005 21:01:42 +0200
# Compiling time: 0.22 SBU
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>
# Contributed: VMiklos <vmiklos@frugalware.org>
# Modified by zleho <zleho@index.hu> and Laszlo Dvornik <dvornik@gnome.hu>

pkgname=fontconfig
pkgver=2.3.2
pkgrel=3
pkgdesc="A library for configuring and customizing font access"
url="http://fontconfig.org/"
depends=('expat' 'freetype2')
groups=('lib')
archs=('i686' 'x86_64')
remove=('usr/bin/fc-cache' 'usr/bin/fc-list' 'usr/lib/libfontconfig.a' \
	'usr/lib/libfontconfig.la' 'usr/lib/libfontconfig.so' \
	'usr/lib/libfontconfig.so.1' 'usr/lib/libfontconfig.so.1.0.4' \
	'usr/lib/pkgconfig/fontconfig.pc' \
	'usr/include/fontconfig/fcfreetype.h' \
	'usr/include/fontconfig/fcprivate.h' \
	'usr/include/fontconfig/fontconfig.h' \
	'usr/include/fontconfig')
up2date="lynx -dump 'http://fontconfig.org/release/?C=M;O=D'|grep tar.gz$|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=(http://fontconfig.org/release/fontconfig-$pkgver.tar.gz \
	00-$pkgname-2.3.2-better-defaults.patch \
	$pkgname.install)
sha1sums=('8ec60da668618383b539db9d70b8e320bd7dd031' \
	'322764115c4f447d78b5622c144448aa82b6b251' \
	'2b439c00a766c541e93d55eeeee1a8f44c94f60f')

build() {
	Fpatchall
	sed -i -e "s:\(<dir>~/.fonts</dir>\):\1 <dir>/opt/kde/share/fonts</dir> <dir>/usr/share/ghostscript/fonts</dir>:" fonts.conf.in
	Fmake --sysconfdir=/etc
	Fmakeinstall
	Fln /usr/lib/libfontconfig.la /usr/X11R6/lib/libfontconfig.la
	Fmv /etc/fonts/conf.d/yes-bitmaps.conf \
		/etc/fonts/conf.d/00-yes-bitmaps.conf
}

# vim: ft=sh

# optimalization OK
