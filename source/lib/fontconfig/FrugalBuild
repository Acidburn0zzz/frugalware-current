# Last modified: Sun, 31 Jul 2005 18:22:22 +0200
# Compiling time: ~0.08 SBU
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>
# Contributed: VMiklos <vmiklos@frugalware.org>
# Modified by zleho <zleho@index.hu> and Laszlo Dvornik <dvornik@gnome.hu>

pkgname=fontconfig
pkgver=2.3.2
pkgrel=1
pkgdesc="A library for configuring and customizing font access"
url="http://fontconfig.org/"
depends=('expat' 'freetype2')
groups=('lib')
archs=('i686' 'x86_64')
remove=('usr/bin/fc-cache' 'usr/bin/fc-list' 'usr/lib/libfontconfig.a' \
	'usr/lib/libfontconfig.la' 'usr/lib/libfontconfig.so' \
	'usr/lib/libfontconfig.so.1' 'usr/lib/libfontconfig.so.1.0.4' \
	'usr/lib/pkgconfig/fontconfig.pc' \
	'usr/include/fontconfig/fcfreetype.h' \
	'usr/include/fontconfig/fcprivate.h' \
	'usr/include/fontconfig/fontconfig.h' \
	'usr/include/fontconfig')
install=$pkgname.install
up2date="lynx -dump 'http://fontconfig.org/release/?C=M;O=D'|grep tar.gz$|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=(http://fontconfig.org/release/fontconfig-$pkgver.tar.gz \
	00-$pkgname-2.3.2-better-defaults.patch \
	$pkgname.install)
md5sums=('7354f9f125ea78a8f2851cb9c31d4866' \
	'e0be172ba8d78b923df2c84cf92f7d46' \
	'4e1d445b07a9a92ba4eb615815c123a5')

build() {
	Fpatchall
	sed -i -e "s:\(<dir>~/.fonts</dir>\):\1 <dir>/opt/kde/share/fonts</dir> <dir>/usr/share/ghostscript/fonts</dir>:" fonts.conf.in
	Fmake --sysconfdir=/etc
	Fmakeinstall
	Fln /usr/lib/libfontconfig.la /usr/X11R6/lib/libfontconfig.la
}

# vim: ft=sh

# optimalization OK
