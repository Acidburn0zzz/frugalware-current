# Compiling Time: 0.13 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=libtirpc
pkgver=1.0.1
pkgrel=1
pkgdesc="A port of Suns Transport-Independent RPC library to Linux."
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge
depends=('libgssglue>=0.4')
makedepends=('krb5') ## <-- header files
rodepends=('libkrb5')
backup=('etc/netconfig')
groups=('lib')
archs=('i686' 'x86_64' 'arm')
sha1sums=('8da1636f98b5909c0d587e7534bc1e91f5c1a970')

## /usr/lib/libtirpc.so: undefined reference to `__rpc_get_default_domain'
## see http://sourceforge.net/p/libtirpc/mailman/message/34220107/

build()
{
	Fcd
	Fpatchall
	Fautoreconf

	Fmake --enable-gssapi
	Fmakeinstall

	Ffilerel doc/netconfig /etc/netconfig
	# test that it's possible to link to this lib
	cat > test.c << EOF
#include <stdio.h>
int main(){printf("hello\n");}
EOF
	gcc -o test test.c -ltirpc -L$Fdestdir/usr/lib
}

# optimization OK
