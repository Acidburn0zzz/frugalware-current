# Last Modified: Sat, 16 Apr 2005 10:54:57 +0200
# Compiling Time: ~1 minute
# Maintainer: Marcus Habermehl [BMH1980] <bmh1980de@yahoo.de>

pkgname=libdvb
pkgver=0.5.5.1
pkgrel=1
pkgdesc="LIBDVB - DVB library for SI parsing, OSD, tuning, ..."
url="http://www.metzlerbros.org/dvb/"
depends=('gcc' 'glibc')
up2date="lynx -dump $url | grep $pkgname | grep $url | tr \"-\" \" \" | cut -d \" \" -f 6 | sed 's|.tar.gz||'"
source=($url/$pkgname-$pkgver.tar.gz)
md5sums=('47612d2f8a4d4dee746a166d8b7f6f77')
license="GPL"
groups=(lib)
archs=('i686')

build() {
    cd $startdir/src/$pkgname-$pkgver

    sed -i 's|^PREFIX = /usr/local|PREFIX = /usr|' config.mk

    sed -i 's|dvb_show_image|show_dvb_image|' dvb-mpegtools/Makefile
    
    make

    make PREFIX=$startdir/pkg/usr install

    cd $startdir/pkg/usr/bin || exit 1

    for i in analyze change_aspect_1_1 change_aspect_16_9 change_aspect_221_1 \
	change_aspect_4_3 cut_mpg es_demux extract_pes extract_pes_payload \
	get_http insert_pat_pmt pes2aud pes2aud_es pes2ts pes2ts2 pes2vid \
	pes2vid_es pes_demux pesplot pes_repack ps2vid split_mpg streamtype \
	ts2es ts2pes ts2ps ts_demux ts_es_demux tspids; do
	ln -svf dvb-mpegtools_main $i
    done
}

# vim: ft=sh
