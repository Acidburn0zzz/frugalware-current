# Last Modified: Sat, 01 Oct 2005 19:39:22 +0200
# Compiling Time: 2.38 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=libstdc++
pkgver=4.0.2
pkgrel=1
pkgdesc="The GNU Standard C++ Library"
url="http://gcc.gnu.org"
depends=('gcc-lib')
conflicts=('gcc<=4.0.0')
groups=('lib' 'chroot-core')
archs=('i686' 'x86_64')
up2date="lynx -dump $url |grep Current|sed 's/.*C \(.*\) (.*/\1/'"
source=(ftp://gcc.gnu.org/pub/gcc/releases/gcc-$pkgver/gcc-$pkgver.tar.bz2 \
	gcc-3.4.3-no_multilib_amd64.patch0)
# ftp://gcc.gnu.org/pub/gcc/releases/gcc-$pkgver/md5.sum
sha1sums=('f1b714c6398393d8f7f4ad5be933b462a95b075d' \
	  '883ae944eb9aeca85d9adc54b3e16eab8f4a51c3')
[ "$CARCH" == "x86_64" ] && Fconfopts="$Fconfopts --libdir=/usr/lib --disable-multilib"

build()
{
	Fcd gcc-$pkgver
	[ "$CARCH" == "x86_64" ] && Fpatch gcc-3.4.3-no_multilib_amd64.patch0
	mkdir ../$pkgname-build
	cd ../$pkgname-build
	../gcc-$pkgver/configure $Fconfopts --enable-shared \
		--enable-languages=c++ --enable-threads=posix \
		--enable-__cxa_atexit
	
	make all-target-libstdc++-v3 BOOT_CFLAGS="$CFLAGS" || return 1
	
	make DESTDIR=$Fdestdir install-target-libstdc++-v3
	Frm /usr/include
}

# optimalization ok

# vim: ft=sh
