# Compiling time: 2.27 SBU
# Maintainer: crazy <crazy@frugalware.org>
# Contributor: Janny <janny@frugalware.org>

pkgname=fftw
pkgver=3.1.2
pkgrel=2
pkgdesc="C subroutine library for computing the Discrete Fourier Transform (DFT)"
url="http://www.fftw.org/"
license="GPL-2"
depends=('glibc')
archs=('i686' 'x86_64')
groups=('lib')
up2date="lynx -dump http://www.fftw.org/download.html|grep -v alpha|grep -m1 'fftw-3.\(.*\).tar.gz$'|sed 's/.*-\(.*\).t.*/\1/'"
source=(http://www.fftw.org/$pkgname-$pkgver.tar.gz)
sha1sums=('3e4c64009ffb48123a0f30f46c1d89da7810dc67')

build()
{
        ## idea from gentoo
        cd $Fsrcdir
        mv $pkgname-$pkgver $pkgname-$pkgver-single
        cp -pPR $pkgname-$pkgver-single $pkgname-$pkgver-double
        cp -pPR $pkgname-$pkgver-single $pkgname-$pkgver-longdouble
        ## single
        cd $pkgname-$pkgver-single
        Fbuild --enable-shared --enable-threads --enable-float
        cd ../$pkgname-$pkgver-double
        Fbuild --enable-shared --enable-threads
        cd ../$pkgname-$pkgver-longdouble
        Fbuild --enable-shared --enable-threads --enable-long-double
        Fln fftw3.h /usr/include/fftw.h
        Fln fftw3.f /usr/include/fftw.f
}

# optimization OK
