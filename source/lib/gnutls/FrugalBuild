# Last Modified: Mon, 06 Mar 2006 14:14:16 +0100
# Compiling Time: 1.04 SBU
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>
# Contributor: VMiklos <vmiklos@frugalware.org>

pkgname=gnutls
pkgver=1.3.4
pkgrel=2
pkgdesc="A library which provides a secure layer over a reliable transport layer"
url="http://www.gnu.org/software/gnutls/"
groups=('lib')
archs=('i686' 'x86_64')
depends=('libtasn1>=0.3.0' 'opencdk' 'libgcrypt>=1.2.0' 'lzo' 'readline')
makedepends=('gtk-doc>=1.4')
# accidently bumped to 1.3.x, then use this tree till 1.4.x
# remove "devel/" from up2date & source() when returning to -stable
up2date="lynx -dump ftp://ftp.gnutls.org/pub/gnutls/devel |grep tar.bz2$|sed -n 's/.*-\(.*\)\.t.*/\1/;$ p'"
source=(ftp://ftp.gnutls.org/pub/$pkgname/devel/$pkgname-$pkgver.tar.bz2 \
	http://frugalware.org/~krix/CVS/01-bump-internal-tasn-version.patch \
	02-fix-xmlc-for-newertasn.patch)
sha1sums=('f412262ab6299f6e4603c3f524551ae0357ff983' \
	  'a0247abd9b5904f862b6d659e91f1ca95fea36f2' \
	  '466c9bb74e6ce98fb9d400c719f6f3b79ce7460f')

build () {
	Fcd
	Fpatchall
	autoreconf --force --install || Fdie
	# Just a workaround and need to use internal tasn lib
	Fmake --enable-gtk-doc --with-included-libtasn1
	Fmakeinstall
}

# optimalization OK
