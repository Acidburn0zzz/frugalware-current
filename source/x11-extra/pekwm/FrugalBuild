# Compiling Time: 0.35 SBU
# Maintainer: James Buren <ryuo@frugalware.org>
# Contributor: DNAku <DNAku@frugalware.org>

pkgname=pekwm
pkgver=0.1.11
docver=0.1.10
pkgrel=1
pkgdesc="A lightweight window manager, originally based off aewm++."
url="http://pekwm.org/projects/pekwm"
depends=('libsm' 'libxinerama' 'libxrandr' 'libxft' 'libxpm' 'libjpeg' 'libpng' 'libstdc++')
rodepends=('xprop')
groups=('x11-extra')
archs=('i686' 'x86_64')
up2date="Flasttar $url/releases"
_themes_url="http://ftp.frugalware.org/pub/other/artwork/$pkgname-themes"
source=(http://www.pekwm.org/projects/3/files/$pkgname-$pkgver.tar.bz2 \
	http://www.pekwm.org/files/pekwm/doc/$docver/arc/pekwm-doc.tar.bz2 \
	${_themes_url}/BeFrugal-0.1.tar.gz $pkgname.desktop $pkgname-session \
	xinitrc.$pkgname)
sha1sums=('28cfa30cfc046440f6e5924214959f8647bc0a9d' \
          'b100edfe489c7fa64a817deb4c078893d95db418' \
          '2fc6a50c7055097ac7171c6ba14c346e458bdfce' \
          '2ae1c2462271de97a8a49a142d628ba554e00f40' \
          '75b1c92ef3edd8c547a594725cf4dcf31ebcf32c' \
          'bec93feb202820cd19455c92fb5bb9fa92b88a51')

build()
{
	Fbuild --enable-shape --enable-xinerama --enable-xrandr --enable-xft \
	       --enable-image-xpm --enable-image-png --enable-image-jpeg \
	       --disable-debug --enable-menus --enable-harbour
	# process html docs for users
	Fmkdir /usr/share/doc/$pkgname-$pkgver/html
	Fcp $pkgname-doc /usr/share/doc/$pkgname-$pkgver
	Fmv /usr/share/doc/$pkgname-$pkgver/$pkgname-doc/* /usr/share/doc/$pkgname-$pkgver
	Frm /usr/share/doc/$pkgname-$pkgver/$pkgname-doc
	Ffile /etc/X11/sessions/$pkgname.desktop
	Fexe /etc/X11/xinit/xinitrc.$pkgname
	Fexe /usr/bin/$pkgname-session
	# include a default theme for frugalware
	Fmkdir /usr/share/$pkgname/themes/BeFrugal
	Ffile BeFrugal/* /usr/share/$pkgname/themes/BeFrugal
	# change default theme to frugalware
	sed -i "s|/default|/BeFrugal|" "${Fdestdir}/etc/$pkgname/config" || Fdie
}

# optimization OK
