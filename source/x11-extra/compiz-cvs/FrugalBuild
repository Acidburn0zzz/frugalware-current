# Compiling Time: 0.43 SBU
# Maintainer: AlexExtreme <alex@alex-smith.me.uk>

pkgname=compiz-cvs
pkgver=20061001
pkgrel=2
pkgdesc="Composite and window manager for Xgl"
url="http://en.opensuse.org/Compiz"
groups=('x11-extra')
backup=('etc/sysconfig/compiz')
archs=('x86_64' 'i686')
depends=('glitz>=0.5.5_cvs' 'libsvg-cairo' 'libxevie' 'libxdamage' 'libpng' \
	'libxrandr' 'gconf' 'startup-notification' 'libwnck' 'control-center' 'libxcomposite' 'mesa')
makedepends=('util-macros' 'intltool')
up2date=$pkgver
srcurl="http://ftp.frugalware.org/pub/other/sources/compiz"
source=($srcurl/compiz-$pkgver.tar.bz2 \
	frugalware.png compiz-sysconfig compiz-gnome compiz-decoration.patch compiz-fix-makefile.patch)
signatures=($srcurl/compiz-$pkgver.tar.bz2.asc '' '' '' '' '')
_F_gnome_schemas=('/etc/gconf/schemas/compiz.schemas')
Finclude gnome-scriptlet

build()
{
	Fcd compiz-$pkgver
	Fpatchall
	Fsed '$srcdir/configure' '#./configure' autogen.sh
	Fsed 'freedesktop.png' 'frugalware.png' plugins/compiz.schemas.in
	./autogen.sh || Fdie
	Fmake --enable-libsvg-cairo --enable-gnome --enable-gconf-dump
	Fmakeinstall
	Finstall 0644 frugalware.png usr/share/compiz/frugalware.png
	Fexe compiz-gnome usr/bin
	Fmkdir /etc/sysconfig
	Finstall 644 compiz-sysconfig /etc/sysconfig/compiz
	Fbuild_gnome_scriptlet
}

# optimization OK
