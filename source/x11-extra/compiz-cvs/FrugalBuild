# Last Modified: Sun, 01 Oct 2006 19:23:24 +0100
# Compiling Time: 0.43 SBU
# Maintainer: AlexExtreme <alex@alex-smith.me.uk>

pkgname=compiz-cvs
pkgver=20061001
pkgrel=1
pkgdesc="Composite and window manager for Xgl"
url="http://en.opensuse.org/Compiz"
groups=('x11-extra')
backup=('etc/sysconfig/compiz')
archs=('x86_64' 'i686')
depends=('glitz>=0.5.5_cvs' 'libsvg-cairo' 'libxevie' 'libxdamage' 'libpng' \
	'libxrandr' 'gconf' 'startup-notification' 'libwnck' 'control-center' 'libxcomposite' 'mesa')
makedepends=('util-macros' 'intltool')
up2date=$pkgver
srcurl="http://ftp.frugalware.org/pub/other/sources/compiz"
sha1=`lynx -dump $srcurl/compiz-$pkgver.tar.bz2.sha1sum | sed 's/ .*//g'`
source=($srcurl/compiz-$pkgver.tar.bz2 \
	frugalware.png compiz-sysconfig compiz-gnome compiz-decoration.patch compiz-fix-makefile.patch)
sha1sums=($sha1 \
	  '7bed0f04aa9cf686130146185d2b6ab7c572b3ab' \
	  'b6409be9a4444cc6e38aadaf6779199cc3ebd32c' \
	  '3011e72b973d4edda4d96aec74bbe62e15257f30' \
	  'f9def6af342ee1d726866c13ec7c4018aa3d0cad' \
	  '7f352a845d0f3df6d0715bf40104261113ac63c1')
_F_gnome_schemas=('/etc/gconf/schemas/compiz.schemas')
Finclude gnome-scriptlet

build()
{
	Fcd compiz-$pkgver
	Fpatchall
	Fsed '$srcdir/configure' '#./configure' autogen.sh
	Fsed 'freedesktop.png' 'frugalware.png' plugins/compiz.schemas.in
	./autogen.sh || Fdie
	Fmake --enable-libsvg-cairo --enable-gnome --enable-gconf-dump
	Fmakeinstall
	Finstall 0644 frugalware.png usr/share/compiz/frugalware.png
	Fexe compiz-gnome usr/bin
	Fmkdir /etc/sysconfig
	Finstall 644 compiz-sysconfig /etc/sysconfig/compiz
	Fbuild_gnome_scriptlet
}

# optimization OK
