# Compiling Time: 0 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=qtcurve
pkgver=1.8.19
pkgrel=1
pkgdesc="QtCurve Theme libs"
url="https://projects.kde.org/projects/playground/base/qtcurve"
groups=('kde')
archs=('i686' 'x86_64')
_F_cmake_confopts="-DQTC_QT4_ENABLE_KWIN=true -DQTC_QT5_ENABLE_KDE=false -DQTC_QT4_STYLE_SUPPORT=on"
Finclude cmake
depends=('glibc')
makedepends=('libqtcore' 'kdelibs-compiletime' 'automoc4' 'gtk+2' 'gtk+2-libs' 'x11-protos' 'kdebase-workspace' \
	     'kdebase-workspace-compiletime')
options=('scriptlet')
source=(http://ftp.frugalware.org/pub/other/sources/$pkgname/$pkgname-$pkgver.tar.xz fix_missing_includes.patch)
up2date=$pkgver
sha1sums=('48d5be298ae995caf79775f6376df119efa1d590' \
          '434aa89526addd2ce78b9f70dd255c85fb1728df')

replaces=('qtcurve-qt4')
provides=('qtcurve-qt4')
conflicts=('qtcurve-qt4')

subpkgs=("${subpkgs[@]}" "kde-theme-qtcurve")
subdescs=("${subdescs[@]}" 'KDE QtCurve Theme')
subdepends=("${subdepends[@]}" "kdelibs kwin")
subrodepends=("${subrodepends[@]}" "qtcurve=$pkgver")
subgroups=("${subgroups[@]}" 'kde')
subarchs=("${subarchs[@]}" 'i686 x86_64')

subpkgs=("${subpkgs[@]}" "qtcurve-gtk2")
subdescs=("${subdescs[@]}" 'QtCurve-Gtk2')
subdepends=("${subdepends[@]}" "gtk+2")
subrodepends=("${subrodepends[@]}" "qtcurve=$pkgver")
subgroups=("${subgroups[@]}" 'xlib-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64')

subpkgs=("${subpkgs[@]}" "qtcurve-qt5")
subdescs=("${subdescs[@]}" 'QtCurve Qt5 Theme')
subdepends=("${subdepends[@]}" 'qt5-imageformats qt5-svg')
subrodepends=("${subrodepends[@]}" "qtcurve=$pkgver")
subgroups=("${subgroups[@]}" 'xlib-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64')

build() {
	CMake_build

	# KDE
	Fsplit kde-theme-qtcurve /usr/lib/kde4
	Fsplit kde-theme-qtcurve /usr/share/apps/kstyle
	Fsplit kde-theme-qtcurve /usr/share/apps/kwin

	# GTK2
	Fsplit qtcurve-gtk2 /usr/share/themes/QtCurve/gtk-2.0
	Fsplit qtcurve-gtk2 /usr/lib/gtk-2.0
	Fsplit qtcurve-gtk2 /usr/share/themes/QtCurve/mozilla

	# Qt5
	Fsplit qtcurve-qt5 /usr/lib/qt5
}


# optimization OK
