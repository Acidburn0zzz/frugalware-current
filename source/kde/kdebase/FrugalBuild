# Last modified: Fri, 05 Aug 2005 21:05:31 +0200
# Compiling time: ~13.75 SBU
# Contributor: VMiklos <vmiklos@frugalware.org>
# Maintainer: Tamas Kapolnasi <ktamas@tdc.hu>
# Modified by Janny <janny@vnet.hu> and Laszlo Dvornik <dvornik@gnome.hu>

pkgname=kdebase
pkgver=3.4.2
pkgrel=3
pkgdesc="KDE Base Programs"
pkgurl="ftp://ftp.kde.org/pub/kde/stable/3.4.2/src"
url="http://www.kde.org/"
depends=('kdelibs=3.4.2' 'libraw1394' 'lmsensors')
makedepends=('samba' 'libusb' 'hal' 'j2re' 'cyrus-sasl' 'hal>=0.5.0')
backup=(usr/share/config/{kdm/kdmrc,kdeglobals,kickerrc,klauncrc,klipperrc,konsolerc,korgarc})
groups=('kde' 'kde-core')
archs=('i686' 'x86_64')
up2date="lynx -dump http://www.kde.org/download/|grep kdebase|sed -n '1 p'|tr -s ' '|cut -d ' ' -f 2|cut -d - -f 2"
source=($pkgurl/$pkgname-$pkgver.tar.bz2 \
	00-kdebase-3.4.1-hal05.patch \
	01-kdebase-3.4.2-ivman.patch \
	02-kdebase-3.4.2-fonts.patch \
	frugalware.png \
	kde.desktop \
	xinitrc.kde)
sha1sums=('6df0c7c576a112a4e32f9e2e2b0d271dcb201f71' \
          'b3ceb03a05d8c3ae9db894e2ef65f37d1b7ade30' \
          '63f1cf1d6b68d329d4b8b3cc19b44f86f2b47a68' \
          '19f77ee80f5f6c88ac96c6e447e2b2848b99f2f1' \
          '62fdfe9e07b2b55be660bd107bb6e1c742d90a3e' \
          'e1f706c984fc81633663c662e674b6f2c64d2f83' \
          'ed41253045ff5d9dc15482381e3eea0111041b4b')

build()
{
	Fbuild --disable-dependency-tracking

	# xinitrc for KDE.
	Fexe /etc/X11/xinit/xinitrc.kde

	# KDM logo.
	Ffile /usr/share/apps/kdm/pics/frugalware.png

	# Konsole configuration.
	Fsed 'Exec=$' 'Exec=bash -ls' \
		$Fdestdir/usr/share/apps/konsole/shell.desktop

	# Config files.
	Ffilerel $startdir/config/* /usr/share/config/
	Fmv usr/share/config/kdmrc usr/share/config/kdm/kdmrc

	# Session file.
	Ffile /etc/X11/sessions/kde.desktop

	# backgroundrc configuration.
	Fsed 'Wallpaper=default_blue.jpg' 'Wallpaper=blue-bend.jpg' \
		$Fdestdir/usr/share/config/kdm/backgroundrc
}

# optimalization OK

# vim: ft=sh
