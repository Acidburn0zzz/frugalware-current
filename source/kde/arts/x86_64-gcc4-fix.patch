diff -Naur arts-1.4.2.orig/admin/acinclude.m4.in arts-1.4.2/admin/acinclude.m4.in
--- arts-1.4.2.orig/admin/acinclude.m4.in	2005-08-01 20:00:01.000000000 +0200
+++ arts-1.4.2/admin/acinclude.m4.in	2005-08-01 20:02:32.000000000 +0200
@@ -3057,8 +3057,6 @@
 
   AC_PROG_CXX
 
-  KDE_CHECK_FOR_BAD_COMPILER
-
   if test "$GXX" = "yes" || test "$CXX" = "KCC"; then
     if test "$kde_use_debug_code" != "no"; then
       if test "$CXX" = "KCC"; then
@@ -3287,40 +3285,7 @@
   AC_BEFORE([AC_PATH_QT_1_3], [KDE_ENABLE_HIDDEN_VISIBILITY])
 
   if test "x$GXX" = "xyes"; then
-    kde_have_gcc_visibility=no
-    KDE_CHECK_COMPILER_FLAG(fvisibility=hidden, 
-    [
-      kde_have_gcc_visibility=yes
-      AC_CACHE_CHECK([if Qt is patched for -fvisibility], kde_cv_val_qt_gcc_visibility_patched,
-        [
-          AC_LANG_SAVE
-          AC_LANG_CPLUSPLUS
-
-          safe_CXXFLAGS=$CXXFLAGS
-          CXXFLAGS="$CXXFLAGS $all_includes"
-
-          AC_TRY_COMPILE(
-          [
-#include <qglobal.h>
-#if Q_EXPORT - 0 != 0
-/* if this compiles, then Q_EXPORT is undefined */
-/* if Q_EXPORT is nonempty, this will break compilation */
-#endif
-          ], [/* elvis is alive */],
-          kde_cv_val_qt_gcc_visibility_patched=no, kde_cv_val_qt_gcc_visibility_patched=yes)
-
-          CXXFLAGS=$safe_CXXFLAGS
-          AC_LANG_RESTORE
-        ]
-      )
-
-      if test x$kde_cv_val_qt_gcc_visibility_patched = "xyes"; then
-        CXXFLAGS="$CXXFLAGS -fvisibility=hidden"
-        KDE_CHECK_VISIBILITY_GCC_BUG
-        HAVE_GCC_VISIBILITY=1
         AC_DEFINE_UNQUOTED(__KDE_HAVE_GCC_VISIBILITY, "$HAVE_GCC_VISIBILITY", [define to 1 if -fvisibility is supported])
-      fi
-    ])
   fi
 ])
 
diff -Naur arts-1.4.2.orig/admin/ltmain.sh arts-1.4.2/admin/ltmain.sh
--- arts-1.4.2.orig/admin/ltmain.sh	2005-08-01 20:00:01.000000000 +0200
+++ arts-1.4.2/admin/ltmain.sh	2005-08-01 20:04:34.000000000 +0200
@@ -5217,6 +5217,14 @@
 	  case $host,$output,$installed,$module,$dlname in
 	    *cygwin*,*lai,yes,no,*.dll | *mingw*,*lai,yes,no,*.dll) tdlname=../bin/$dlname ;;
 	  esac
+	  newdeplib=""
+	  for j in $dependency_libs ; do
+	    if echo $j | grep "gcc-lib" >& /dev/null ; then
+	      continue
+	    fi
+	    newdeplib="$newdeplib $j"
+	  done
+	  dependecy_libs="$newdeplib"
 	  $echo > $output "\
 # $outputname - a libtool library file
 # Generated by $PROGRAM - GNU $PACKAGE $VERSION$TIMESTAMP
