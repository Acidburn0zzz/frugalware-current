# Compiling Time: 0.19 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=redeclipse
pkgver=1.5.3
pkgrel=1
pkgdesc="A single-player and multi-player first-person ego-shooter, built as a total conversion of Cube Engine 2"
depends=('sdlimage' 'libgl' 'sdl_mixer' 'libglu')
makedepends=('mesa' 'ca-certificates')
rodepends=("$pkgname-data")
groups=('games-extra')
archs=('i686' 'x86_64')
_F_github_author=red-eclipse
_F_github_name=base
_F_github_tag=y
_F_github_tag_v=y
Finclude github
sha1sums=('64bf76e495bf50154c3615c67375e58e139e71c0')
options=('nobuild')

_F_desktop_name="Redeclipse"
_F_desktop_desc="Single- and multiplayer FPS"
_F_desktop_icon="redeclipse"
_F_desktop_categories="Game;ActionGame"

build() {
	Fcd base-$pkgver/src
	Fmake
	cd .. || Fdie
	Fmkdir usr/{share/$pkgname,}/bin
	Fsed "RE_DATA=." "RE_DATA=/usr/share/$pkgname" $pkgname.sh
	Finstallrel 755 src/redeclipse_*linux usr/share/$pkgname/bin/

	cp -rf  data/ "$Fdestdir/usr/share/$pkgname" || Fdie
	Fwrapper 'cd /usr/share/redeclipse && exec bin/reclient -r "\$@"' $pkgname
	Finstallrel 644 src/redeclipse.ico  usr/share/pixmaps/$pkgname.png
	Fdesktop2
}

# optimization OK
