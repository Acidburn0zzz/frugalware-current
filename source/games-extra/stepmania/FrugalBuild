# Compiling Time: 0.66 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=stepmania
pkgver=5.0.10
pkgrel=4
pkgdesc="A free dance and rhythm game (was previously sm-ssc)"
url="http://www.stepmania.com/"
license="MIT"
archs=('i686' 'x86_64')
groups=('games-extra')
makedepends=('yasm' 'x11-protos' 'glew')
depends=('libmad>=0.15.1b-8' 'ffmpeg>=2.8.6' 'libglu>=9.0.0-2' 'libxrandr>=1.5.0-4')

sha1sums=('32778911974025b94ad59d7767d2242f4a62bd5a' \
          'a6fe0eeeae04827a4f55f35754868d3b68b8d712' \
          'd13ff221a4c66cf742e4eab3d075f2859ef8949b' \
          'b3645fa28c4c8d3e7dc811c9cf3397963e2b443a')
Fprefix="/usr/share"
_F_github_tag=yes
_F_github_tag_v=yes
_F_cmake_confopts="	-DWITH_SYSTEM_FFMPEG=true \
			-DCMAKE_INSTALL_PREFIX=/usr/share"
Finclude github cmake
source=(${source} \
	stepmania.sh \
	fix_build.patch \
	jpeg9.patch )

build(){
	CMake_build

	Finstall 755 stepmania.sh "usr/bin/stepmania"

	Fdirschown usr/share/stepmania-5.0 root games
	Ffileschown usr/share/stepmania-5.0 root games
	Fdirschmod usr/share/stepmania-5.0/Songs 2775
	Fdirschmod usr/share/stepmania-5.0/Themes 2775
	Fdirschmod usr/share/stepmania-5.0/NoteSkins 2775
	Fdirschmod usr/share/stepmania-5.0/Data 2775
}

# optimization OK
