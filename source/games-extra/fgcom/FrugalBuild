# Compiling Time: 0.08 SBU
# Maintainer: Anthony Jorion <pingax@frugalware.org>
# Contributor: Devil505 <devil505linux@gmail.com>


pkgname=fgcom
pkgver=263
pkgrel=3
pkgdesc="Realtime voice communications for FlightGear"
url="http://sourceforge.net/projects/fgcom/"
depends=('openal' 'zlib' 'alsa-lib')
makedepends=('x11-protos' 'simgear>=3.4.0-2' 'plib' 'boost>=1.60.0' 'openscenegraph>=3.4.0')
groups=('games-extra')
archs=('i686' 'x86_64')
options=('force')
_F_scm_type="subversion"
_F_scm_url="http://svn.code.sf.net/p/fgcom/code/trunk"
Finclude scm
options+=('static')

build() {
	_F_make_opts="-j1"
	Funpack_scm
	chmod a+rw "src" -R
	cd src || Fdie
	sed -i 's@usr/local@usr@' Makefile
	sed -i 's@INSTALL_BIN := /usr/bin@INSTALL_BIN:=$(DESTDIR)/usr/bin@' Makefile
	sed -i 's@INSTALL_DIR := /usr/fgcom@INSTALL_DIR:=$(DESTDIR)/usr/lib/fgcom@' Makefile
	Fmake
	Fmkdir usr/lib/$pkgname
	Fmkdir usr/bin
	make DESTDIR="$Fdestdir" install || Fdie
}
