# Compiling Time: 0.12 SBU
# Maintainer: gholafox <j3d1f0x@free.fr>
# Contributor: Devil505 <devil505linux@gmail.com>

pkgname=egoboo
pkgver=2.7.3
pkgrel=1
pkgdesc="Egoboo is a working cool 3D dungeon crawling game in the spirit of nethack"
_F_sourceforge_realname="Linux\/Macintosh Distro"
Finclude sourceforge
depends=('sdl_mixer' 'sdl_ttf' 'sdlimage')
groups=('games-extra')
archs=('i686' 'x86_64')
source=($source patch.diff)
sha1sums=('163cca1dbd70516450bf4e7af3c7f58059926ac3' \
          'e61eb46b72cab65aaaf6eeda31f11b64f818b7c3')
build()
{
	#building executable:
	Fcd
	Fpatchall
	Fsed '\${HOME}/.local' '\${DESTDIR}/usr' source/Makefile
	Fsed '\${HOME}/.local' '\${DESTDIR}/usr' source/game/Makefile.unix
	Fsed '\${HOME}/.local'           '/usr' source/game/egoboo.sh
	Fsed "-Os"	"${CFLAGS}"	source/{Makefile,/game/Makefile.unix}
	cd source || Fdie
	cp -f game/Makefile.unix game/Makefile
	Fmake
	Fmakeinstall
	cd ..

	#install data:
	Fmkdir usr/share/egoboo
	mv doc/Egoboo\ Manual.pdf doc/Manual.pdf || Fdie
	Fdocrel doc/{classes.txt,Egoboodoc.txt,Manual.pdf} License.pdf Changelog.txt Readme.txt
	Ffilerel {controls.txt,setup.txt,*.ico} /usr/share/egoboo
	cp -R {basicdat,modules,players} $Fdestdir/usr/share/egoboo || Fdie
}

# optimization OK
