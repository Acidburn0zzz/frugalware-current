# Compiling Time: 0.12 SBU
# Maintainer: gholafox <gholafox@free.fr>
# Contributor: Devil505 <devil505linux@gmail.com>

pkgname=egoboo
pkgver=2.7.5
pkgrel=1
pkgdesc="Egoboo is a working cool 3D dungeon crawling game in the spirit of nethack"
_F_sourceforge_realname="Linux_Source_Distro"
Finclude sourceforge
depends=('sdl_mixer' 'sdl_ttf' 'sdlimage')
groups=('games-extra')
archs=('i686' 'x86_64')
source=($source/${pkgname}-$pkgver.tar.gz \
	$source/${pkgname}-data-$pkgver.tar.gz)
sha1sums=('a5fff22f6c5af806057a84cf52977ede35a59b65' \
          'd2c8c5f32caa67539b01215251e4f119292cc7af')
_F_cd_path="${pkgname}-${pkgver}/game"

_F_desktop_name="Egoboo"

build()
{
	#build & install executable:
	Fcd
	Fpatchall
	#Fsed '\${HOME}/.local' '\${DESTDIR}/usr' source/game/Makefile.unix
	#Fsed '\${HOME}/.local'           '/usr' source/game/egoboo.sh
	Fsed '/usr' '\${DESTDIR}/usr' Makefile.unix
	Fsed "-Os"	"${CFLAGS}"	Makefile.unix
	cp -f Makefile.unix Makefile
	Fmake
	Fmakeinstall
	cd ../../${pkgname}-data-${pkgver}
	
	#install datas:
	Fmkdir usr/share/egoboo
	mv Egoboo\ ${pkgver}\ Manual.pdf Manual.pdf || Fdie
	Fdocrel {Manual.pdf,License.pdf,Changelog.txt,Readme.txt}
	Ffilerel {controls.txt,setup.txt} /usr/share/egoboo
	cp -R {basicdat,modules,players} $Fdestdir/usr/share/egoboo || Fdie

	Fdesktop2
}

# optimization OK
