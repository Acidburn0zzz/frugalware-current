# Compiling Time: 0.18 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>
# Contributor: devil505 <devil505linux@gmail.com>

pkgname=performous
pkgver=0.3.0
pkgrel=2
url="http://performous.org/"
pkgdesc="Performous : The free Linux karaoke game"
rodepends=('ultrastar-songs')
depends=('fftw' 'smpeg' 'librsvg' 'xine-lib' 'sdl_gfx>=2.0.19' 'libsigc++2' \
	'sdlimage' 'libgcc' 'sdl' 'gstreamer' 'alsa-lib' 'libboost-mt' 'glibmm' \
	'libxml++' 'jack')
makedepends=('boost' 'cmake')
groups=('games-extra')
conflicts=('ultrastar-ng')
replaces=('ultrastar-ng')
archs=('i686' 'x86_64')
up2date="lynx -dump $url/install.html | grep -m1 Source.tar.bz2 | sed 's/.*s-\(.*\)-S.*/\1/'"
source=($url/packages/Performous-$pkgver-Source.tar.bz2 $pkgname-$pkgver-buildfix.patch \
	$pkgname-$pkgver-songs.diff gcc43.diff)
_F_cd_path="Performous-$pkgver-Source"
sha1sums=('0fb0bfbabfedf4197e7c8e36ba4fa67518e9ce22' \
          'f0ea5b3dcdc90ee20519fd8b0a93ca8bcc904c2c' \
          '3087c014c1ef825c93280436c83f66c0f225b1f5' \
          'cffac83159f91e23c0a2f27040d709e72aa881d3')

build()
{
	Fcd
	Fpatchall
	mkdir -p build || Fdie
	cd build || Fdie
	cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_CXX_FLAGS="${CXXFLAGS}" ..|| Fdie
	make || Fdie
	make DESTDIR=$Fdestdir install || Fdie

}

# optimization OK
