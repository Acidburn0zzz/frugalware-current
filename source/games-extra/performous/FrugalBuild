# Compiling Time: 0.18 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>
# Contributor: devil505 <devil505linux@gmail.com>

pkgname=performous
pkgver=0.6.1
pkgrel=2
url="http://performous.org/"
pkgdesc="Performous : The free Linux karaoke game"
rodepends=('ultrastar-songs')
depends=('fftw' 'smpeg' 'librsvg' 'xine-lib' 'sdl_gfx>=2.0.19' 'libsigc++2' \
	'sdlimage' 'libgcc' 'sdl' 'gstreamer' 'alsa-lib' 'libboost>=1.46.1' 'glibmm' \
	'libxml++' 'jack' 'glew' 'portaudio')
makedepends=('boost' 'cmake')
groups=('games-extra')
conflicts=('ultrastar-ng')
replaces=('ultrastar-ng')
archs=('i686' 'x86_64')
_F_sourceforge_ext="-Source.tar.bz2"
Finclude sourceforge
up2date="lynx -dump $url/install.html | grep -m1 Source.tar.bz2 | sed 's/.*s-\(.*\)-S.*/\1/'"
source=(${source/performous-/Performous-})
_F_cd_path="Performous-$pkgver-Source"
sha1sums=('6dafb83568d34c66435fa626e73f07ebf82bffc8')

build()
{
	Fcd
	export CXXFLAGS="$CXXFLAGS -DBOOST_FILESYSTEM_VERSION=2"
	mkdir -p build || Fdie
	cd build || Fdie
	cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_CXX_FLAGS="${CXXFLAGS}" ..|| Fdie
	make || Fdie
	make DESTDIR=$Fdestdir install || Fdie

}

# optimization OK
