# Compiling Time: 0.74 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=libmp4v2
pkgver=1.5.0.1
pkgrel=1
pkgdesc="A library for working with files using the mp4 container format. (extracted from mpeg4ip)."
_F_sourceforge_dirname="mpeg4ip"
_F_sourceforge_name="mpeg4ip"
Finclude sourceforge
depends=('libstdc++')
url="http://mpeg4ip.sourceforge.net/"
source=($source $pkgname.patch)
groups=('multimedia')
archs=('i686' 'x86_64')
sha1sums=('1271de695ed65284d9c39aa91bf26c5494603fd3' \
          'f24357ce9a3055b9f5d5431be1f187fa88cc58d4')

build()
{
	Fcd mpeg4ip-$pkgver
	## brrr
	touch bootstrapped || Fdie
	Fpatchall
	libtoolize --copy --force || Fdie
	export CXXFLAGS="${CXXFLAGS} -fno-strict-aliasing"
	Fconf \
		--disable-srtp \
		--disable-player \
		--disable-x264 \
		--disable-warns-as-err \
                --disable-server \
                --disable-mp4live \
                --disable-id3tags \
                --disable-xvid \
                --disable-a52dec \
                --disable-mad \
                --disable-mpeg2dec \
                --disable-mp3lame \
                --disable-faac \
                --disable-ffmpeg
	cd lib/mp4v2
	make || Fdie
	Fmakeinstall


}

# optimization OK
