# Last Modified: Wed Apr 28 16:24:44 CEST 2004
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=codecs
pkgver=20031029
pkgrel=1
pkgdesc="Binary codecs for MPlayer"
url="http://www1.mplayerhq.hu/MPlayer/releases/codecs/"
depends=()
source=(http://www1.mplayerhq.hu/MPlayer/releases/codecs/win32codecs.tar.bz2 \
        http://www1.mplayerhq.hu/MPlayer/releases/codecs/essential.tar.bz2 \
	http://www1.mplayerhq.hu/MPlayer/releases/codecs/xanimdlls.tar.bz2)
md5sums=('10e934a4a5609fa2e094acb0f6c1b976' '4748ecae87f71e8bda9cb2e2a9bd30b4' \
         'c2787acd99d905fa995ad40a8f52abb8')

# up2date
up2date_win32codecs=`lynx -dump http://www1.mplayerhq.hu/MPlayer/releases/codecs/|grep -1  codecpack|sed -n '2 p'|tr -s ' '|cut -d ' ' -f 6`
up2date_essential=`lynx -dump http://www1.mplayerhq.hu/MPlayer/releases/codecs/|grep -1 All-in-one|tail -1|tr -s ' ' |cut -d ' ' -f 2`
up2date_xanimdlls=`lynx -dump http://www1.mplayerhq.hu/MPlayer/releases/codecs/|grep -1 XAnim|sed -n '3 p'|tr -s ' '|cut -d ' ' -f 2`


if [ "${md5sums[0]}" == "$up2date_win32codecs" ] && \
   [ "${md5sums[1]}" == "$up2date_essential" ] && \
   [ "${md5sums[2]}" == "$up2date_xanimdlls" ]; then
	up2date=$pkgver
else
	up2date=$RANDOM
fi

# we have to use makepkg --nostrip!

build() {
   mkdir -p $startdir/pkg/usr/lib/win32
   mv $startdir/src/*/* $startdir/pkg/usr/lib/win32
   chown -R root.root $startdir/pkg/usr/lib/win32
	chmod 755 $startdir/pkg/usr/lib/win32/*
}
