# Last Modified: Sun, 27 Mar 2005 15:04:00 +0200
# Compiling Time: ~1 minute
# Maintainer: Marcus Habermehl [BMH1980] <bmh1980de@yahoo.de>

pkgname=mpgtx
pkgver=1.3.1
pkgrel=1
pkgdesc="mpgtx allows you to split, join, demultiplex, manipulate ID3v1 tags"
url="http://mpgtx.sourceforge.net/"
depends=('gcc' 'glibc')
up2date="lynx -dump \"http://sourceforge.net/project/showfiles.php?group_id=22678&package_id=16067\" | grep \"Release Notes\" | head -n 2 | tail -n 1 | cut -d \" \" -f 11"
source=(http://mesh.dl.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('d628060aa04ad3b40a175bf35f5167cf')
license="GPL"
groups=(multimedia)
archs=('i686')

build() {
    cd $startdir/src/$pkgname-$pkgver

    ./configure --prefix=/usr
    
    make

    ln -sf mpgtx mpgjoin
    ln -sf mpgtx mpgsplit
    ln -sf mpgtx mpgcat
    ln -sf mpgtx mpginfo
    ln -sf mpgtx mpgdemux
    ln -sf mpgtx tagmp3
    
    mkdir -vp $startdir/pkg/usr/bin
    mkdir -vp $startdir/pkg/usr/man/de/man1
    mkdir -vp $startdir/pkg/usr/man/man1
    
    install -m 755 -o root -g bin mpgtx $startdir/pkg/usr/bin/mpgtx

    cd $startdir/pkg/usr/bin
    ln -s mpgtx mpgdemux
    ln -s mpgtx mpgjoin
    ln -s mpgtx mpgcat
    ln -s mpgtx mpginfo
    ln -s mpgtx mpgsplit
    ln -s mpgtx tagmp3

    cd $startdir/src/$pkgname-$pkgver/man
    gzip -9 mpgtx.1
    install -m 644 -o root -g root mpgtx.1.gz \
	$startdir/pkg/usr/man/man1/mpgtx.1.gz

    cd $startdir/pkg/usr/man/man1
    ln -s mpgtx.1.gz mpgdemux.1.gz
    ln -s mpgtx.1.gz mpgjoin.1.gz
    ln -s mpgtx.1.gz mpgsplit.1.gz
    ln -s mpgtx.1.gz mpgcat.1.gz
    ln -s mpgtx.1.gz mpginfo.1.gz

    cd $startdir/src/$pkgname-$pkgver/man/de
    gzip -9 mpgtx.1
    install -m 644 -o root -g root mpgtx.1.gz \
	$startdir/pkg/usr/man/de/man1/mpgtx.1.gz

    cd $startdir/pkg/usr/man/de/man1
    ln -s mpgtx.1.gz mpgdemux.1.gz
    ln -s mpgtx.1.gz mpgjoin.1.gz
    ln -s mpgtx.1.gz mpgsplit.1.gz
    ln -s mpgtx.1.gz mpgcat.1.gz
    ln -s mpgtx.1.gz mpginfo.1.gz
}

# vim: ft=sh
