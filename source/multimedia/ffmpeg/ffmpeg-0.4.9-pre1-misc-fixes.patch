diff -Naur ffmpeg-0.4.9-pre1.orig/Makefile ffmpeg-0.4.9-pre1/Makefile
--- ffmpeg-0.4.9-pre1.orig/Makefile	2005-06-02 09:37:57.000000000 +0000
+++ ffmpeg-0.4.9-pre1/Makefile	2005-06-02 09:45:24.000000000 +0000
@@ -46,10 +46,18 @@
 EXTRALIBS+=-logg -lvorbis -lvorbisenc
 endif
 
+ifeq ($(CONFIG_AC3), yes)
+ifneq ($(CONFIG_A52BIN), yes)
+EXTRALIBS += -la52
+endif
+endif
+
+ifeq ($(CONFIG_DTS), yes)
+EXTRALIBS += -ldts
+endif
+
 ifeq ($(CONFIG_FAAD),yes)
-ifeq ($(CONFIG_FAADBIN),yes)
-# no libs needed
-else
+ifneq ($(CONFIG_FAADBIN),yes)
 EXTRALIBS += -lfaad
 endif
 endif
diff -Naur ffmpeg-0.4.9-pre1.orig/libavcodec/Makefile ffmpeg-0.4.9-pre1/libavcodec/Makefile
--- ffmpeg-0.4.9-pre1.orig/libavcodec/Makefile	2005-06-02 09:37:57.000000000 +0000
+++ ffmpeg-0.4.9-pre1/libavcodec/Makefile	2005-06-02 09:46:09.000000000 +0000
@@ -68,8 +68,9 @@
 
 # using builtin liba52 or runtime linked liba52.so.0
 ifneq ($(CONFIG_A52BIN),yes)
-OBJS+= liba52/bit_allocate.o liba52/bitstream.o liba52/downmix.o \
-	liba52/imdct.o  liba52/parse.o liba52/crc.o liba52/resample.o
+#OBJS+= liba52/bit_allocate.o liba52/bitstream.o liba52/downmix.o \
+#	liba52/imdct.o  liba52/parse.o liba52/crc.o liba52/resample.o
+EXTRALIBS += -la52
 endif
 endif
 
diff -Naur ffmpeg-0.4.9-pre1.orig/libavcodec/a52dec.c ffmpeg-0.4.9-pre1/libavcodec/a52dec.c
--- ffmpeg-0.4.9-pre1.orig/libavcodec/a52dec.c	2005-06-02 09:37:57.000000000 +0000
+++ ffmpeg-0.4.9-pre1/libavcodec/a52dec.c	2005-06-02 09:46:21.000000000 +0000
@@ -23,7 +23,7 @@
  */
 
 #include "avcodec.h"
-#include "liba52/a52.h"
+#include <a52dec/a52.h>
 
 #ifdef CONFIG_A52BIN
 #include <dlfcn.h>
@@ -73,7 +73,7 @@
 {
     void* f = dlsym(handle, symbol);
     if (!f)
-	fprintf(stderr, "A52 Decoder - function '%s' can't be resolved\n", symbol);
+	av_log(stderr, "A52 Decoder - function '%s' can't be resolved\n", symbol);
     return f;
 }
 #endif
@@ -86,7 +86,7 @@
     s->handle = dlopen(liba52name, RTLD_LAZY);
     if (!s->handle)
     {
-	fprintf(stderr, "A52 library %s could not be opened! \n%s\n", liba52name, dlerror());
+	av_log(stderr, "A52 library %s could not be opened! \n%s\n", liba52name, dlerror());
         return -1;
     }
     s->a52_init = (a52_state_t* (*)(uint32_t)) dlsymm(s->handle, "a52_init");
diff -Naur ffmpeg-0.4.9-pre1.orig/libavformat/Makefile ffmpeg-0.4.9-pre1/libavformat/Makefile
--- ffmpeg-0.4.9-pre1.orig/libavformat/Makefile	2005-06-02 09:37:57.000000000 +0000
+++ ffmpeg-0.4.9-pre1/libavformat/Makefile	2005-06-02 09:42:09.000000000 +0000
@@ -45,6 +45,7 @@
 
 ifeq ($(CONFIG_DV1394),yes)
 OBJS+= dv1394.o
+EXTRALIBS+=-ldc1394_control -lraw1394
 endif
 
 ifeq ($(CONFIG_AUDIO_OSS),yes)
@@ -68,6 +69,7 @@
 
 ifeq ($(CONFIG_VORBIS),yes)
 OBJS+= ogg.o
+EXTRALIBS+=-logg
 endif
 
 ifeq ($(TARGET_ARCH_SPARC64),yes)
