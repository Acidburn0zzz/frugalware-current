# Compiling Time: 0.01 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Contributor: VMiklos <vmiklos@frugalware.org>

pkgname=mesademos
pkgver=7.0.1
pkgrel=2
pkgdesc="OpenGL demonstration and test programs."
_F_sourceforge_dirname="mesa3d"
_F_sourceforge_name="MesaDemos"
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge
url="http://mesa3d.sourceforge.net/"
depends=('mesa>=7.0.1-2' 'libstdc++' 'freeglut>=2.4.0-2' 'libx11>=1.1.3' 'libxmu>=1.0.3-2'
	'libxi>=1.1.3' 'libdrm>=2.3.0' 'libxvmc>=1.0.4-2' 'libxxf86vm>=1.0.1-2')
groups=('x11' 'xorg-core' 'xorg-apps')
archs=('i686' 'x86_64')
up2date="lynx -dump $url/download.html|grep release|sed 's/.*: //;q'"
source=($source $pkgname-6.5.1-makefile.patch)
sha1sums=('4d6cb158b58dbda9411d00e99a01031e13cae2ec' \
          '16d41d20137358f09b91d93989b62ae3e01c5993')

build() {
	cd Mesa-$pkgver || Fdie
	Fpatchall
	cd progs/xdemos || Fdie
	make glxgears glxinfo glxdemo glxheads || Fdie
	Fexerel glxgears glxinfo glxdemo glxheads /usr/bin
}

# optimization OK
