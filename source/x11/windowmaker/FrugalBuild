# Last Modified: Fri, 17 Jun 2005 00:42:32 +0000
# Compiling Time: ~5 minutes
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=windowmaker
pkgver=0.91.0
pkgrel=4
pkgdesc="An X11 window manager originally designed to provide integration support for the GNUstep  Desktop Environment."
url="http://www.windowmaker.org/"
depends=('x' 'libtiff' 'zlib' 'libjpeg' 'libungif' 'libpng')
groups=('x11')
archs=('i686' 'x86_64')
up2date="lynx -dump $url|grep stable|sed -ne 's/.*]\([0-9\.]*\) .*/\1/' -e '1 p'"
source=(ftp://ftp.windowmaker.org/pub/source/release/WindowMaker-$pkgver.tar.bz2 xinitrc.$pkgname $pkgname.desktop \
	64bit+endian-fixes-0.9x.patch)
md5sums=('9d5e583e6cce5b4d16bb686b0c26c5dc' '39e47113e212775a175d2981c17585a8'\
         '1a8de07dd8bc6bbd8d169ae132cfa752' 'c53a14e14931247288ba66cb017a9f42')

build() {
	Fcd WindowMaker-$pkgver
	[ "$CARCH" == "x86_64" ] && (Fpatch 64bit+endian-fixes-0.9x.patch || return 1)
	Fmake --sysconfdir=/etc/X11 --with-appspath=/usr/lib/GNUstep/Applications || return 1
	Fmakeinstall || return 1

	mkdir -p $startdir/pkg/etc/X11/{sessions,xinit}
	cp $startdir/src/$pkgname.desktop $startdir/pkg/etc/X11/sessions
	install -D -m755 -o root -g root $startdir/src/xinitrc.$pkgname $startdir/pkg/etc/X11/xinit/xinitrc.$pkgname
}

# vim: ft=sh
