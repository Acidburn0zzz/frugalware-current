#!/bin/sh

PATH=/sbin:/usr/sbin:/bin:/usr/bin

# Run preferred X display manager
quit_arg="--retain-splash"
if [ -f /etc/sysconfig/desktop ]; then
	. /etc/sysconfig/desktop
fi

# shut down boot splash
/usr/bin/plymouth quit $quit_arg

shopt -s execfail

[ -n "$desktop" ] && exec $desktop "$@" >/dev/null 2>&1 </dev/null

# Fallbacks, in order
exec gdm "$@" >/dev/null 2>&1 </dev/null
exec kdm "$@" >/dev/null 2>&1 </dev/null
exec lxdm "$@" >/dev/null 2>&1 </dev/null
exec slim "$@" >/dev/null 2>&1 </dev/null
exec xdm "$@" >/dev/null 2>&1 </dev/null

# catch all exit error
exit 1
