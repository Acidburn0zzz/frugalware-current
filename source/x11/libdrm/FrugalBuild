# Compiling Time: 0.05 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

USE_DEVEL=${USE_DEVEL:-"n"}

pkgname=libdrm
pkgver=2.4.16
Fuse $USE_DEVEL && pkgver=$pkgver.g3bd834a
pkgrel=1
pkgdesc="X.Org Userspace interface to kernel DRM services"
url="http://xorg.freedesktop.org/"
depends=()
archs=('i686' 'x86_64' 'ppc')
groups=('x11' 'xorg-core' 'xorg-libs')
if Fuse $USE_DEVEL; then
	unset source sha1sums
	_F_scm_type="git"
	_F_scm_url="git://anongit.freedesktop.org/mesa/drm"
	Finclude scm
else
	up2date="Flasttar http://dri.freedesktop.org/libdrm/"
	source=(http://dri.freedesktop.org/libdrm/libdrm-$pkgver.tar.gz no-pthread-stubs.patch)
	sha1sums=('dea5b1c683cb1498729a7af08356c8066a3c5c9b' \
	          'cc835b89eec11f55ba09587774eb2435fd61decf')
fi
Fconfopts="${Fconfopts[@]} --enable-nouveau-experimental-api --enable-radeon-experimental-api"

build()
{
	Fuse $USE_DEVEL && Funpack_scm
	Fcd
	Fpatchall
	Fautoreconf
	Fconf
	Fmake
	Fmakeinstall
}

# optimization OK
