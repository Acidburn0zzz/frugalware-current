# Compiling Time: 0.12 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

USE_DEVEL=${USE_DEVEL:-"n"}

pkgname=xf86-video-radeonhd
pkgver=1.2.5
Fuse $USE_DEVEL && pkgver=1.2.5.55.g27cfbaa
pkgrel=2
pkgdesc="X.Org driver for AMD GPG r5xx/r6xx chipsets"
url="http://xorg.freedesktop.org"
groups=('x11' 'xorg-core' 'xorg-drivers')
archs=('i686' 'x86_64')
depends=('xorg-server>=1.6.3' 'pciutils' 'libpciaccess>=0.10.6' 'libdrm')
makedepends=('randrproto>1.3.0' 'renderproto' 'videoproto>=2.2.2' 'util-macros>=1.2.1' \
	'resourceproto' 'dri2proto' 'glproto' 'xf86driproto')
Finclude xorg
source=($source 0001-Fix-autoconf-issues.patch
	0002-radeonhd-Update-to-xextproto-7.1-support.patch
	0003-radeonhd-update-for-resources-RAC-API-removal.patch
	0004-radeonhd-further-RAC-resources-changes.patch
	0005-Adapt-for-nuked-xf86LoaderReqSymLists-in-Xserver-1.6.patch)
sha1sums=('64fc0eb5209adba5479396bafe53b50ded6c0940' \
          '9399efe9842b0cba149ae185186d6a5de65c592c' \
          '153f2ba4a28d0d883808a9c70f32012ab20d985c' \
          'b66a81dc9f826b34c2da7508017b5af85f04787e' \
          '1b4a4801515f2965d540112e8e7f844efa0aba8a' \
          '5cc8e053e7d1b84ee1c857e6eda877123b4b4ddb')
Fconfopts="$Fconfopts --enable-dri"

if Fuse $USE_DEVEL; then
	unset source sha1sums
	_F_scm_type="git"
	_F_scm_url="git://anongit.freedesktop.org/xorg/driver/xf86-video-radeonhd"
	Finclude scm
fi

build()
{
	if Fuse $USE_DEVEL; then
		Funpack_scm
	fi
	Fpatchall
	Fautoreconf
	Fmake
	Fmakeinstall

}
# optimization OK
