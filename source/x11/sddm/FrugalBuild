# Compiling Time: 0.50 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

### FIXME: figure rodepends()

pkgname=sddm
pkgver=0.14.0
pkgrel=9
pkgdesc='QML based X11 display manager'
archs=('x86_64')
groups=('x11')
depends=('qt5-declarative>=5.9.0')
rodepends=('xauth' 'hack')
makedepends=('docutils' 'qt5-tools>=5.9.0' 'extra-cmake-modules')
_F_cmake_confopts+="	-DCMAKE_INSTALL_PREFIX=/usr \
		        -DCMAKE_BUILD_TYPE=Release \
		        -DCMAKE_INSTALL_LIBEXECDIR=/usr/lib/sddm \
		        -DBUILD_MAN_PAGES=ON"

_F_github_tag_v=y
_F_archive_grepv="0.1.0"

conflicts=('kdm')
replaces=("${conflicts[@]}" 'liblightdm-qt')
provides=("${conflicts[@]}" 'liblightdm-qt')

Finclude github cmake
backup=('etc/sddm.conf')
options+=('scriptlet')
source=(sddm.conf \
	#X-scripts-stop-using-files-from-users-HOME.patch \
	https://github.com/sddm/sddm/archive/develop.zip revert-PR-#714.patch)
	#add_highdpi_option.patch \
	#https://github.com/sddm/sddm/commit/ecb903e48822bd90650bdd64fe80754e3e9664cb.diff \
	#https://github.com/sddm/sddm/commit/86f81eae93aa32e87081fa4691ea127cf3616fa2.diff \
	#https://github.com/sddm/sddm/commit/7196c7ebb423b258febed24937b6dd01b59db134.diff \
	#https://github.com/sddm/sddm/commit/1ba30952b942050fe55a9d9c76c615f72f6fcd04.diff)
sha1sums=('c29fc983f33899f358dfc6fc11f83201d8c62a7f' \
          '34cd42d601fcca33ee0d2b6ccef4434e8378ad69' \
          '1d859129838ca99cbc79c40a58c9b15529d02239')

options+=('noversrc')

build() {

	Fcd $pkgname-develop
	CMake_build
	Finstall 755 /etc/sddm.conf

}
# optimization OK
