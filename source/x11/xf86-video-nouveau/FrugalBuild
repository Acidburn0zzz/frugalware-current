# Compiling Time: 0.24 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

USE_DEVEL=${USE_DEVEL:-"y"}

pkgname=xf86-video-nouveau
pkgver=0.0.15
pkgrel=1
pkgdesc="X.Org driver for Nvidia cards (opensource)"
groups=('x11' 'xorg-core' 'xorg-drivers')
archs=('i686')
Finclude xorg
options=('force')
depends=('xorg-server>=1.6.3' 'libxvmc>=1.0.4-3' 'libdrm')
makedepends=('randrproto>=1.3.0' 'renderproto' 'videoproto>=2.2.2' 'xf86driproto>=2.0.4' \
	'xf86dgaproto' 'glproto' 'xineramaproto' 'util-macros>=1.2.1')
source=('nouveau_class.h')
sha1sums=('8f25600294ea685cfceb6e0a1c2623c241fb13db')
_F_scm_type="git"
if Fuse $USE_DEVEL; then
	unset source sha1sums
	pkgver="$pkgver.g6b8b157"
	_F_scm_url="git://anongit.freedesktop.org/nouveau/xf86-video-nouveau"
else
	pkgver="$pkgver.g6b8b157"
	_F_scm_url="git://git.frugalware.org/pub/other/sources/xf86-video-nouveau"
fi
_F_scm_tag="$pkgver"
Finclude scm

build()
{
#	if Fuse $USE_DEVEL; then
		Funpack_scm
		Fautoreconf
#	fi

	# Temporary fix till kernel>=2.4.34 and then libdrm>=2.4.19
	Fcd
	Fexec cp -f $startdir/nouveau_class.h src/

	Fbuild
}

# optimization OK
