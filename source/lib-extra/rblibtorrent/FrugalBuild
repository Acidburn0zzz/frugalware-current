# Compiling Time: 2.17 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=rblibtorrent
pkgver=0.12
pkgrel=8
pkgdesc="LibTorrent is a BitTorrent library written in C++"
_F_sourceforge_name="libtorrent"
Finclude sourceforge
url="http://www.rasterbar.com/products/libtorrent/index.html"
depends=('libboost-mt>=1.34.1' 'zlib' 'icu>=3.8')
makedepends=('boost>=1.34.1')
groups=('lib-extra')
archs=('i686' 'x86_64')
#source=(http://www.libtorrent.org/libtorrent-${pkgver}rc3.tar.gz)
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=79942|grep -m1 '.tar.gz'|sed 's/.*rent-\(.*\).tar.gz.*/\1/'"
source=($source not-for-upstream.patch CVE-2008-0646.patch rblibtorrent-gcc43.diff)
_F_cd_path="libtorrent-$pkgver"

build()
{
	Fcd
	Fpatchall
	Fautoreconf
 	Fmake \
		--libdir=/usr/lib/libtorrent \
		--enable-debug=no \
		--with-zlib=system \
		--with-boost-date-time=mt \
		--with-boost-filesystem=mt \
		--with-boost-thread=mt \
		--with-boost-regex=mt \
		--with-boost-program_options=mt \
		--enable-examples
	Fmakeinstall
	Fmv usr/lib/libtorrent/pkgconfig usr/lib/pkgconfig/
	Fln /usr/lib/libtorrent/libtorrent.so.0.1.0 /usr/lib/libtorrent.so.0

}
sha1sums=('c0b0535100d53452719cdfbcdf8e66c1217bc29e' \
          '729610c06b87fd4772ae0c428ad0abc5dbfeff3f' \
          'edd8e02811f7636c6a5d1ee8f1353889d89b5f0b' \
          '759023c5c7c321717dd4abc7630c0fbaba297a52')
# optimization OK
