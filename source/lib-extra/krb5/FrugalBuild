# Compiling time: 0.93 SBU
# Maintainer: Marius Cirsta <mcirsta@frugalware.org>

pkgname=krb5
pkgver=1.14
pkgrel=2
pkgdesc="Kerberos: The Network Authentication Protocol"
url="http://web.mit.edu/kerberos/"
license="MIT licence"
depends=('e2fsprogs>=1.42.13-4' 'openssl>=1.0.2-3')
makedepends=('perl>=2.22.1' 'python>=2.7.11-3')
rodepends=("libkrb5=$pkgver")
archs=('i686' 'x86_64' 'arm')
groups=('lib-extra')
_F_archive_grepv="appl"
up2date="lynx -dump http://web.mit.edu/kerberos/| grep -m1 'Current release:' | sed 's/.*-//g'"
source=(http://web.mit.edu/kerberos/dist/$pkgname/${pkgver}/$pkgname-$pkgver.tar.gz)
sha1sums=('02973f6605b1170bec812af9c8da4e447eeca9a9')

subpkgs=('libkrb5')
subdescs=('krb5 libraries files.')
subdepends=('e2fsprogs libgssglue')
subgroups=('lib')
subarchs=('i686 x86_64 arm')

Fconfopts+="	--with-system-et \
                --with-system-ss \
                --enable-shared"

build() {


	Fcd
	cd src || Fdie
	export CPPFLAGS="$CPPFLAGS -I/usr/include/et"
	Fbuild

	Fsplit libkrb5 usr/lib/pkgconfig/*.pc
	Fsplit libkrb5 usr/lib/*.*so*
	Fsplit libkrb5 usr/include
}

# optimization OK
