# Compiling Time: 0.01 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=vc
## max version can be used by krita right now
pkgver=1.3.2
pkgrel=1
pkgdesc="C++ types for explicitly data-parallel programming"
url="https://github.com/VcDevel/Vc"
depends=() ## static
groups=('lib-extra')
archs=('x86_64')
_F_github_author="VcDevel"
_F_github_name="Vc"
_F_github_tag="yes"
## pls no-no-no don't set CPU to BUILD CPU
_F_cmake_confopts+=" -DTARGET_ARCHITECTURE='none' -DPACKAGERS_BUILD=true  -DBUILD_TESTING=OFF"
Finclude cmake github
source+=(do-not-use-auto-for-target-architecture.patch)
sha1sums=('5673d8144db02528b39439a44025c8ce198482cf' \
          '7567103a6a71cb164cefe489bc8635482bdf9b59')
options+=('static' 'force')

build() {
	Fcd Vc-$pkgver
	## NO thx
	Fsed '-O3' '' cmake/VcMacros.cmake
	## right distros install in $HOME and /opt/Vc .. yay how weird
	Fsed '/opt/Vc' '/usr' cmake/FindVc.cmake
	## find_package(Vc ... PATHS $ENV{HOME} /opt/Vc)
	CMake_build
}
# optimization OK

