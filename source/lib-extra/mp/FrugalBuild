# Compiling Time: 0.01 SBU
# Maintainer: James Buren <ryuo@frugalware.org>

pkgname=mp
pkgver=5.1.3
pkgrel=1
pkgdesc="A text editor for programmers. (common files)"
url="http://triptico.com/software/mp.html"
depends=('grutatxt' 'mp_doccer')
makedepends=('ncurses' 'gtk+2>=2.16.2-2' 'glibc' 'libxau' 'libxdmcp' 'freetype2' 'libxdamage' 'libxext' 'libxml2')
groups=('lib-extra')
# since we pull in pango...
# disable docs since it autoinstalls them
options=('scriptlet' 'nodocs')
archs=('i686' 'x86_64')
subpkgs=("$pkgname-ncurses" "$pkgname-gtk2")
subdescs=("ncurses version of $pkgname." "gtk2 version of $pkgname.")
subgroups=("apps-extra" "xapps-extra")
subarchs=("i686 x86_64" "i686 x86_64")
subrodepends=("$pkgname ncurses" "$pkgname gtk+2 glibc libxau libxdmcp freetype2 libxdamage libxext libxml2")
up2date="Flasttar $url"
source=(http://triptico.com/download/$pkgname-$pkgver.tar.gz)
sha1sums=('f05b760b09126fe624703b5d9d4c280803a0c313')
unset MAKEFLAGS

build()
{
	Fmkdir /usr/bin
	Fsed "/usr/local" "/usr" {,mpdm/,mpsl/}config.sh
	./config.sh --without-gtk || Fdie
	Fmake
	Fmakeinstall
	Fmv /usr/bin/$pkgname-5 /usr/bin/$pkgname-5-ncurses
	Fsplit $pkgname-ncurses /usr/bin/$pkgname-5-ncurses
	./config.sh --without-curses || Fdie
	Fmake
	Fexerel $pkgname-5 /usr/bin/$pkgname-5-gtk2
	Fsplit $pkgname-gtk2 /usr/bin/$pkgname-5-gtk2
  Fln /usr/share/doc/$pkgname-5 /usr/share/doc/$pkgname-$pkgver
}

# optimization OK
