# Compiling Time: 0.01 SBU
# Maintainer: James Buren <ryuo@frugalware.org>

pkgname=mp
pkgver=5.1.1
pkgrel=1
pkgdesc="A text editor for programmers. (common files)"
url="http://triptico.com/software/mp.html"
depends=('grutatxt' 'mp_doccer')
makedepends=('ncurses' 'gtk+2' 'glibc' 'libxau' 'libxdmcp' 'freetype2' 'libxdamage' 'libxext' 'libxml2')
groups=('lib-extra')
# since we pull in pango...
# disable docs since it autoinstalls them
options=('scriptlet' 'nodocs')
archs=('i686')
subpkgs=("$pkgname-ncurses" "$pkgname-gtk2")
subdescs=("ncurses version of $pkgname." "gtk2 version of $pkgname.")
subgroups=("apps-extra" "xapps-extra")
subarchs=("i686" "i686")
subrodepends=("$pkgname ncurses" "$pkgname gtk+2 glibc libxau libxdmcp freetype2 libxdamage libxext libxml2")
up2date="Flasttar $url"
source=(http://triptico.com/download/$pkgname-$pkgver.tar.gz)
sha1sums=('75fa481518be29f63ef35b152ab18acb3bd445d2')
unset MAKEFLAGS

build()
{
	Fmkdir /usr/bin
	Fsed "/usr/local" "/usr" {,mpdm/,mpsl/}config.sh
	./config.sh --without-gtk || Fdie
	Fmake
	Fmakeinstall
	Fmv /usr/bin/$pkgname-5 /usr/bin/$pkgname-5-ncurses
	Fsplit $pkgname-ncurses /usr/bin/$pkgname-5-ncurses
	./config.sh --without-curses || Fdie
	Fmake
	Fexerel $pkgname-5 /usr/bin/$pkgname-5-gtk2
	Fsplit $pkgname-gtk2 /usr/bin/$pkgname-5-gtk2
}

# optimization OK
