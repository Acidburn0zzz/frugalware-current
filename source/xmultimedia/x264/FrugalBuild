# Compiling Time: 0.22 SBU
# Contributor: Kapolnasi Tamas <ktamas@tdc.hu>
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=x264
pkgver=20060903
pkgrel=2
pkgdesc="A free h264/avc encoder"
url="http://developers.videolan.org/x264.html"
depends=('glibc' 'libx11')
[ "$CARCH" == "i686" ] && makedepends=('nasm')
[ "$CARCH" == "x86_64" ] && makedepends=('yasm')
makedepends=(${makedepends[@]} 'gpac')
groups=('xmultimedia')
archs=('i686' 'x86_64')
up2date=$pkgver
source=(ftp://ftp.videolan.org/pub/videolan/x264/snapshots/x264-snapshot-$pkgver-2245.tar.bz2)
sha1sums=('c2dcdbcef43c59c5b544e3a8bb2fbdeb9b388dfb')

build()
{
	Fcd $pkgname-snapshot-$pkgver-2245/
	Fsed "CFLAGS=\"-O4" "CFLAGS=\"$CFLAGS" configure
	Fbuild --enable-pthread \
		--enable-shared \
		--enable-mp4-output \
		--enable-visualize
	# DON'T forget to check the link!!!
	Fln libx264.so.50 /usr/lib/libx264.so
}

# optimization OK
