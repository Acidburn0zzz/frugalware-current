# Compiling Time: 0.22 SBU
# Contributor: Kapolnasi Tamas <ktamas@tdc.hu>
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=x264
pkgver=20090416
pkgrel=1
pkgdesc="A free h264/avc encoder"
url="http://developers.videolan.org/x264.html"
depends=('libx11>=1.2.2')
makedepends=('gpac' 'yasm')
groups=('xmultimedia')
archs=('i686' 'x86_64' 'ppc')
up2date=$pkgver
source=(ftp://ftp.videolan.org/pub/videolan/x264/snapshots/x264-snapshot-$pkgver-2245.tar.bz2 gcc4.2.diff)
sha1sums=('007bc7917c61e2e815094458865077f9a5b5d19b' \
          '150dc05f5e26b42a9e61a304bbd3643ad215447f')

Fconfopts="$Fconfopts --enable-pthread \
                --enable-shared \
                --enable-mp4-output \
                --enable-visualize \
                --enable-pic"

if [ "$CARCH" == "ppc" ]; then
	export CFLAGS="$CFLAGS -flax-vector-conversions"
fi

build() {
	Fcd $pkgname-snapshot-$pkgver-2245/
	Fbuild
	Fmakeinstall bindir=/usr/bin libdir=/usr/lib includedir=/usr/include DESTDIR=$Fdestdir
}

# optimization OK
