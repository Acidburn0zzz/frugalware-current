# Compiling Time: 0.22 SBU
# Contributor: Kapolnasi Tamas <ktamas@tdc.hu>
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=x264
pkgver=20070421
pkgrel=1
pkgdesc="A free h264/avc encoder"
url="http://developers.videolan.org/x264.html"
depends=('libx11')
[ "$CARCH" == "i686" ] && makedepends=('nasm')
[ "$CARCH" == "x86_64" ] && makedepends=('yasm')
makedepends=(${makedepends[@]} 'gpac')
groups=('xmultimedia')
archs=('i686' 'x86_64')
up2date=$pkgver
source=(ftp://ftp.videolan.org/pub/videolan/x264/snapshots/x264-snapshot-$pkgver-2245.tar.bz2)

build()
{
	Fcd $pkgname-snapshot-$pkgver-2245/
	Fsed "CFLAGS=\"-O4" "CFLAGS=\"$CFLAGS" configure
	Fsed "/usr/X11R6" "/usr" configure
	Fbuild \
		--enable-pthread \
		--enable-shared \
		--enable-mp4-output \
		--enable-visualize
	# DON'T forget to check the link!!!
	# is auto done now so far I see
	#Fln libx264.so.50 /usr/lib/libx264.so
}

sha1sums=('e10bb3613452301a48e8d8e3d2ffa3a06137990e')
# optimization OK
