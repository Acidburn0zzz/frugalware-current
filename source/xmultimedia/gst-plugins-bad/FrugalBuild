# Last modified: Sun, 07 May 2006 22:57:55 +0200
# Compiling time: 0.86 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=gst-plugins-bad
pkgver=0.10.3
pkgrel=2
pkgdesc="Plugins for GStreamer (Bad)"
url="http://gstreamer.freedesktop.org/"
depends=('gst-plugins-base' 'libstdc++')
makedepends=('opengl' 'soundtouch' 'libdrm' 'libxxf86vm' 'directfb' 'gstreamer' 'xvidcore' 'wavpack' 'libmpcdec' \
	'swfdec' 'faac' 'neon' 'libmusicbrainz' 'cairo' 'bzip2' 'libdca' 'liboil' 'libmms' 'faad2')
groups=('xmultimedia')
options=('scriptlet')
archs=('i686')
source=($url/src/$pkgname/$pkgname-$pkgver.tar.bz2 soundtouch)
up2date="lynx -dump $url/src/$pkgname/|grep '.tar.bz2$'|sort -n -r|head -n 1|sed 's/.*-\(.*\).t.*/\1/'"
sha1sums=('1b74664340c2f3dc52c7fdc592e30500e33afd0f' \
          '79c1d2e132857665da1615ea044e3be7132bee60')

subpkgs=("$pkgname-bzip2" "$pkgname-dts" "$pkgname-faac" "$pkgname-faad2" "$pkgname-mms" "$pkgname-swfdec" "$pkgname-neon" \
	"$pkgname-sdl" "$pkgname-directfb" "$pkgname-xvid" "$pkgname-opengl" "$pkgname-wavpack" "$pkgname-musepack" \
	"$pkgname-soundtouch" "$pkgname-musicbrainz" "$pkgname-video4linux2")
subdescs=('GStreamer bzip2  plugin (Bad).' 'GStreamer dts plugin (Bad).'  'GStreamer faac plugin (Bad).' \
          'GStreamer faad plugin (Bad).' 'GStreamer mms plugin (Bad).' 'GStreamer swfdec plugin (Bad).' \
          'GStreamer neon plugin (Bad).' 'GStreamer sdl plugin (Bad).' 'GStreamer directfb plugin (Bad).' \
	  'GStreamer xvid plugin (Bad).' 'GStreamer opengl plugin (Bad).' 'GStreamer wavpack plugin (Bad).' \
          'GStreamer musepack plugin (Bad).' 'GStreamer soundtouch plugin (Bad).' 'GStreamer musicbrainz plugin (Bad).' \
	  'GStreamer video4linux2  plugin (Bad).')
subdepends=("bzip2" "libdca gst-plugins-base liboil" "faac gst-plugins-base" "faad2 gst-plugins-base" \
	    "libmms gstreamer" "swfdec gstreamer cairo" "neon gstreamer" "sdl gst-plugins-base" "directfb gst-plugins-base liboil" \
	    "xvidcore gstreamer" "opengl libxxf86vm libdrm gst-plugins-base" "wavpack gstreamer" \
	    "libmpcdec gstreamer" "soundtouch gstreamer" "libmusicbrainz gst-plugins-base libstdc++" "gst-plugins-base")
subgroups=('xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' \
	   'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia')
subarchs=('i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686')


build()
{
	Fcd
	Fpatch soundtouch
	autoreconf  || Fdie
	Fbuild --disable-debug --disable-ivorbis
	Fsplit $pkgname-bzip2 usr/lib/gstreamer-0.10/libgstbz2.*
	Fsplit $pkgname-dts usr/lib/gstreamer-0.10/libgstdtsdec.*
	Fsplit $pkgname-faac usr/lib/gstreamer-0.10/libgstfaac.*
	Fsplit $pkgname-faad2 usr/lib/gstreamer-0.10/libgstfaad.*
	Fsplit $pkgname-mms usr/lib/gstreamer-0.10/libgstmms.*
	Fsplit $pkgname-swfdec usr/lib/gstreamer-0.10/libgstswfdec.*
	Fsplit $pkgname-neon usr/lib/gstreamer-0.10/libgstneonhttpsrc.*
	Fsplit $pkgname-sdl usr/lib/gstreamer-0.10/libgstsdlvideosink.*
        Fsplit $pkgname-directfb usr/lib/gstreamer-0.10/libgstdfbvideosink.*
        Fsplit $pkgname-xvid usr/lib/gstreamer-0.10/libgstxvid.*
        Fsplit $pkgname-opengl usr/lib/gstreamer-0.10/libgstglimagesink.*
        Fsplit $pkgname-wavpack usr/lib/gstreamer-0.10/libgstwavpack.*
        Fsplit $pkgname-musepack usr/lib/gstreamer-0.10/libgstmusepack.*
        Fsplit $pkgname-soundtouch usr/lib/gstreamer-0.10/libgstpitch.*
	Fsplit $pkgname-musicbrainz usr/lib/gstreamer-0.10/libgsttrm.*
	Fsplit $pkgname-video4linux2 usr/lib/gstreamer-0.10/libgstvideo4linux2.*
}

# optimization OK
