# Compiling Time: 1.26 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=gst-ffmpeg
pkgver=0.10.1
pkgrel=4
pkgdesc="Gstreamer Multimedia Framework FFMpeg Plugin"
url="http://www.gstreamer.net"
depends=('gst-plugins-base>=0.10.10-4' 'libstdc++')
makedepends=('sdl' 'freetype2')
groups=('xmultimedia')
archs=('i686' 'x86_64')
up2date="lynx -dump http://gstreamer.freedesktop.org/src/gst-ffmpeg/|sort -r -n|grep -m1 '.tar.bz2$'|sed 's/.*-\(.*\).tar.bz2/\1/'"
source=(http://gstreamer.freedesktop.org/src/$pkgname/$pkgname-$pkgver.tar.bz2 \
	gst-ffmpeg-0.8.6-CVE-2006-4800.patch)
sha1sums=('a3bafaf83db1aadc14abc94c7d89cd7d2f739f0a' \
	  '77ca3e28790ecbb5fbd2c21cc412d6ac31573625')
## mabye for all archs() ?
if [ "$CARCH" == "i686" ]; then
	export CFLAGS="$CFLAGS -fno-strict-aliasing"
fi

build()
{
	# probably this is needed because sdl-config --libs is buggy
	Fsed '$(SDL_LIBS)' '$(SDL_LIBS) -lX11' gst-libs/ext/ffmpeg/Makefile.in
	Fbuild
}

# optimization OK
