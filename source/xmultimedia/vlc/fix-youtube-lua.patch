From 0367559c33623e239a46cf904eba3c1aeb92aa83 Mon Sep 17 00:00:00 2001
From: Pierre Ynard <linkfanel@yahoo.fr>
Date: Fri, 16 Feb 2018 06:46:01 +0100
Subject: [PATCH] youtube.lua: update signature descrambling javascript parsing

More robust parsing of signature descrambling function name
---
 share/lua/playlist/youtube.lua | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/share/lua/playlist/youtube.lua b/share/lua/playlist/youtube.lua
index a7eeeb375d3..866c888a3da 100644
--- a/share/lua/playlist/youtube.lua
+++ b/share/lua/playlist/youtube.lua
@@ -1,7 +1,7 @@
 --[[
  $Id$
 
- Copyright © 2007-2017 the VideoLAN team
+ Copyright © 2007-2018 the VideoLAN team
 
  This program is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
@@ -107,8 +107,8 @@ function js_descramble( sig, js_url )
     end
 
     -- Look for the descrambler function's name
-    -- c&&a.set("signature",br(c));
-    local descrambler = js_extract( js, "%.set%(\"signature\",([^)]-)%(" )
+    -- k.s&&f.set(k.sp||"signature",DK(k.s));
+    local descrambler = js_extract( js, "%.set%([^,]-\"signature\",([^)]-)%(" )
     if not descrambler then
         vlc.msg.dbg( "Couldn't extract youtube video URL signature descrambling function name" )
         return sig
