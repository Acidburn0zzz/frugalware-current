# Compiling time: 1.41 SBU
# Maintainer: Baste <baste@frugalware.org>
# Contributor: bouleetbil <bouleetbil@frogdev.info>
# Contributor: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=gst1-plugins-base
_F_archive_name="gst-plugins-base"
pkgver=1.8.2
pkgrel=1
pkgdesc="Plugins for GStreamer 1.0"
url="http://gstreamer.freedesktop.org/"
depends=('libxv>=1.0.10-2' 'gstreamer1>=1.8.1' 'libffi>=3.2.1' 'orc>=0.4.24-2')
makedepends=('gtk-doc' 'pyxml' 'liboil>=0.3.17-3' 'gobject-introspection>=1.48.0' 'x11-protos')
groups=('xmultimedia')
archs=('i686' 'x86_64')
options+=('scriptlet')
_F_gnome_ext=".tar.xz"
_F_gnome_name="gst-plugins-base"
_F_gnome_devel="y"
Finclude gnome
#source=(http://gstreamer.freedesktop.org/src/${_F_archive_name}/${_F_archive_name}-$pkgver.tar.xz)
sha1sums=('f677e9dc2669309139f189fc20f7cbdca329dde5')



subpkgs=("$pkgname-cdparanoia")
subdescs=('GStreamer cdparanoia plugin (Base).')
subdepends=("gstreamer1>=1.8.1 cdparanoia>=10.2-4 libffi>=3.2.1")
subrodepends=("$pkgname>=$pkgver")
subgroups=('xmultimedia')
subarchs=('i686 x86_64')

subpkgs+=("$pkgname-pango")
subdescs+=('GStreamer pango plugin (Base).')
subdepends+=("gstreamer1>=1.8.1 pango>=1.38.1-2 libffi>=3.2.1 libpng>=1.6.20")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('i686 x86_64')

subpkgs+=("$pkgname-alsa")
subdescs+=('GStreamer alsa plugin (Base).')
subdepends+=("gstreamer1>=1.8.1 alsa-lib>=1.1.0-2 libffi>=3.2.1")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('i686 x86_64')

subpkgs+=("$pkgname-theora")
subdescs+=('GStreamer theora plugin (Base).')
subdepends+=("gstreamer1>=1.6.2-2  libffi>=3.2.1 libtheora>=1.1.1-4 libogg>=1.3.2-4")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('i686 x86_64')

subpkgs+=("$pkgname-oil")
subdescs+=('GStreamer oil plugin (Base).')
subdepends+=("gstreamer1>=1.8.1  libffi>=3.2.1 orc>=0.4.0-3")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('i686 x86_64')

subpkgs+=("$pkgname-ogg")
subdescs+=('GStreamer ogg plugin (Base).')
subdepends+=("gstreamer1>=1.8.1  libffi>=3.2.1 libogg>=1.3.2-4")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('i686 x86_64')

subpkgs+=("$pkgname-vorbis")
subdescs+=('GStreamer vorbis plugin (Base).')
subdepends+=("gstreamer1>=1.8.1  libffi>=3.2.1 libvorbis>=1.3.5-4 libogg>=1.3.2-4")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('i686 x86_64')

subpkgs+=("$pkgname-gio")
subdescs+=('GStreamer GIO plugin (Base).')
subdepends+=("gstreamer1>=1.8.1  libffi>=3.2.1 glib2>=2.46.2-3")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('i686 x86_64')

subpkgs+=("$pkgname-libvisual")
subdescs+=('GStreamer libvisual plugin (Base).')
subdepends+=("gstreamer1>=1.8.1  libffi>=3.2.1 libvisual>=0.4.0-3")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('i686 x86_64')

subpkgs+=("$pkgname-opus")
subdescs+=('GStreamer opus plugin (Base).')
subdepends+=("gstreamer1>=1.8.1 opus")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('i686 x86_64')

subpkgs+=("$pkgname-docs")
subdescs+=('GStreamer Plugins Documentation.')
subdepends+=(" ")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('gnome-extra docs-extra')
subarchs+=('i686 x86_64')


build() {
	if [ "$CARCH" == "x86_64" ]; then
		CFLAGS+=" -fPIC"
	fi

	Fbuild \
		--enable-experimental \
		--disable-schemas-install \
		--enable-gtk-doc \
		--disable-debug \
		--disable-dependency-tracking \
		--with-gnu-ld \
		--with-package-name='Frugalware gstreamer-plugins-base package' \
		--with-package-origin='http://frugalware.org/'

	Fsplit $pkgname-libvisual usr/lib/gstreamer-1.0/libgstlibvisual.*
	Fsplit $pkgname-cdparanoia usr/lib/gstreamer-1.0/libgstcdparanoia.*
	Fsplit $pkgname-pango usr/lib/gstreamer-1.0/libgstpango.*
	Fsplit $pkgname-alsa usr/lib/gstreamer-1.0/libgstalsa.*
	Fsplit $pkgname-theora usr/lib/gstreamer-1.0/libgsttheora.*
	Fsplit $pkgname-oil usr/lib/gstreamer-1.0/{libgstvideotestsrc.*,libgstaudioresample.*,libgstvideoscale.*,libgstvolume.*}
	Fsplit $pkgname-ogg usr/lib/gstreamer-1.0/libgstogg.*
	Fsplit $pkgname-vorbis usr/lib/gstreamer-1.0/libgstvorbis.*
	Fsplit $pkgname-gio usr/lib/gstreamer-1.0/libgstgio.*
	Fsplit $pkgname-opus usr/lib/gstreamer-1.0/libgstopus.*
	Fsplit $pkgname-docs usr/share/gtk-doc
}

# optimization OK
