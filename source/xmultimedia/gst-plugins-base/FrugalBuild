# Last modified: Sun, 11 Jun 2006 12:00:48 +0200
# Compiling time: 2.09 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Contributor: crazy <crazy@frugalware.org>

pkgname=gst-plugins-base
pkgver=0.10.8
pkgrel=1
pkgdesc="Plugins for GStreamer"
url="http://gstreamer.freedesktop.org/"
depends=('libxv' 'libsm' 'gstreamer>=0.10.8' 'libvorbis')
rodepends=('libmms' 'hermes' 'ortp')
makedepends=('gtk-doc' 'pyxml' 'gnome-vfs' 'cdparanoia' 'pango' 'liboil' 'alsa-lib' 'libtheora' 'fontconfig')
groups=('xmultimedia')
archs=('i686' 'x86_64')
options=('scriptlet')
up2date="lynx -dump $url/src/$pkgname/|grep '.tar.bz2$'|sort -n -r|head -n 1|sed 's/.*-\(.*\).t.*/\1/'"
source=($url/src/$pkgname/$pkgname-$pkgver.tar.bz2)
sha1sums=('b428fe9caa17edd78a87d50931691a6d47c20e72')

subpkgs=("$pkgname-gnomevfs" "$pkgname-cdparanoia" "$pkgname-pango" "$pkgname-alsa" "$pkgname-theora" "$pkgname-oil" "$pkgname-docs")
subdescs=('GStreamer gnome-vfs plugin (Base).' 'GStreamer cdparanoia plugin (Base).'  'GStreamer pango plugin (Base).' \
          'GStreamer alsa plugin (Base).' 'GStreamer theora plugin (Base).' 'GStreamer oil plugin (Base).'\
	  'GStreamer Plugins Documentation.')
subdepends=("gnome-vfs $pkgname=$pkgver" "cdparanoia $pkgname=$pkgver" "pango fontconfig  gstreamer" "alsa-lib $pkgname=$pkgver" \
	 "libtheora $pkgname=$pkgver"  "liboil gstreamer" "$pkgname=$pkgver")
subgroups=('xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'xmultimedia' 'gnome gnome-docs')
subarchs=('i686 x86_64' 'i686 x86_64' 'i686 x86_64' 'i686 x86_64' 'i686 x86_64' 'i686 x86_64' 'i686')

build() {
	if [ "$CARCH" == "x86_64" ]; then 
		export CFLAGS="$CFLAGS -fPIC"
	fi
	if [ "$CARCH" != "x86_64" ]; then 
	Fmake --disable-schemas-install --enable-gtk-doc --disable-debug \
		--disable-arts --disable-artsc --with-gnu-ld --with-x
	Fmakeinstall GCONF_DISABLE_SCHEMA_INSTALL=1
	Fsplit $pkgname-gnomevfs usr/lib/gstreamer-0.10/libgstgnomevfs.*
	Fsplit $pkgname-cdparanoia usr/lib/gstreamer-0.10/libgstcdparanoia.*
	Fsplit $pkgname-pango usr/lib/gstreamer-0.10/libgstpango.*
	Fsplit $pkgname-alsa usr/lib/gstreamer-0.10/libgstalsa.*
	Fsplit $pkgname-theora usr/lib/gstreamer-0.10/libgsttheora.*
	Fsplit $pkgname-oil usr/lib/gstreamer-0.10/{libgstvideotestsrc.*,libgstaudioresample.*,libgstvideoscale.*}
	Fsplit $pkgname-docs usr/share/gtk-doc
	else
	Fmake --disable-schemas-install --disable-debug \
                --disable-arts --disable-artsc --with-gnu-ld --with-x
        Fmakeinstall GCONF_DISABLE_SCHEMA_INSTALL=1
        Fsplit $pkgname-gnomevfs usr/lib/gstreamer-0.10/libgstgnomevfs.*
        Fsplit $pkgname-cdparanoia usr/lib/gstreamer-0.10/libgstcdparanoia.*
        Fsplit $pkgname-pango usr/lib/gstreamer-0.10/libgstpango.*
        Fsplit $pkgname-alsa usr/lib/gstreamer-0.10/libgstalsa.*
        Fsplit $pkgname-theora usr/lib/gstreamer-0.10/libgsttheora.*
        Fsplit $pkgname-oil usr/lib/gstreamer-0.10/{libgstvideotestsrc.*,libgstaudioresample.*,libgstvideoscale.*}
	fi
}


# optimization OK
