# Last Modified: Wed, 06 Sep 2006 07:55:35 +0200
# Compiling Time: 28.87 SBU
# Maintainer:  Kapolnasi Tamas <ktamas@tdc.hu>
# Contributor: crazy <crazy@frugalware.org>

pkgname=koffice
pkgver=1.5.2
pkgrel=2
pkgdesc="An integrated Office suite for KDE"
url="http://www.koffice.org"
depends=('libkexif' 'pkgconfig' 'kdebase>=3.5.4' 'libpqxx' 'wv2' 'libmysqlclient' 'libwpd' 'python' 'ruby>=1.8.4-2' 'imagemagick')
makedepends=('esd' 'doxygen' 'qt-docs>=3.3.6' 'kdebindings' 'mysql')
groups=('kde-extra')
archs=('i686' 'x86_64')
options=('nodocs' 'scriptlet')
up2date="lynx -dump http://ftp.gwdg.de/pub/x11/kde/stable|grep 'koffice-'|grep -v latest|sort -n -r|head -n 1|sed -e 's/.*-\(.*\)/\1/' -e 's|/||g'"
source=(ftp://ftp.fu-berlin.de/pub/unix/X11/gui/kde/stable/$pkgname-$pkgver/src/$pkgname-$pkgver.tar.bz2 \
	koffice-1.5-gcc-bug-workaround)
sha1sums=('e35bd08adfb3bf6acf195dd176147de1d6cf215a' \
          '06b4a301d475235ec6cd7967c97c339830d201b7')

subpkgs=("$pkgname-docs")
subdescs=('Koffice Documentation.')
subdepends=("$pkgname>=$pkgver")
subgroups=('kde-extra')
subarchs=('i686 x86_64')

build()
{
	Fcd
	Fpatch koffice-1.5-gcc-bug-workaround
	Fbuild CXXFLAGS="$CXXFLAGS -fno-strict-aliasing -Wno-deprecated" \
	       --disable-debug --without-debug \
	       --with-gnu-ld --disable-dependency-tracking \
	       --enable-new-ld-flags --enable-final --enable-kexi-reports
	Fsplit $pkgname-docs usr/share/doc
	##TODO: Split all other pkgs too
}

# optimization OK
