# Compiling Time: 33.64 SBU
# Contributor:  Kapolnasi Tamas <ktamas@tdc.hu>
# Maintainer: crazy <crazy@frugalware.org>

pkgname=koffice
pkgver=1.6.1
pkgrel=2
pkgdesc="An integrated Office suite for KDE"
url="http://www.koffice.org"
depends=('libkexif' 'pkgconfig' 'kdebase>=3.5.5' 'libpqxx>=2.6.8-2' 'wv2' 'libmysqlclient' 'libwpd' \
	'python>=2.5' 'ruby>=1.8.4-2' 'imagemagick' 'poppler-qt' 'graphicsmagick' 'readline')
makedepends=('doxygen' 'qt-docs>=3.3.6' 'kdebindings' 'mysql')
groups=('kde-extra')
archs=('i686' 'x86_64')
options=('nodocs' 'scriptlet')
up2date="lynx -dump http://ftp.gwdg.de/pub/x11/kde/stable|grep 'koffice-'|grep -v latest|sort -n -r|head -n 1|sed -e 's/.*-\(.*\)/\1/' -e 's|/||g'"
source=(ftp://ftp.fu-berlin.de/pub/unix/X11/gui/kde/stable/$pkgname-$pkgver/src/$pkgname-$pkgver.tar.bz2 \
	desktop-files.patch)
sha1sums=('891fb0a28ec3c4b070c4d6c2eae7fee1d2e37761' \
          'a5efbe2b1effecde988ef55cf65eebb5d8c95a4a')


subpkgs=("$pkgname-docs")
subdescs=('Koffice Documentation.')
subdepends=("$pkgname>=$pkgver")
subgroups=('kde-extra')
subarchs=('i686 x86_64')

build()
{

	Fbuild CXXFLAGS="$CXXFLAGS -fno-strict-aliasing -Wno-deprecated" \
	       --disable-debug --without-debug \
	       --with-gnu-ld --disable-dependency-tracking \
	       --enable-final --disable-warnings
	Fsplit $pkgname-docs usr/share/doc
	##TODO: Split all other pkgs too
}

# optimization OK
