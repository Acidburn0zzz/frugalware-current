# Compiling Time: 33.64 SBU
# Contributor:  Kapolnasi Tamas <ktamas@tdc.hu>
# Maintainer: crazy <crazy@frugalware.org>

pkgname=koffice
pkgver=1.6.0
pkgrel=2
pkgdesc="An integrated Office suite for KDE"
url="http://www.koffice.org"
depends=('libkexif' 'pkgconfig' 'kdebase>=3.5.5' 'libpqxx' 'wv2' 'libmysqlclient' 'libwpd' \
	'python>=2.5' 'ruby>=1.8.4-2' 'imagemagick' 'poppler-qt' 'graphicsmagick' 'readline')
makedepends=('doxygen' 'qt-docs>=3.3.6' 'kdebindings' 'mysql')
groups=('kde-extra')
archs=('i686' 'x86_64')
options=('nodocs' 'scriptlet')
up2date="lynx -dump http://ftp.gwdg.de/pub/x11/kde/stable|grep 'koffice-'|grep -v latest|sort -n -r|head -n 1|sed -e 's/.*-\(.*\)/\1/' -e 's|/||g'"
source=(ftp://ftp.fu-berlin.de/pub/unix/X11/gui/kde/stable/$pkgname-$pkgver/src/$pkgname-$pkgver.tar.bz2 \
	koffice-1.5-gcc-bug-workaround.patch desktop-files.patch)
sha1sums=('e34d57d0941884496bd3f99b85787697fb55692e' \
          '06b4a301d475235ec6cd7967c97c339830d201b7' \
          '2f6416a3d1ccd4c3c2817bb84bcb340fcea5e20f')

subpkgs=("$pkgname-docs")
subdescs=('Koffice Documentation.')
subdepends=("$pkgname>=$pkgver")
subgroups=('kde-extra')
subarchs=('i686 x86_64')

build()
{

	Fbuild CXXFLAGS="$CXXFLAGS -fno-strict-aliasing -Wno-deprecated" \
	       --disable-debug --without-debug \
	       --with-gnu-ld --disable-dependency-tracking \
	       --enable-final --enable-kexi-reports
	Fsplit $pkgname-docs usr/share/doc
	##TODO: Split all other pkgs too
}

# optimization OK
