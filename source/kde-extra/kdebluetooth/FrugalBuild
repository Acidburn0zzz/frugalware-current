# Last Modified: Mon, 19 Jun 2006 01:29:52 +0200
# Compiling Time: 2.41 SBU
# Maintainer: Kapolnasi Tamas <ktamas@tdc.hu>

pkgname=kdebluetooth
pkgver=1.0_beta1
pkgrel=7
pkgdesc="KDE Bluetooth Framework"
url="http://kde-bluetooth.sf.net/"
depends=('kdepim' 'dbus>=0.23.3' 'bluez-libs>=3.0' 'openobex>=1.3' 'xmms')
groups=('kde-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=89888|grep -m1 'kdebluetooth-'|sed 's/.*-\(.*\)\.t.*/\1/'"
source=(http://heanet.dl.sourceforge.net/sourceforge/kde-bluetooth/$pkgname-$pkgver.tar.bz2 fix_openobex gcc41 kde3.5.2)
sha1sums=('58787b1d11ec98b1de52ebbe1f236218a78f5c13' \
          '73088b4064305ec76f44c46fba4a18898b147a00' \
          '5739188197d4c615dd653ea7a9629bd29f7e6879' \
          '28f12995c61596b63241ebe083e40496d40a682f')

build()
{
        Fcd
	## yeah I know but do not change for now
	Fpatch fix_openobex
        Fpatch gcc41
	Fpatch kde3.5.2
        cd kdebluetooth/kbluetoothd/kcm_btpaired/
        Fsed '/etc/init.d/bluez-utils stop' '/etc/rc.d/rc.bluetooth stop' pairedtab.cpp
        Fsed '/etc/init.d/bluez-utils start' '/etc/rc.d/rc.bluetooth start' pairedtab.cpp

        cd ../../../../
        Fbuild --with-gnu-ld --enable-irmcsynckonnector \
		--enable-debug=full
	## full debug for now
}

# optimization OK
