# Last Modified: Tue Aug 31 12:26:33 CEST 2004
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=dhcp
pkgver=3.0.1
pkgrel=1
pkgdesc="DHCP server and client utilities"
url="http://www.isc.org/sw/dhcp/"
depends=('glibc')
backup=('etc/dhcpd.conf' 'etc/dhclient.conf')
up2date=`lynx -dump 'http://ftp.linux.hr/pub/isc/dhcp/?M=D'|grep '[0-9].tar.gz '|sed -n -e 's/.*-\(.*\)\.t.*/\1/' -e '2 p'`
source=(ftp://ftp.isc.org/isc/$pkgname/$pkgname-$pkgver.tar.gz rc.dhcpd)
md5sums=('44f72d16a12acc3fbe09703157aa42d2' 'bfa2502401a92dcd9308c73551e053de')

build() {
	cd $startdir/src/$pkgname-$pkgver
	./configure
	
	make || return 1
	
	make DESTDIR=$startdir/pkg INCDIR=/usr/include LIBDIR=/usr/lib install
	# init script
	mkdir -p $startdir/pkg/etc/rc.d/rc.messages
	install -m755 $startdir/rc.dhcpd $startdir/pkg/etc/rc.d/rc.dhcpd
	install -m644 $startdir/messages/dhcpd.* \
		$startdir/pkg/etc/rc.d/rc.messages/
	# config files
	install -D -m644 server/dhcpd.conf $startdir/pkg/etc/dhcpd.conf
	install -D -m644 client/dhclient.conf $startdir/pkg/etc/dhclient.conf
	touch $startdir/pkg/var/state/dhcp/dhcpd.leases
}

# vim: ft=sh
