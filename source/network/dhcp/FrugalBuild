# Last Modified: Mon, 21 Mar 2005 08:25:32 +0100
# Compiling Time: ~0.2 SBU
# Contributor: VMiklos <mamajom@axelero.hu>
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>

pkgname=dhcp
pkgver=3.0.3b1
pkgrel=1
pkgdesc="DHCP server and client utilities"
url="http://www.isc.org/sw/dhcp/"
depends=('glibc')
groups=('network')
backup=('etc/dhcpd.conf' 'etc/dhclient.conf')
up2date=`lynx -dump 'http://ftp.linux.hr/pub/isc/dhcp/?M=D'|grep '[0-9].tar.gz$'|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'`
source=(ftp://ftp.isc.org/isc/$pkgname/$pkgname-$pkgver.tar.gz rc.dhcpd \
	dhcp-3.0.2-fix-invalid-attribute.patch)
md5sums=('91ef957f689977bd4263c7f46cc3ab5d' 'bfa2502401a92dcd9308c73551e053de' \	'ca45269300d74a3a8750e0e64e8d92ea')

build()
{
	Fcd
	./configure
	make || return 1
	# what a fucked up Makefile :)
	Fmakeinstall INCDIR=$startdir/pkg/usr/include LIBDIR=$startdir/pkg/usr/lib USERBINDIR=$startdir/pkg/usr/bin BINDIR=$startdir/pkg/sbin ETC=$startdir/pkg/etc VARRUN=$startdir/pkg/var/run/ VARDB=$startdir/pkg/var/db FFMANDIR=$startdir/pkg/usr/share/man/man5 LIBMANDIR=$startdir/pkg/usr/share/man/man3 USRMANDIR=$startdir/pkg/usr/share/man/man1 ADMMANDIR=$startdir/pkg/usr/share/man/man8 CLIENTBINDIR=$startdir/pkg/sbin install
	Frcd dhcpd
	#wait for corrected F function, and change these:
	Fmkdir /etc/rc.d/rc.messages/
	Ffile ../messages/dhcpd.en /etc/rc.d/rc.messages/
	Ffile ../messages/dhcpd.hu /etc/rc.d/rc.messages/

	Ffile $pkgname-$pkgver/server/dhcpd.conf /etc/dhcpd.conf
	Ffile $pkgname-$pkgver/client/dhclient.conf /etc/dhclient.conf
	Fmkdir /var/state/dhcp/
	touch $Fdestdir/var/state/dhcp/dhcpd.leases
}

# vim: ft=sh
