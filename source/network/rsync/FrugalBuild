# Last Modified: Sat Oct  2 21:19:13 CEST 2004
# Compiling Time: ~2 minutes
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=rsync
pkgver=2.6.3
pkgrel=1
pkgdesc="An open source utility that provides fast incremental file transfer."
url="http://samba.anu.edu.au/rsync/"
backup=(etc/rsyncd.conf)
depends=('glibc')
install=$pkgname.install
up2date=`lynx -dump $url|grep 'released\.' |grep -v pre|sed -ne 's/.*n \(.*\) h.*/\1/' -e '1 p'`
source=(http://rsync.samba.org/ftp/rsync/$pkgname-$pkgver.tar.gz \
	rsyncd.conf rc.rsyncd)
md5sums=('2beb30caafa69a01182e71c528fb0393' 'f825a90a0baffba1cd1b38e3ec70b06f' \
	 '8e53c82ef7ffb2007d8f5e4b2a0e8fac')

build() {
	cd $startdir/src/$pkgname-$pkgver
	./configure --prefix=/usr --with-included-popt
	
	make || return 1
	
	make prefix=$startdir/pkg/usr install
	install -D -m 644 $startdir/src/rsyncd.conf \
		$startdir/pkg/etc/rsyncd.conf
	# init script
	mkdir -p $startdir/pkg/etc/rc.d/rc.messages
	install -m755 $startdir/rc.rsyncd $startdir/pkg/etc/rc.d/rc.rsyncd
	install -m644 $startdir/messages/rsyncd.* \
		$startdir/pkg/etc/rc.d/rc.messages/
}

# vim: ft=sh
