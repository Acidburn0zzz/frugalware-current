# Last Modified: Sat, 02 Apr 2005 10:52:29 +0200
# Compiling Time: ~0.3 SBU 
# Contributor: VMiklos <mamajom@axelero.hu>
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>

pkgname=rsync
pkgver=2.6.4
pkgrel=1
pkgdesc="An open source utility that provides fast incremental file transfer."
url="http://samba.anu.edu.au/rsync/"
groups=('network')
backup=(etc/rsyncd.conf)
depends=('glibc')
install=$pkgname.install
up2date="lynx -dump $url|grep 'released\.' |grep -v pre|sed -ne 's/.*n \(.*\) h.*/\1/' -e '1 p'"
source=(http://rsync.samba.org/ftp/rsync/$pkgname-$pkgver.tar.gz \
	rsyncd.conf rc.rsyncd)
md5sums=('a26c454a36148e0e873bedf3c0cc955d' 'f825a90a0baffba1cd1b38e3ec70b06f' \
	 '8e53c82ef7ffb2007d8f5e4b2a0e8fac')

build() {
	cd $startdir/src/$pkgname-$pkgver
	./configure --prefix=/usr --with-included-popt
	
	make || return 1
	
	make prefix=$startdir/pkg/usr install
	install -D -m 644 $startdir/src/rsyncd.conf \
		$startdir/pkg/etc/rsyncd.conf
	# init script
	mkdir -p $startdir/pkg/etc/rc.d/rc.messages
	install -m755 $startdir/rc.rsyncd $startdir/pkg/etc/rc.d/rc.rsyncd
	install -m644 $startdir/messages/rsyncd.* \
		$startdir/pkg/etc/rc.d/rc.messages/
}

# vim: ft=sh
