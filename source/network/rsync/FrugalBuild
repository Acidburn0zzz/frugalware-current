# Last Modified: Fri, 29 Jul 2005 17:56:30 +0200
# Compiling Time: ~0.3 SBU 
# Contributor: VMiklos <mamajom@axelero.hu>
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>

pkgname=rsync
pkgver=2.6.6
pkgrel=1
pkgdesc="An open source utility that provides fast incremental file transfer."
url="http://samba.anu.edu.au/rsync/"
groups=('network')
archs=('i686' 'x86_64')
backup=(etc/rsyncd.conf)
depends=('popt')
install=$pkgname.install
up2date="lynx -dump $url|grep 'released\.' |grep -v pre|sed -ne 's/.*n \(.*\) h.*/\1/' -e '1 p'"
source=(http://rsync.samba.org/ftp/rsync/$pkgname-$pkgver.tar.gz \
	rsyncd.conf rc.rsyncd)
md5sums=('30c4e2849cbeae93f55548453865c2f2' 'f825a90a0baffba1cd1b38e3ec70b06f' \
	 '8e53c82ef7ffb2007d8f5e4b2a0e8fac')

build() {
	Fcd	
	Fmake || return 1
	
	make prefix=$startdir/pkg/usr install
	install -D -m 644 $startdir/src/rsyncd.conf \
		$startdir/pkg/etc/rsyncd.conf
	# init script
	mkdir -p $startdir/pkg/etc/rc.d/rc.messages
	install -m755 $startdir/rc.rsyncd $startdir/pkg/etc/rc.d/rc.rsyncd
	install -m644 $startdir/messages/rsyncd.* \
		$startdir/pkg/etc/rc.d/rc.messages/
}

# vim: ft=sh

# optimalization OK
