# Last Modified: Sun, 25 Dec 2005 21:43:55 +0100
# Compiling Time: ~14 minutes
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=bind
pkgver=9.3.2
pkgrel=1
pkgdesc="DNS server and utilities"
backup=(etc/named.conf etc/logrotate.d/named)
depends=('openssl')
groups=('network')
archs=('i686' 'x86_64')
preup2date=`lynx -dump 'http://ftp.easynet.be/ftp/isc-bind/'|grep ']bind'|tail -n 1|sed 's|.*bind\([0-9]*\)/.*|\1|'`
up2date="lynx -dump http://ftp.easynet.be/ftp/isc-bind/bind$preup2date/\?M=D|grep '\.[0-9]/$'|sed -n -e 's|.*/\([0-9]\.[0-9]\.[0-9]\)/$|\1|' -e '1 p'"
source=(ftp://ftp.isc.org/isc/bind9/$pkgver/$pkgname-$pkgver.tar.gz rc.bind \
	bind)
sha1sums=('13efeaf496ed110980088fb5cbe22460f04a0fac' \
	  '9427de1a83a5f7a4eee2b07873bdeaac6ff75339' \
	  'fbbb38c459de0e5c07f158008877f9911faaf435')

build()
{
	Fbuild --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
		--with-libtool --enable-shared --disable-threads

	Frcd
	Ffile ../caching-example/named.conf /etc/named.conf
	Ffile ../caching-example/named.local \
		/var/named/caching-example/named.local
	Ffile ../caching-example/localhost.zone \
		/var/named/caching-example/localhost.zone
	Ffile ../caching-example/named.ca /var/named/caching-example/named.ca
	Ffile bind /etc/logrotate.d/bind
}

# vim: ft=sh

# optimalization OK
