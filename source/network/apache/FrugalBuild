# Last Modified: Wed Sep 15 23:44:54 CEST 2004
# Compiling Time: ~13 minutes
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=apache
pkgver=2.0.52
pkgrel=1
pkgdesc="A high performance Unix-based HTTP server (with SSL)"
backup=(etc/httpd/conf/{httpd,ssl}.conf)
depends=('glibc' 'gdbm' 'db' 'openssl' 'expat')
up2date=`lynx -dump http://httpd.apache.org/download.cgi |grep 'best available'|sed -n '1 p'|tr -s ' '|cut -d ' ' -f 3`
source=(http://www.apache.org/dist/httpd/httpd-$pkgver.tar.gz \
        mkcert.tar.gz rc.httpd httpd.conf ssl.conf)
# http://www.apache.org/dist/httpd/httpd-$pkgver.tar.gz.md5
md5sums=('eba528fa8613dc5bfb0615a69c11f053' \
         '1c384e41b221cd263256ec27abc80e3f' '70c4e00768aa92732b98ea9e4406d336' \
	 '69d39fefb281a91122eb6253119c9e3d' 'b306b161829ae0775262438dc68a176f')

build() {                              
  cd $startdir/src/httpd-$pkgver
  ./configure --prefix=/usr --enable-layout=RedHat --datadir=/var/www \
      --enable-modules=all --enable-mods-shared=all --enable-ssl --enable-so
  make || return 1                     
  make DESTDIR=$startdir/pkg install   
  cp -a ../mkcert/* $startdir/pkg/etc/httpd/conf/
  install -D -m644 ../httpd.conf $startdir/pkg/etc/httpd/conf/httpd.conf
  install -D -m644 ../ssl.conf $startdir/pkg/etc/httpd/conf/ssl.conf

  mkdir -p $startdir/pkg/etc/rc.d/rc.messages
  install -m755 $startdir/rc.httpd $startdir/pkg/etc/rc.d/rc.httpd
  install -m644 $startdir/messages/httpd.* $startdir/pkg/etc/rc.d/rc.messages
}

# vim: ft=sh
