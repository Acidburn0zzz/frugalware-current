# Last Modified: Sun, 18 Sep 2005 23:55:41 +0200
# Compiling Time: ~1 minute
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=rp-pppoe
pkgver=3.6
pkgrel=2
pkgdesc="Roaring Penguin PPPoE client"
url="http://www.roaringpenguin.com/pppoe/"
groups=('network')
archs=('i686' 'x86_64')
depends=('ppp')
backup=(etc/ppp/{pppoe.conf,firewall-standalone,firewall-masq,pppoe-server-options})
up2date="lynx -dump $url |grep tar.gz|sed -n -e 's/.*rp-pppoe-\(.*\)\.tar\.gz .*/\1/' -e '1 p'"
source=(http://www.roaringpenguin.com/penguin/pppoe/$pkgname-$pkgver.tar.gz \
	rc.adsl adslconfig)
sha1sums=('dccb8496c3a106aa83e40bd13e28547f91224f8d' \
	  '6caf1571b6053eb867a5621e4b7abc69aa301b1d' \
	  'defd6d1c3f5d442c9acf6e8fbaf02fe67994b5ef')

# the 2 magic commands to generate a new .po file from a new language
# bash --dump-po-strings adslconfig | xgettext -L PO -o adslconfig.pot -
# msginit -l $lang

build()
{
	Fcd
	cd src
	Fmake
	make RPM_INSTALL_ROOT=$Fdestdir install
	cd ../gui
	Fmake
	make RPM_INSTALL_ROOT=$Fdestdir install
	Frcd adsl
	Fexe /usr/sbin/adslconfig
	for i in $Fsrcdir/../po/*
	do
		Fmkdir /usr/share/locale/`basename $i .po`/LC_MESSAGES
		msgfmt -o $Fdestdir/usr/share/locale/`basename $i .po`/LC_MESSAGES/adslconfig.mo $i
	done
}

# vim: ft=sh

# optimalization OK
