# Last Modified: Tue, 15 Mar 2005 01:48:29 +0100
# Compiling Time: ~1 minutes
# Maintainer: Peter BARABAS <z0d@artifact.hu>

pkgname=openntpd
pkgver=3.6.1p1
pkgrel=2
pkgdesc="A free, easy to use implementation of the Network Time Protocol."
url="http://www.openntpd.org/"
groups=('network')
backup=('ntpd.conf')
depends=('glibc' 'openssl')
install=$pkgname.install
up2date="lynx -dump http://www.openntpd.org/|perl -wlne 'if(/Portable OpenNTPD (\d\.\d(\.\d)?[a-z]\d) released/) { print \$1; exit; }'"
source=(ftp://ftp.openbsd.org/pub/OpenBSD/OpenNTPD/$pkgname-$pkgver.tar.gz rc.ntpd)
md5sums=('4584f226523776a3cdd2fb6f8212ba8d' '447db59878d027edf448cab98415932a')

build() {
	cd $startdir/src/$pkgname-$pkgver
	./configure --prefix=/usr --sysconfdir=/etc

	make || return 1

	make prefix=$startdir/pkg/usr sysconfdir=$startdir/pkg/etc install

	mkdir -p $startdir/pkg/var/empty
	mkdir -p $startdir/pkg/etc/rc.d/rc.messages

	install -m 755 $startdir/rc.ntpd $startdir/pkg/etc/rc.d/rc.ntpd
	install -m 644 $startdir/messages/ntpd.* $startdir/pkg/etc/rc.d/rc.messages

}

# vim: ft=sh
