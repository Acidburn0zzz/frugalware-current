# Last Modified: Sat Jun 18 20:55:55 CEST 2005
# Compiling Time: ~2 minutes
# Contributor: VMiklos <mamajom@axelero.hu>
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>

pkgname=proftpd
pkgver=1.2.10
pkgrel=3
pkgdesc="Highly configurable GPL-licensed FTP server software"
url="http://www.proftpd.org/"
groups=('network')
archs=('i686' 'x86_64')
depends=('glibc' 'openssl' 'ncurses')
backup=(etc/{proftpd.conf,ftpusers})
up2date="pud -p http://wwpd.org/ -e 'Stable: (.*?)\s'"
source=(ftp://ftp.proftpd.org/distrib/source/$pkgname-$pkgver.tar.bz2 \
	rc.proftpd proftpd.conf ftpusers)
md5sums=('5feb4a7348e12faefc25e34fd92efdd6' '6d788b611dc682da929aaeb082923982' \
	 '48d354478eb0fa69c0a33e33778a4cf1' '41fd26576d7c2284af0944e99b82a633')

build() {
	cd $startdir/src/$pkgname-$pkgver
	./configure --prefix=/usr --sysconfdir=/etc --disable-pam \
		--enable-autoshadow --localstatedir=/var/run \
		--with-modules=mod_readme:mod_ratio:mod_tls:mod_wrap

	make || return 1
	
	make DESTDIR=$startdir/pkg install
	mkdir -p $startdir/pkg/home/ftp
	rm -f $startdir/pkg/etc/*
	install -m644 $startdir/src/proftpd.conf $startdir/pkg/etc/proftpd.conf
	install -m644 $startdir/src/ftpusers $startdir/pkg/etc/ftpusers
	mkdir -p $startdir/pkg/etc/rc.d/rc.messages
	install -m755 $startdir/rc.$pkgname $startdir/pkg/etc/rc.d/rc.$pkgname
	install -m644 $startdir/messages/$pkgname.* \
		$startdir/pkg/etc/rc.d/rc.messages
}

# vim: ft=sh
