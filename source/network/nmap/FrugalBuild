# Compiling Time: 0.34 SBU
# Maintainer: CSÉCSY László <boobaa@frugalware.org>

pkgname=nmap
pkgver=4.20
pkgrel=1
pkgdesc="A network exploration tool and security scanner"
url="http://www.insecure.org"
depends=('pcre' 'openssl')
makedepends=('gtk+2' 'libpcap')
groups=('network')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://download.insecure.org/nmap/dist/?M=D'|grep 'nmap-[0-9\.]*tgz$'|sed -n 's/.*-\(.*\)\.tgz/\1/;$ p'"
source=(http://download.insecure.org/$pkgname/dist/$pkgname-$pkgver.tar.bz2 nmap-logo-64.png)
sha1sums=('641bf8ec28313f3fd110d7fa84c3a233cf79c36b' \
	  'c36250c662ee9058974a2215c579c3f45ddaf2d0')

subpkgs=('nmapfe')
subdescs=('GTK+2 frontend for nmap')
subdepends=('gtk+2 nmap')
subgroups=('xapps')
subarchs=('i686 x86_64')

build()
{
	Fcd
	Fsed "icon-network" "/usr/share/pixmaps/nmap-logo-64.png" nmapfe.desktop
	Fbuild --with-libpcre=/usr --with-openssl=/usr/include/openssl \
		--with-libpcap=/usr
	Fmkdir /usr/share/pixmaps
	Ffile nmap-logo-64.png /usr/share/pixmaps/
	Fsplit nmapfe usr/bin/{nmapfe,xnmap}
	Fsplit nmapfe usr/man/man1/{nmapfe*,xnmap*}
	Fsplit nmapfe usr/share/applications/
	Fsplit nmapfe usr/share/pixmaps/
}

# optimization OK
