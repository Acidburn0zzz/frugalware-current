# Compiling Time: 1.02 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>
# Contributor: Artur Grunau <greenag@gmail.com>

pkgname=deluge
pkgver=0.5.6.2
pkgrel=1
pkgdesc="BitTorrent client written in Python and GTK+."
url="http://deluge-torrent.org/"
depends=('pygtk' 'pyxdg' 'boost' 'notify-python' 'notification-daemon')
groups=('gnome-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url/downloads-source | grep -m1 tar.gz | Flasttar"
source=(http://download.deluge-torrent.org/tarball/$pkgver/$pkgname-$pkgver.tar.gz \
	$pkgname-$pkgver-boostmt.diff)
_F_gnome_iconcache=y
Finclude gnome-scriptlet
sha1sums=('f7e48045f4a6d1b9d9327c414c0a3b576f882c0b' \
          '7447f2895af447c2ed02d41c7bf96291cc2833fd')

build()
{
	Fcd
	Fpatchall
	Fsed 'PREFIX = /usr/local' 'PREFIX = /usr' Makefile
	Fsed '--prefix=$(PREFIX)' '--prefix=$(PREFIX) --root=$(DESTDIR)' Makefile
	make || Fdie
	make DESTDIR=$Fdestdir install
	Fbuild_gnome_scriptlet
}

# optimization OK
