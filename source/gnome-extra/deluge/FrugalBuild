# Compiling Time: 0.01 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>
# Contributor: Artur Grunau <greenag@gmail.com>

pkgname=deluge
pkgver=0.4.1
pkgrel=1
pkgdesc="BitTorrent client written in Python and GTK+."
url="http://deluge-torrent.org/"
depends=('python-libtorrent' 'pygtk' 'pyxdg' 'notify-python' 'notification-daemon')
groups=('gnome-extra')
archs=('i686')
up2date="lynx -dump $url/wiki/Downloads | grep '$pkgname' | sed -n 's/.*http.*//;s/.*$pkgname-//;s/\.tar\.gz.*//p'"
source=(http://deluge-torrent.org/downloads/$pkgname-$pkgver.tar.gz)
_F_desktop_name="Deluge"
_F_desktop_categories="GNOME;Network;FileTransfer;P2P;"
_F_desktop_mime="application/x-bittorrent;"
_F_desktop_icon="deluge.png"
sha1sums=('648eb77b2e644b1c881b9038977ef13f1464dbda')

build()
{
	Fcd

	Fmkdir /usr/share/deluge
	Fmkdir /usr/share/deluge/{glade,pixmaps,plugins}

	# Copy main files
	Ffilerel *.py /usr/share/deluge/
	Ffilerel glade/*.glade /usr/share/deluge/glade
	Ffilerel pixmaps/*.png /usr/share/deluge/pixmaps
	Ffilerel plugins/*.{py,glade} /usr/share/deluge/plugins

	# Copy icon
	Ficonrel pixmaps/deluge-32.png
	Fmv /usr/share/pixmaps/deluge-32.png /usr/share/pixmaps/deluge.png

	# Create the deluge.desktop file
	Fdesktop2

	# Create a wrapper for deluge
	Fwrapper "python /usr/share/deluge/deluge.py" deluge
}

