# Compiling Time: 0.91 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>
# Contributor: Artur Grunau <greenag@gmail.com>

pkgname=deluge
pkgver=0.5.5
pkgrel=1
pkgdesc="BitTorrent client written in Python and GTK+."
url="http://deluge-torrent.org/"
depends=('pygtk' 'pyxdg' 'boost' 'notify-python' 'notification-daemon')
groups=('gnome-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url/downloads-source | grep -m1 tar.gz | Flasttar"
source=(http://download.deluge-torrent.org/tarball/$pkgver/$pkgname-$pkgver.tar.gz \
	deluge-$pkgver-boostmt.diff)
sha1sums=('edfa4d6c1da3771bcae1331b8b6d2de4ef4cd5d8' \
          '0f6b8a99a9df380fd5a7ff8a5c817ab3357bf071')

build()
{
	Fcd
	Fpatchall
	Fsed 'PREFIX = /usr/local' 'PREFIX = /usr' Makefile
	Fsed '--prefix=$(PREFIX)' '--prefix=$(PREFIX) --root=$(DESTDIR)' Makefile
	make || Fdie
	make DESTDIR=$Fdestdir install
}

# optimization OK
