# Compiling Time: 0.16 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=miro
_F_archive_name=Miro
pkgver=0.9.8.1
pkgrel=3
pkgdesc="The free and open source internet TV platform."
url="http://www.getmiro.com/"
depends=('gtk+2' 'pygtk' 'dbus-python' 'pyrex' 'libboost-mt>=1.34.1' 'xine-lib' 'db>=4.6.19'
	'nss' 'nspr' 'xulrunner' 'gnome-python-extras' 'gnome-python-extras-mozembed')
makedepends=('boost>=1.34.1')
groups=('gnome-extra')
replaces=('democracy')
conflicts=('democracy')
archs=('i686')
options=('scriptlet')
up2date="lynx -dump 'http://ftp.osuosl.org/pub/pculture.org/miro/src/?C=M;O=A'| Flasttar"
source=(http://ftp.osuosl.org/pub/pculture.org/$pkgname/src/Miro-$pkgver.tar.gz \
	qt-mt.pc dbus_python0.8_fixes.patch)
sha1sums=('9ffa7d8a58be22a613a48a88399a7f38382324fb' \
          '153e1902352eb4d724ec816b8097f01830178181' \
          'baed01f46d5606f106d01c573c9cbdf94044e961')

build()
{
	Fcd
	Fpatchall
	PKG_CONFIG_PATH=$PKG_CONFIG_PATH:$Fsrcdir
	cd platform/gtk-x11 || Fdie
	Fsed 'boost_python' 'boost_python-mt' setup.py
	python setup.py install --root=$Fdestdir || Fdie
}

# optimization OK
