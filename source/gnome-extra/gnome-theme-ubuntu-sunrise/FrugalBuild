# Compiling Time: 0.03 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>

pkgname=gnome-theme-ubuntu-sunrise
pkgver=2.2.2
pkgrel=1
pkgdesc="Ubuntu sunrise theme for Gnome."
url="http://www.bisigi-project.org"
depends=('gtk+2-engines-murrine')
makedepends=('imagemagick')
groups=('gnome-extra')
archs=('i686' 'x86_64')
_F_archive_name="ubuntu-sunrise-theme"
Fpkgversep="_"
up2date="elinks -dump 'https://launchpad.net/~bisigi/+archive/ppa/+packages' | Flasttar | sed 's/.karmic.ppa1+nmu1//g'"
source=("https://launchpad.net/~bisigi/+archive/ppa/+files/ubuntu-sunrise-theme_2.2.2.karmic.ppa1+nmu1.tar.gz" \
	"logo_fw128darkorange.png" \
	"ub-sunrise.patch")
sha1sums=('a91c947862252286e1a7e9f3430df442d4c14b7b' \
          '1d0781d0f67b2365baba5c78c3d6f8d982c10006' \
          '38ca1bc6ed7b5645115eebb70c2ee94f01520760')

build() {
	Fcd "ubuntu-sunrise-theme"
	Fmkdir usr/share/{themes,icons,pixmaps/backgrounds/gnome/nature,gnome-background-properties,emerald/themes}
	tar -xzf Gtk/ubuntu-sunrise.tar.gz -C Gtk/ || Fdie

	#Icons theme
	tar -xjf Icons/ubuntu-sunrise.tar.bz2 -C Icons/ || Fdie

	# fix some bad file permissions
	find Icons/ -type f -exec chmod -R 644 {} \;
	local _w=""
	for _w in {16x16,22x22,24x24,32x32}; do
		convert -resize $_w $Fsrcdir/logo_fw128darkorange.png Icons/ubuntu-sunrise/$_w/places/distributor-logo.png
		convert -resize $_w $Fsrcdir/logo_fw128darkorange.png Icons/ubuntu-sunrise/$_w/places/gnome-main-menu.png
		convert -resize $_w $Fsrcdir/logo_fw128darkorange.png Icons/ubuntu-sunrise/$_w/places/start-here.png
	done
	install -D -m644 $Fsrcdir/logo_fw128darkorange.png Icons/ubuntu-sunrise/scalable/places/distributor-logo.png || Fdie
	install -D -m644 $Fsrcdir/logo_fw128darkorange.png Icons/ubuntu-sunrise/scalable/places/gnome-main-menu.png || Fdie
	install -D -m644 $Fsrcdir/logo_fw128darkorange.png Icons/ubuntu-sunrise/scalable/places/start-here.png || Fdie

	#Emerald theme
	mkdir Emerald/ubuntu-sunrise || Fdie
	tar -xzf Emerald/ubuntu-sunrise.emerald -C Emerald/ubuntu-sunrise || Fdie

	# install files
	Fpatchall
	Fcprel Gtk/ubuntu-sunrise/ usr/share/themes/
	Fcprel Icons/ubuntu-sunrise/ usr/share/icons
	Finstallrel 644 Wallpaper/A_day_at_the_savannah.jpg usr/share/pixmaps/backgrounds/gnome/nature/
	Finstallrel 644 Wallpaper/A_day_at_the_savannah_wide.jpg usr/share/pixmaps/backgrounds/gnome/nature/
	Finstallrel 644 Wallpaper/ubuntu-sunrise-wallpaper.xml usr/share/gnome-background-properties
	Fcprel Emerald/ubuntu-sunrise usr/share/emerald/themes/
}
