# Compiling Time: 0.03 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>

pkgname=gnome-theme-eco
pkgver=1.3.0
pkgrel=1
pkgdesc="Eco theme for Gnome."
url="http://www.bisigi-project.org"
depends=('gtk+2-engines-murrine' 'x-cursors-dmz')
groups=('gnome-extra')
archs=('i686' 'x86_64')
_F_archive_name="eco-theme"
Fpkgversep="_"
up2date="elinks -dump 'https://launchpad.net/~bisigi/+archive/ppa/+packages' | Flasttar | sed 's/.karmic.ppa1//g'"
source=("https://launchpad.net/~bisigi/+archive/ppa/+files/eco-theme_1.3.0.karmic.ppa1.tar.gz" \
	"ftp://ftp.frugalware.org/pub/other/people/devil505/artwork/frugal-icon48.svg" \
	"eco.patch")
sha1sums=('db8619512c10df430d2de21513582aa61ec0b8b6' \
          '5864eed09d44dbc2c7b5b6e5bca3bd965d3bb25f' \
          'ed07f6ea36406ead5fa3cc54a66acf652b5c27be')

build() {
	Fcd "eco-theme"
	Fmkdir usr/share/{themes,icons,pixmaps/backgrounds/gnome/other,gnome-background-properties}
	tar -xzf Gtk/eco.tar.gz -C Gtk/ || Fdie

	#Icons theme
	tar -xjf Icons/eco.tar.bz2 -C Icons/ || Fdie
	local _w=""
	for _w in {16,22,24,48,64}; do
		cp ${startdir}/frugal-icon48.svg Icons/eco/places/$_w/distributor-logo.svg || Fdie
		cp ${startdir}/frugal-icon48.svg Icons/eco/places/$_w/gnome-main-menu.svg || Fdie
		cp ${startdir}/frugal-icon48.svg Icons/eco/places/$_w/start-here.svg || Fdie
	done
	# remove svg that prevent Frugalware logo to be displayed in main menu
	rm -f Icons/eco/apps/22/start-here.svg || Fdie
	rm -f Icons/eco/apps/24/start-here.svg || Fdie

	# install files
	Fpatchall
	Fcprel Gtk/eco/ usr/share/themes/
	Fcprel Icons/eco/ usr/share/icons
	Finstallrel 644 Wallpaper/eco.png usr/share/pixmaps/backgrounds/gnome/other/
	Finstallrel 644 Wallpaper/eco-wallpaper.xml usr/share/gnome-background-properties
	Fdocrel credits
}