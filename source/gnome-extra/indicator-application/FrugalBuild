# Compiling Time: 0.11 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>

pkgname=indicator-application
pkgver=0.2.90
pkgrel=1
pkgdesc="A library and indicator to take menus from applications and place them in the panel."
url="https://launchpad.net/indicator-application"
rodepends=('libappindicator>=$pkgver')
makedepends=('gtk-doc' 'gnome-common' 'vala' 'gobject-introspection')
groups=('gnome-extra')
archs=('i686' 'x86_64')
up2date="Flasttar $url"
Finclude python
source=($url/0.2/$pkgver/+download/$pkgname-$pkgver.tar.gz \
	no-mono-bindings.patch \
	fix-python-bindings.patch)
	## No mono bindings because we don't have mono-nunit
sha1sums=('20a90e319380845cbe598b5fa566b05b5e3d7dab' \
          '0b051cb1ee801fbceb821a11b2d3a6f7f189fbf1' \
          '8888ceb08129ffa007913eceb4672f82d3376ffc')

subpkgs=("${subpkgs[@]}" "libappindicator")
subdescs=("${subdescs[@]}" "Library for Application Indicators")
subdepends=("${subdepends[@]}" "libindicator>=0.3.14 libdbusmenu")
subrodepends=("${subrodepends[@]}" "")
subgroups=("${subgroups[@]}" 'xlib-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64')

subpkgs=("${subpkgs[@]}" "python-appindicator")
subdescs=("${subdescs[@]}" "Python bindings for libappindicator")
subdepends=("${subdepends[@]}" "pygtk pygobject libindicator libdbusmenu")
subrodepends=("${subrodepends[@]}" "libappindicator>=$pkgver")
subgroups=("${subgroups[@]}" 'devel-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64')

build() {
  Fcd
  Fpatchall
  ./autogen.sh --prefix=/usr --disable-static || Fdie
  Fmake --enable-introspection=yes
  Fmakeinstall
  Fsplit python-appindicator usr/share/pygtk
  Fsplit python-appindicator $_F_python_libdir
  Fsplit libappindicator usr/share/gtk-doc/html/libappindicator
  Fsplit libappindicator usr/lib/libappindicator*
  Fsplit libappindicator usr/include/libappindicator-0.1
  Fsplit libappindicator usr/lib/girepository-1.0/
  Fsplit libappindicator usr/share/vala/vapi/
  Fsplit libappindicator usr/lib/pkgconfig/appindicator-0.1.pc
}

# optimization OK
