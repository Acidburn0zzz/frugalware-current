# Compiling time: ~1.6 SBU
# Contributor: Laszlo Dvornik <dvornik@gnome.hu>
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=dia
pkgver=0.95.1
pkgrel=1
pkgdesc="A program for drawing structured diagrams"
url="http://www.gnome.org/projects/dia/"
depends=('libgnomeui' 'pygtk' 'atk' 'libsm' 'libxslt' 'freetype2' 'pango')
makedepends=('intltool' 'pyxml' 'docbook-xsl')
rodepends=('scrollkeeper' 'desktop-file-utils')
groups=('gnome-extra')
archs=('i686' 'x86_64')
Finclude gnome
up2date="lynx -dump $url/downld.html |grep Do.*ver |sed -ne 's/.*ion //;1p'"
#source=(${source[@]} dia-0.94-CVE-2006-2480_CVE-2006-2453.patch)
source=(ftp://ftp.gnome.org/pub/gnome/sources/dia/0.95/dia-0.95-1.tar.bz2)
_F_cd_path=$pkgname-0.95-1
sha1sums=('887482cd25735ede7465302cb10b8c3efdc1da15')

build() {
	find . -name Makefile.in -exec sed -i -e 's/-scrollkeeper-update.*//' {} \;
	if [ -f omf.make ]; then
		sed -i -e 's/-scrollkeeper-update.*//' omf.make
	fi
	Fbuild --enable-gnome --with-python --with-gnu-ld
}

# optimization OK
