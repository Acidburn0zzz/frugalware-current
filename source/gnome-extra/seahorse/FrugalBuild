# Last Modified: Wed, 20 Sep 2006 07:11:59 +0530
# Compiling Time: 0.46 SBU
# Maintainer: Priyank <priyankmg@gmail.com>

pkgname=seahorse
pkgver=0.9.5
pkgrel=1
pkgdesc="GNOME application for managing PGP keys"
url="http://seahorse.sourceforge.net/"
depends=('gtksourceview' 'gpgme' 'libsoup' 'nautilus' 'libnotify' 'openssh')
makedepends=('gedit' 'gettext' 'openldap' 'intltool' 'pkgconfig' 'gnome-doc-utils')
groups=('gnome-extra')
archs=('i686' 'x86_64')
nondevel=1
_F_gnome_schemas=('/etc/gconf/schemas/seahorse-gedit.schemas'
        '/etc/gconf/schemas/seahorse.schemas')
_F_gnome_scrollkeeper="y"
_F_gnome_desktop="y"
Finclude gnome gnome-scriptlet
sha1sums=('ed1a62ae2742172b657089b7ee6807db3264d684')

build()
{
	unset MAKEFLAGS
	Fsed 'chmod u+s $(bindir)' 'chmod u+s $(DESTDIR)$(bindir)' agent/Makefile.in
	Fsed 'mkdir -p $(datadir).*' '' plugins/nautilus/Makefile.in
	Fsed 'update-mime-database $(datadir).*' '' plugins/nautilus/Makefile.in

	Fconf --enable-ldap --enable-hkp --enable-gedit \
	--enable-nautilus --enable-agent \
	--enable-libnotify

	cd libcryptui
	make || return 1
	cd ..

	cd libseahorse
	make || return 1
	cd ..

	make || return 1
	Fmakeinstall GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 DESTDIR=$Fdestdir
	Fbuild_gnome_scriptlet
}

# optimization OK
