# Compiling Time: 0.67 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=mldonkey
pkgver=2.8.1
pkgrel=1
pkgdesc="mldonkey is a new client to access the eDonkey network. It is written in Objective-Caml, and comes with its own GTK GUI, an HTTP interface and a telnet interface."
url="http://www.nongnu.org/mldonkey"
depends=('librsvg' 'gd' 'lablgtk2')
groups=('gnome-extra')
archs=('x86_64' 'i686')
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=156414 | grep Latest.*No | sed 's/.*]\([0-9\.]*\) .*N.*/\1/'"
source=(http://heanet.dl.sourceforge.net/sourceforge/mldonkey/$pkgname-$pkgver.tar.bz2)
sha1sums=('c8ce8fd2b9fa4cbe147389893d2007edba054c35')

build() {
	Fcd
	Fconf --sysconfdir=/etc/mldonkey \
	    --sharedstatedir=/var/mldonkey \
	    --localstatedir=/var/mldonkey \
	    --enable-checks \
	    --enable-pthread \
	    --enable-pthread-lib \
	    --enable-gtk2
	export OCAMLRUNPARAM="l=256M"
	make || Fdie
	Fmakeinstall
}

# optimization OK
