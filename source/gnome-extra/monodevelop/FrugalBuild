# Compiling time: 0.43 SBU
# Maintainer: AlexExtreme <alex@alex-smith.me.uk>

pkgname=monodevelop
pkgver=0.13.1
pkgrel=1
pkgdesc="A project to port SharpDevelop to Gtk#"
url="http://www.mono-project.com/"
depends=('gecko-sharp' 'gtksourceview-sharp' 'shared-mime-info' 'mono-tools' 'firefox>=2.0.0.2' 'ikvm' 'boo' 'gnome-sharp')
makedepends=('intltool')
groups=('gnome-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://www.go-mono.com/sources-stable/'|grep monodevelop-[0-9\.]*.tar.gz | sed -n 's/.*-\(.*\).t.*/\1/;1 p'"
source=(http://www.go-mono.com/sources/$pkgname/$pkgname-$pkgver.tar.gz \
	boo_mimetype.patch \
	firefox.patch \
	autogen.sh \
	update_templates_for_gtk_sharp_2.8.x.patch)
options=('scriptlet' 'force')
_F_gnome_desktop=y
_F_gnome_mime=y
Finclude gnome-scriptlet mono
sha1sums=('d0d0d004504c06ab7323bf979701b101f54eb913' \
	  '719b456cee8e5e2b4cf3778915464c191f246d98' \
	  '12370d93a8ceb646d971605999796330a45bf36e' \
	  '7e138cb136265162cdaf86520c4781b6ff2b9192' \
	  'db0fe450ef76f83853179bd0fd557f408175c3ee')
Fconfopts="$Fconfopts --enable-java --enable-boo --enable-nunit --enable-versioncontrol"

build() {
	Fmonoexport
	Fcd
	Fpatchall
	chmod 755 ../autogen.sh || Fdie
	NOCONFIGURE=y ../autogen.sh || Fdie
	## won't build without on an SMP system
	unset MAKEFLAGS
	Fmake
	Fmakeinstall
	Fmonocleanup
	Fbuild_gnome_scriptlet
}
