diff -Naur libucil-0.9.8//src/ucil_png.c libucil-0.9.8-2//src/ucil_png.c
--- libucil-0.9.8//src/ucil_png.c	2010-01-17 08:49:29.000000000 +0100
+++ libucil-0.9.8-2//src/ucil_png.c	2010-05-30 23:09:21.727065919 +0200
@@ -77,7 +77,7 @@
    if (info_ptr == NULL)
    {
       fclose(fp);
-      png_destroy_read_struct(&png_ptr, png_infopp_NULL, png_infopp_NULL);
+      png_destroy_read_struct(&png_ptr, NULL, NULL);
       return( -1 );
    }
 
@@ -89,7 +89,7 @@
    if (setjmp(png_jmpbuf(png_ptr)))
    {
       /* Free all of the memory associated with the png_ptr and info_ptr */
-      png_destroy_read_struct(&png_ptr, &info_ptr, png_infopp_NULL);
+      png_destroy_read_struct(&png_ptr, &info_ptr, NULL);
       fclose(fp);
       /* If we get here, we had a problem reading the file */
       return( -1 );
@@ -109,7 +109,7 @@
     * adjustment), then you can read the entire image (including
     * pixels) into the info structure with this call:
     */
-   png_read_png(png_ptr, info_ptr, PNG_TRANSFORM_IDENTITY, png_voidp_NULL);
+   png_read_png(png_ptr, info_ptr, PNG_TRANSFORM_IDENTITY,NULL);
 
    /* At this point you have read the entire image */
    
@@ -174,7 +174,7 @@
    }
 
    /* clean up after the read, and free any memory allocated - REQUIRED */
-   png_destroy_read_struct(&png_ptr, &info_ptr, png_infopp_NULL);
+   png_destroy_read_struct(&png_ptr, &info_ptr, NULL);
 
    /* close the file */
    fclose(fp);
