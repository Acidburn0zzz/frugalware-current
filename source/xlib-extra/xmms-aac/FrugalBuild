# Compiling Time: 0.01 SBU
# Maintainer: AlexExtreme <alex@alex-smith.me.uk>

pkgname=xmms-aac
pkgver=2.0
pkgrel=1
pkgdesc="ISO AAC audio decoder plugin for xmms"
_F_sourceforge_dirname="faac"
_F_sourceforge_name="faad2"
Finclude sourceforge
url="http://www.audiocoding.com/faac.php"
depends=('libstdc++' 'xmms' 'faad2')
groups=('xlib-extra')
archs=('i686' 'x86_64')
makedepends=('libsndfile' 'id3lib')
up2date="lynx -dump 'http://prdownloads.sourceforge.net/faac/?sort_by=date&sort=desc'|grep faad2-[0-9\.]*.tar.gz|sed -n 's/.*-\(.*\).t.*/\1/;1 p'"
source=($source faad2-makefile.patch faad2-2.0-amd64.patch faad2-2.0-gcc{34,4}.patch)
sha1sums=('fc9f8d0812a9f46bbd851880045131e0e4ab08b8' \
	  '2f5dccc9b0667477770cd4c4c5953ee695048660' 'c0e7c817365bd7d7c071472cd4274724b7322bfb' \
	  'cb40a5a2c669864ed31d3824692dc3802a4f5e9d' '429cb9086d8a1305a1fd6bdec1ab8906bd65b7da')

build()
{
	Fcd faad2
	Fpatch faad2-makefile.patch
	Fpatch faad2-2.0-gcc34.patch
	Fpatch faad2-2.0-gcc4.patch
	[ "$CARCH" == "x86_64" ] && Fpatch faad2-2.0-amd64.patch
	chmod +x bootstrap
	./bootstrap
	Fmake --with-mp4v2 --with-xmms
	Fmakeinstall
	Frm usr/{bin,include} usr/lib/*.{la,0,so,a}
}
# optimalization OK
