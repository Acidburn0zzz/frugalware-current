# Compiling Time: 1.97 SBU
# Maintainer: Melko <melko@frugalware.org>

pkgname=openimageio
pkgver=1.7.7
pkgrel=5
pkgdesc="A library for reading and writing images, including classes, utilities, and applications."
url="http://www.openimageio.org/"
depends=('libboost>=1.61.0' 'opencv>=3.1.0-9' 'glew>=1.13.0-4' 'ilmbase>=2.2.0-6' 'openssl')
makedepends=('boost>=1.61.0')
groups=('xlib-extra')
archs=('i686' 'x86_64')
_F_cmake_confopts="	-DCMAKE_INSTALL_PREFIX=/usr -DUSE_OPENSSL=ON \
-DUSE_PYTHON=ON -DPYLIB_INSTALL_DIR='lib/python2.7/site-packages' \
-DOIIO_BUILD_TESTS=OFF -DOIIO_BUILD_TOOLS=ON"
Finclude cmake python
_F_archive_name="Release"
_F_archive_grepv="beta\|RC\|dev"
up2date="Flasttar https://github.com/OpenImageIO/oiio/releases"
source=("https://github.com/OpenImageIO/oiio/archive/$_F_archive_name-$pkgver.tar.gz" \
	openimageio-fix-i686.patch)
sha1sums=('61438bae3f35fc198a8b0e77ae85547a8b921b02' \
          '8c001552d1d54b9b554df7bc0765b6f9bd792ab9')
_F_cd_path="oiio-Release-$pkgver"

build() {
	CMake_build
	make || Fdie
}

# optimization OK
