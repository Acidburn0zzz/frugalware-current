# Compiling Time: 0.27 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>

pkgname=lightspark
pkgver=0.4.5
pkgrel=1
pkgdesc='High performance flash player designed from scratch to be efficient on modern hardware'
url="https://launchpad.net/lightspark"
depends=('libboost-mt' 'ffmpeg' 'curl' 'gtk+2-libs' 'ftgl' 'glew' 'libxml++' 'gdk-pixbuf2' 'pulseaudio' 'dbus')
makedepends=('nasm' 'xulrunner' 'glproto' 'boost' 'llvm>=2.7')
_F_gnome_iconcache="y"
_F_gnome_desktop="y"
Finclude cmake gnome-scriptlet
groups=('xlib-extra')
archs=('i686' 'x86_64')
up2date="Flasttar $url"
source=($url/trunk/$pkgname-0.4.5/+download/$pkgname-$pkgver.tar.gz)
sha1sums=('3b0db70c20b67ed3e758b75fe31d885e916a3870')

build() {
    Fcd
    # avoid llvm 2.8 bug for now
    sed -i '22i#define alignof _alignof' scripting/abc.h || Fdie
    CMake_build -DCMAKE_INSTALL_PREFIX=/usr \
    -DCOMPILE_PLUGIN=1 \
    -DCMAKE_BUILD_TYPE=Release \
    -DGNASH_EXE_PATH=/usr/bin/gtk-gnash
    Fbuild_gnome_scriptlet
}

# optimization OK

