# Compiling Time: 0.86 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=qwt
pkgver=5.0.2
pkgrel=1
pkgdesc="2D plotting library (Qt4)"
depends=('libqtsvg')
makedepends=('qt4-designer')
groups=('xlib-extra')
archs=('i686')
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge
source=($source config.pri.patch)
sha1sums=('f1a415847691e271e9f6b3b243ab2e7cb270a034' \
          'bfb42f6f6fa48977839588fff7cb1b09f9d475f2')

subpkgs=("$pkgname-docs" "$pkgname-designer-plugin")
subdescs=('Documentation for Qwt' 'Qwt Qt4 Designer Plugin.')
subdepends=('' "$pkgname=$pkgver qt4-designer")
subgroups=('docs-extra' 'xlib-extra')
subarchs=('i686' 'i686')

build()
{
	## WOW what a nice build system ;)
	unset MAKEFLAGS

	Fcd
	Fpatchall
	/usr/bin/qmake qwt.pro || Fdie
	make || Fdie
	cd designer || Fdie
	/usr/bin/qmake designer.pro || Fdie
	make || Fdie
	make INSTALL_ROOT=$Fdestdir install || Fdie
	cd .. || Fdie
	make INSTALL_ROOT=$Fdestdir install || Fdie
	Fmkdir usr/share/doc/$pkgname-$pkgver
	Fmv usr/share/html usr/share/doc/$pkgname-$pkgver/
	Frm usr/share/man/man3/todo*
	Fsplit $pkgname-docs usr/share/doc/$pkgname-$pkgver/html
	Fsplit $pkgname-designer-plugin usr/lib/qt4
} 	

# optimization OK
