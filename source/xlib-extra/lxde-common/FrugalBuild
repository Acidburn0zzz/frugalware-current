# Compiling Time: 0.04 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=lxde-common
pkgver=0.5.0
pkgrel=4
pkgdesc="Common files of the LXDE Desktop"
depends=('glib2' 'libx11' 'dbus')
rodepends=('lxde-icon-theme')
replaces=('lxde-settings-daemon')
groups=('xlib-extra' 'lxde-desktop')
archs=('i686' 'x86_64' 'ppc')
_F_sourceforge_ext=".tar.gz"
_F_sourceforge_dirname="lxde"
_F_sourceforge_prefix="LXDE Common "
Finclude sourceforge
url="http://lxde.org/"
source=($source \
	http://ftp.frugalware.org/pub/other/artwork/lxde-frugalware/lxde-frugalware-0.5.2.tar.bz2 \
	Fix_Session.diff lxde-common-0.5.1-Launch-dbus-in-startlxde-when-needed.patch \
	lxde-common-0.5.1-Ensure-the-existance-of-the-Desktop-folder.patch \
	lxde-common-0.5.1-switch-from-pcmanfm-to-pcmanfm2.patch \
	lxde-common-0.5.1-Properly-set-XDG_MENU_PREFIX.patch \
	lxde-common-0.5.1-Fix-config-file-of-pcmanfm2.patch \
	lxde-frugalware-theme.diff)
sha1sums=('01a95b9f125616a0f195de4bef7255452b86d1e9' \
          '3843e7690f0b81da686f4670c6c555c4bc580797' \
          'db00750b7a899e77ef0ea75ae4484e2fa98a6d90' \
          '68658521b3efdb024073f3ae6c9c23a6dad6bf1c' \
          'bc9f62f79dbe6222c4e9f5d28b98146fe1272a3b' \
          'df09d4f6ac2ec74ed49b4f827806ab68e8eccdc2' \
          'e3ec89581b2f6be6024701089c4b3777bbd9ff0d' \
          'ca8bdf81e52132afe85eb5725da774d9a9ec5f05' \
          'ddd484ab4b2c9de47d8a6c303ec9795c68cef64b')

build() {
	Fcd
	Fpatchall
	Fmake
	Fmakeinstall
	Fmkdir /etc/X11/sessions/
	Fmkdir /usr/share/apps/kdm/sessions
	Fln /usr/share/xsessions/LXDE.desktop /usr/share/apps/kdm/sessions/LXDE.desktop
	Fln /usr/share/xsessions/LXDE.desktop /etc/X11/sessions/LXDE.desktop
	#frugalware theme
	cd .. || Fdie
	#background
	Fcprel lxde-frugalware.png usr/share/lxde/wallpapers/lxde-frugalware.png
	Fcprel lxde-frugalware_wide.png usr/share/lxde/wallpapers/lxde-frugalware_wide.png
	#menu launcher
	Fmkdir usr/share/lxpanel/images
	Fcprel lxde-fw.png usr/share/lxpanel/images/lxde-fw.png
}

# optimization OK
