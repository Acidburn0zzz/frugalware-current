# Compiling time: 4.32 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=ogre
pkgver=1.4.7
pkgrel=1
pkgdesc="A scene-oriented flexible 3D engine written in C++"
depends=('freeimage' 'libstdc++' 'zziplib' 'gtk+2' 'freetype2' 'libxau' 'libxdmcp' 'libxaw' 'libxml2' 'mesa' 'openexr')
groups=('xlib-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
Finclude sourceforge
url="http://www.ogre3d.org"
up2date="lynx -dump http://downloads.sourceforge.net/ogre/|grep -om1 'ogre-linux_osx\(.*\).tar.bz2'|sed 's/.*v\(.*\).t.*/\1/;s/-/./g'"
source=(http://$_F_sourceforge_mirror.dl.sourceforge.net/sourceforge/$pkgname/$pkgname-linux_osx-v$(echo $pkgver|tr '.' '-').tar.bz2)
_F_cd_path="${pkgname}new"
sha1sums=('d40c6c6500742aef8bb201265362d381ba2b7001')

subpkgs=("$pkgname-docs")
subdescs=("Ogre Documentation")
subdepends=()
subgroups=('docs-extra')
subarchs=('i686 x86_64')

build()
{
	Fcd
	find . -name CVS | xargs rm -rf || Fdie
	Fbuild \
		--with-gui=gtk --with-platform=GLX \
		--enable-openexr --disable-cg
	Fmkdir usr/share/doc/$pkgname-$pkgver/html
	cp -ra Docs/* $Fdestdir/usr/share/doc/$pkgname-$pkgver/html/ || Fdie
	Fsplit $pkgname-docs usr/share/doc/$pkgname-$pkgver/html
}

# optimization OK
