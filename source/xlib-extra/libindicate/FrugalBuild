# Compiling Time: 0.06 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>

pkgname=libindicate
pkgver=0.5.0
pkgrel=1
pkgdesc="A small library for applications to raise 'flags' on DBus for other components of the desktop to pick up and visualize."
url="https://launchpad.net/libindicate"
depends=('libdbusmenu>=0.3.98-3')
makedepends=('gnome-doc-utils' 'vala')
_F_mono_aot=0
Finclude mono python
groups=('xlib-extra')
archs=('i686' 'x86_64' 'ppc')
up2date="Flasttar $url"
source=($url/0.5/${pkgver}/+download/${pkgname}-${pkgver}.tar.gz)
sha1sums=('a421b03720486fd090f608326d3272acf751eaa2')

subpkgs=("${subpkgs[@]}" "$pkgname-gtk")
subdescs=("${subdescs[@]}" "GTK bindings for libindicate")
subdepends=("${subdepends[@]}" "gtk+2")
subrodepends=("${subrodepends[@]}" "$pkgname")
subgroups=("${subgroups[@]}" 'xlib-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" "$pkgname-python")
subdescs=("${subdescs[@]}" "Python bindings for libindicate")
subdepends=("${subdepends[@]}" "pygtk pygobject")
subrodepends=("${subrodepends[@]}" "$pkgname")
subgroups=("${subgroups[@]}" 'devel-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" "$pkgname-mono")
subdescs=("${subdescs[@]}" "Mono bindings for libindicate")
subdepends=("${subdepends[@]}" "gtk2-sharp")
subrodepends=("${subrodepends[@]}" "$pkgname")
subgroups=("${subgroups[@]}" 'devel-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

build()	{
	Fcd
	sed -i 's/-lpyglib-2\.0-python$PYTHON_VERSION/-lpyglib-2\.0-python/' configure{,.ac} || Fdie

	Fbuild_mono
	Fsplit $pkgname-gtk usr/lib/libindicate-gtk.*
	Fsplit $pkgname-gtk usr/include/libindicate-0.5/libindicate-gtk
	Fsplit $pkgname-gtk usr/share/gtk-doc/
	Fsplit $pkgname-gtk usr/lib/pkgconfig/indicate-gtk-0.5.pc
	Fsplit $pkgname-python $_F_python_libdir
	Fsplit $pkgname-python usr/share/pygtk/
	Fsplit $pkgname-mono usr/lib/mono/
	Fsplit $pkgname-mono usr/lib/indicate-sharp-0.1/
	Fsplit $pkgname-mono usr/lib/indicate-gtk-sharp-0.1/
	Fsplit $pkgname-mono usr/lib/pkgconfig/indicate-sharp-0.1.pc
    Fsplit $pkgname-mono usr/lib/pkgconfig/indicate-gtk-sharp-0.1.pc
}

# optimization OK
