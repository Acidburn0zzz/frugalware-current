# Compiling Time: 0.15 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=gtk-vnc
pkgver=0.4.2
pkgrel=5
pkgdesc="VNC viewer wigdet for GTK"
depends=('gtk+2>=2.20.0-2' 'libxau' 'libxdmcp' 'freetype2' 'gnutls' 'libgcrypt' 'libxdamage' \
	'libxext' 'libxml2>=2.7.8' 'pygtk' 'cyrus-sasl')
makedepends=('intltool' 'perl-text-csv' 'libtool')
_F_gnome_devel="y"
Finclude gnome
source=($source frambuffer.diff gdk3.diff motion.diff tlsShutdown.diff \
	gtk3.diff pixmap.diff unref.diff)
groups=('xlib-extra')
archs=('i686' 'ppc' 'x86_64')
Fconfopts="${Fconfopts[@]} --with-coroutine=gthread --enable-introspection=yes --enable-plugin=no"
sha1sums=('8aa76bbb6a47951d4692ebb1ac241fa7b3bda2ef' \
          'd9946a3b70b1d422b5f20adb15cafccd864211e3' \
          '628120a888a75ddbefeb4a62389baead71b97c8c' \
          'd9fe581576afbe199a5f86e657699381f37ef390' \
          '5f20b95c0d88d596dac638d5050ad5b2331174e1' \
          '4acc3447e42b48e02570b7a73ce645241b52015a' \
          'b88a1360c916f5cd5ad0b670ede68b5afd9fd50a' \
          '50f29841f6c00b451897d4aece69ace253189154')
unset MAKEFLAGS

subpkgs=('gtk3-vnc')
subdescs=('Vnc viewer widget for gtk+3')
subrodepends=('')
subdepends=('gtk+3>=2.99.3')
subarchs=('i686 x86_64 ppc')
subgroups=('xlib-extra')

subpkgs=("${subpkgs[@]}" 'gvnc-devel')
subdescs=("${subdescs[@]}" 'gvnc is a GObject for managing a VNC connection')
subrodepends=("${subrodepends[@]}" "$pkgname=$pkgver")
subdepends=("${subdepends[@]}" "")
subgroups=("${subgroups[@]}" 'xlib-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

build() {
	Fcd
	Fbuild --with-gtk=3.0
	Frm usr/include/gvnc*
	Frm /usr/lib/pkgconfig/gvnc-1.0.pc
	Fsplit gtk3-vnc usr/lib/libgtk-vnc-2.0.so.*
	Fsplit gtk3-vnc usr/lib/pkgconfig/*
	Fsplit gtk3-vnc usr/include
	Fsplit gtk3-vnc usr/lib/girepository-1.0/GtkVnc-2.0.typelib
	Fsplit gtk3-vnc usr/share/gir-1.0/GtkVnc-2.0.gir
	make clean
	Fmake --with-gtk=2.0
	Fmakeinstall
	Fsplit gvnc-devel usr/include/gvnc-1.0
	Fsplit gvnc-devel usr/lib/pkgconfig/gvnc-1.0.pc
}

# optimization OK
