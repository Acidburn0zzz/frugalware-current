# Compiling Time: 0.01 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=b43-fwcutter-airport
pkgver=009
pkgrel=1
pkgdesc="A tool which can extract Airport firmware from various source files."
_F_archive_name="b43-fwcutter"
url="http://bu3sch.de/b43/fwcutter"
depends=('kernel>=2.6.24')
groups=('network-extra')
archs=('!i686' '!x86_64' 'ppc')
#up2date="Flasttar $url"
# The newer version of fwcutter does not work with the good firmware
up2date="$pkgver"
source=("${url}/${_F_archive_name}-${pkgver}.tar.bz2")
sha1sums=('41e0f0217a4231b365290af8f7cd9ab1a8007683')

build()
{
	Fmake
	# normal
	$FTPAGENT http://downloads.openwrt.org/sources/broadcom-wl-4.80.53.0.tar.bz2
	tar xjf broadcom-wl-4.80.53.0.tar.bz2
	Fmkdir /lib/firmware
	Fexec ./b43-fwcutter -w $Fdestdir/lib/firmware broadcom-wl-4.80.53.0/kmod/wl_apsta.o
	Fexec ./b43-fwcutter -w $Fdestdir/lib/firmware broadcom-wl-4.80.53.0/kmod/wl_apsta_mimo.o
	Fmakeinstall PREFIX=$Fdestdir/usr install
}

# optimization OK
