# Compiling Time: 0.02 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=irssiotr
pkgver=0.1
pkgrel=1
pkgdesc="Off-The-Record messaging (OTR) for Irssi."
url="http://projects.tuxfamily.org/group.pl?name=irssiotr"
depends=('irssi' 'libotr')
Finclude cmake
groups=('network-extra')
archs=('i686')
up2date="lynx -source -dump http://git.tuxfamily.org/irssiotr/irssiotr.git|grep tags|sed 's/.*tags\/v\([^>]*\).>.*/\1/;s/-/_/g;q'"
source=("http://git.tuxfamily.org/irssiotr/irssiotr.git?p=gitroot%2Firssiotr%2Firssiotr.git;a=snapshot;h=v${pkgver/_/-};sf=tgz")
sha1sums=('70a127fe1cd0b943b694914faabba1fc74f3810b')

build()
{
	mv "`strip_url $source`" $pkgname-$pkgver.tar.gz
	Fextract $pkgname-$pkgver.tar.gz
	Fcd $pkgname
	_F_cmake_confopts="-DIRSSIOTR_VERSION=$pkgver"
	# prevent downlading these from SVN
	cp -v /usr/include/irssi/src/fe-text/* .
	CMake_build
	make || return 1
	make DESTDIR=$Fdestdir install
}

# optimization OK
