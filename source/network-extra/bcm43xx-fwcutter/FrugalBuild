# Compiling Time: 0.01 SBU
# Maintainer: Krisztian VASAS <iron@frugalware.org>
# Contributor: VMiklos <vmiklos@frugalware.org>

pkgname=bcm43xx-fwcutter
pkgver=011
pkgrel=1
pkgdesc="A tool which can extract firmware from various source files."
_F_archive_name="b43-fwcutter"
url="http://bu3sch.de/b43/fwcutter"
depends=('kernel>=2.6.25')
groups=('network-extra')
archs=('i686' 'x86_64')
#up2date="Flasttar $url"
# The newer version of fwcutter does not work with the good firmware
up2date="011"
source=("${url}/${_F_archive_name}-${pkgver}.tar.bz2" "README.Frugalware")
sha1sums=('d8a7a6e9f8eb7d22bf79d2ac89b4fa8b13bcdcda' \
          'c7cb3b3f37f56a16da70e1d674b565c18b1c589f')

build()
{
	Fmake
	$FTPAGENT http://frugalware.hu/wifi/b43/wl_apsta.o
	$FTPAGENT http://frugalware.hu/wifi/b43/wl_apsta_mimo.o
	Fmkdir /lib/firmware
	# For b43legacy module:
	./b43-fwcutter -w $Fdestdir/lib/firmware wl_apsta.o
	# For b43 module:
	./b43-fwcutter -w $Fdestdir/lib/firmware wl_apsta_mimo.o
	Fmakeinstall PREFIX=$Fdestdir/usr install
	Fdoc README.Frugalware
}

# optimization OK
