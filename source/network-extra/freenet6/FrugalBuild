# Compiling Time: 0.01 SBU
# Maintainer: Priyank <priyankmg@gmail.com>

pkgname=freenet6
pkgver=2.1.1
pkgrel=1
pkgdesc="Freenet6 IPv6 client"
url="http://www.freenet6.net/"
depends=('glibc')
groups=('network-extra')
backup=('etc/freenet6/tspc.conf')
archs=('i686')
up2date=$pkgver
source=(http://www.subterrain.net/code/tspc-$pkgver-src.tgz \
	tspc.conf rc.tspc README.Frugalware tspc-cflags.patch)
sha1sums=('55b1385fa860c6f2bbe63a6d2559eb6e8edea64b' \
	  '543c276de11962e3ea22a77dca10f51483f6b56c' \
	  '6862736696e3f9763a2d7f9809f8c226303753db' \
	  '3533a2d795c877a7a981754fa72e00f21f5b765f' \
	  '417b841556936578aa9236102b4b52abd43d51c7')

build()
{
	Fcd tspc2
	Fpatch tspc-cflags.patch
	make target=linux || Fdie
	Fexerel bin/tspc /usr/sbin/tspc
	
	# Copy the required configuration files and templates
	Fmkdir /etc/freenet6/template
	Finstall 600 tspc.conf /etc/freenet6
	Finstallrel 755 template/{linux,checktunnel}.sh /etc/freenet6/template
	
	# Copy the manpages
	Fmkdir /usr/share/man/{man5,man8}
	Ffilerel man/man5/tspc.conf.5 /usr/share/man/man5/
	Ffilerel man/man8/tspc.8 /usr/share/man/man8/
	
	# Copy the initscript
	Frcd2 tspc

	Fdoc README.Frugalware
}

# optimization OK
