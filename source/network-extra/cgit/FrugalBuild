# Compiling Time: 0.15 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=cgit
pkgver=0.7.1
gitver=1.5.3.6
pkgrel=1
pkgsha1="3383a4e765da6552250f312fd12de4ba03a7c9d3"
pkgdesc="A fast webinterface for git."
url="http://hjemli.net/git/cgit/"
depends=('zlib' 'openssl')
backup=(etc/{cgitrc,httpd/conf/modules.d/cgit.conf})
groups=('network-extra')
archs=('i686')
up2date="lynx -dump $url|grep -m1 http.*gz$|Flasttar"
source=("http://hjemli.net/git/cgit/blob/index.html?id=$pkgsha1\&path=cgit-$pkgver.tar.gz" \
	http://ftp.frugalware.org/pub/frugalware/frugalware-current/source/devel-extra/git/git-$gitver.tar.bz2 \
	cgit.conf)
sha1sums=('12cc6f98df83ba8146e40a906363adcd0f3c9947' \
	  '35f2df92046996a3b72a708e9408eb4d6d4d0e6f' \
	  'ba8bab178c3036d8d0e6743cc91c6ab5cd3efb7b')


build()
{
	Fcd cgit
	mv ../git-$gitver/* git/
	Fmake
	Fmakeinstall CGIT_SCRIPT_PATH=/var/www/cgit
	Ffilerel /etc/cgitrc
	Ffile /etc/httpd/conf/modules.d/cgit.conf
	Fmkdir /var/cache/cgit
	chown 99:99 $Fdestdir/var/cache/cgit
}

# optimization OK
