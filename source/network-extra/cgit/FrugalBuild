# Compiling Time: 0.15 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=cgit
pkgver=0.7.2
gitver=1.5.3.8
pkgrel=1
pkgsha1="3b1846754cef4732e285b23bba94bd76c5af8606"
pkgdesc="A fast webinterface for git."
url="http://hjemli.net/git/cgit/"
depends=('curl>=7.16.0' 'openssl')
backup=(etc/{cgitrc,httpd/conf/modules.d/cgit.conf})
groups=('network-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url|grep tag/|sed 's/.*=v//;q'"
source=("http://hjemli.net/git/cgit/blob/index.html?id=$pkgsha1\&path=cgit-$pkgver.tar.gz" \
	http://www.kernel.org/pub/software/scm/git/git-$gitver.tar.bz2 \
	cgit.conf)
sha1sums=('9aac5a40fa42dca467cc087cf63a4c8fbcf029da' \
	  'acca91988e674c5976e15a290be65f2775296162' \
	  'ba8bab178c3036d8d0e6743cc91c6ab5cd3efb7b')


build()
{
	Fcd
	mv ../git-$gitver/* git/
	Fmake
	Fmakeinstall CGIT_SCRIPT_PATH=/var/www/cgit
	Ffilerel /etc/cgitrc
	Ffile /etc/httpd/conf/modules.d/cgit.conf
	Fmkdir /var/cache/cgit
	chown 99:99 $Fdestdir/var/cache/cgit
}

# optimization OK
