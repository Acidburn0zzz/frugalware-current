# Compiling Time: 0.97 SBU
# Maintainer: Janny <janny@frugalware.org>

pkgname=mutt-ng
pkgver=20070125
muttver=1.5.13
pkgrel=1
pkgdesc="A fork of the well-known email client mutt."
url="http://mutt-ng.berlios.de"
groups=('network-extra')
archs=('i686' 'x86_64')
depends=('openssl' 'gdbm' 'libidn' 'gpgme' 'ncurses')
makedepends=('tetex' 'libxslt' 'docbook-xml' 'docbook-xsl' 'subversion')
conflicts=('mutt' 'mutt-devel')
backup=(etc/Muttrc)
options=('scriptlet')
up2date="$pkgver"
source=(http://mutt.kublai.com/nightlies/mutt-$pkgver.tar.gz)
sha1sums=('ccf520e3aabd095bb93a17872995eebcf83dfbd3')

build() 
{
	cd $Fsrcdir 
		svn co http://bereshit.synflood.at/svn/mutt-patches/trunk || Fdie
	Fcd mutt-${muttver}cvs
	for muttng in $(cat ../trunk/patches/series | cut -d ' ' -f 1); do
		Fpatch trunk/patches/${muttng}
	done
	./prepare || Fdie
	Fsed '-muttng' '-muttng-frugalware' sendlib.c
	Fbuild --with-docdir=/usr/share/doc/$pkgname-$pkgver --with-ssl --enable-gpgme \
	--enable-pgp --enable-smime --with-regex --enable-pop --enable-imap --enable-debug \
	--enable-nntp --enable-imap-edit-threads --enable-hcache --enable-nfs-fix \
	--enable-buffy-size --enable-mailtool --enable-compressed
	Ffilerel {PATCHES,ABOUT-NLS,OPS,OPS.{CRYPT,MIX,PGP,SMIME}} /usr/share/doc/$pkgname-$pkgver
}

# optimization OK
