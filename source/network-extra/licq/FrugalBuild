# Compiling Time: 0.61 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>

pkgname=licq
pkgver=1.3.6
pkgrel=1
pkgdesc="ICQ Client with v8 support"
depends=('openssl' 'libstdc++' 'gpgme')
makedepends=('boost' 'qt4' 'xosd' 'cdk')
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge cmake
groups=('network-extra')
archs=('i686')
sha1sums=('1451da41c82b9a13424c96d8641e642895b723ac')

subpkgs=('licq-qt4-gui' 'licq-msn' 'licq-autoreply' 'licq-osd' 'licq-email' 'licq-console' 'licq-rms')
subdescs=('QT4 gui of Licq.' 'Licq MSN protocol plugin.' 'Licq ICQ Auto Replyer Plugin.' 'licq-plugin to display new arriving messages as OSD.'  \
           'Licq ICQ Forwarder Plugin' 'Licq Console Plugin' 'Licq ICQ Remote Management Service Plugin')
subdepends=('qt4 licq' 'licq' 'licq' 'licq xosd' 'cdk licq' 'licq' 'licq')
subgroups=('xapps-extra' 'lib-extra' 'lib-extra' 'xlib-extra' 'lib-extra' 'lib-extra' 'lib-extra')
subarchs=('i686' 'i686' 'i686' 'i686' 'i686' 'i686' 'i686')
_F_cmake_confopts="-DWITH_KDE=OFF"

build() {
  Fcd

  cd plugins/msn || Fdie
  # Building msn plugin
  Fmake
  Fmakeinstall
  Fsplit licq-msn /usr

  cd ../auto-reply || Fdie
  # Building autoreply plugin
  Fmake
  Fmakeinstall
  Fsplit licq-autoreply /usr

  cd ../osd || Fdie
  # Building OSD plugin
  Fmake
  Fmakeinstall
  Fsplit licq-osd /usr

  cd ../email || Fdie
  # Building forwarder plugin
  Fmake
  Fmakeinstall
  Fsplit licq-email /usr

  cd ../console || Fdie
  # Building console plugin
  Fmake
  Fmakeinstall
  Fsplit licq-console /usr

  cd ../rms || Fdie
  # Building Remote Management Service plugin
  Fmake
  Fmakeinstall
  Fsplit licq-rms /usr

  cd ../qt4-gui || Fdie
  # Building qt4-gui
  CMake_make
  make DESTDIR=$Fdestdir install || Fdie
  Fsplit licq-qt4-gui /usr

  # Building licq
  cd ../../.. || Fdie
  GPGME_CONFIG=/usr/bin/gpgme-config ./configure --prefix=/usr || Fdie
  Fmake
  Fmakeinstall
}

# optimization OK
