# Compiling Time: 1.01 SBU
# Contributor: kikadf <kikadf.01@gmail.com>
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=strongswan
pkgver=5.0.1
pkgrel=2arcturus2
pkgdesc="the OpenSource IPsec-based VPN Solution for Linux"
url="http://www.strongswan.org/"
depends=('curl' 'gmp' 'iproute2' 'openssl' 'sqlite3')
groups=('network-extra')
archs=('i686' 'x86_64')
backup=(etc/{ipsec.conf,strongswan.conf})
_F_archive_grepv="dr\|rc"
up2date="Flasttar http://www.strongswan.org/download.htm"
source=(http://download.strongswan.org/strongswan-$pkgver.tar.bz2)
signatures=($source.sig)
_F_systemd_units=(strongswan=)
Finclude systemd

# FSA fix ***
source=(${source[@]} CVE-2013-5018.patch CVE-2013-6075.patch CVE-2014-2338.patch
                     strongswan-4.3.5-5.0.3_openssl_ecdsa_signature.patch
                     CVE-2014-2891.patch)
signatures=(${signatures} '' '' '' '' '')
# ***********

build()
{
	Fbuild --enable-curl --enable-eap-sim --enable-eap-sim-file --enable-eap-simaka-pseudonym \
		--enable-eap-simaka-reauth --enable-eap-identity --enable-eap-md5 \
		--enable-eap-gtc --enable-eap-aka --enable-eap-aka-3gpp2 \
		--enable-eap-mschapv2 --enable-eap-radius --enable-md4
	Fgenscriptlet
}

# optimization OK
