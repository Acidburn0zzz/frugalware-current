# Compiling Time: 0.15 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=liblangtag
pkgver=0.6.0
pkgrel=2
pkgdesc="An interface library to access tags for identifying languages"
url="http://tagoh.bitbucket.org/liblangtag/"
depends=('libxml2>=2.9.3-2')
makedepends=('gtk-doc' 'x11-protos' 'gobject-introspection')
groups=('xoffice')
archs=('i686' 'x86_64')
up2date="Flasttar https://bitbucket.org/tagoh/liblangtag/downloads"
source=(https://bitbucket.org/tagoh/$pkgname/downloads/$pkgname-$pkgver.tar.bz2 \
	0001-enum-must-be-declared-before-it-s-used.patch)
sha1sums=('ce312505d13ac62aa86c205256cc000569784951' \
          '7a56acfbc0de45b3aa07ceb5a5d907873b7a542b')

build()
{
	Fpatchall
	Fconf --disable-silent-rules --disable-static --enable-shared --enable-introspection
	sed -i \
		-e 's|^hardcode_libdir_flag_spec=.*|hardcode_libdir_flag_spec=""|g' \
		-e 's|^runpath_var=LD_RUN_PATH|runpath_var=DIE_RPATH_DIE|g' \
		libtool
	export LD_LIBRARY_PATH=`pwd`/liblangtag/.libs:`pwd`/liblangtag-gobject/.libs${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}
	make || return 1
	Fmakeinstall
}

# optimization OK
