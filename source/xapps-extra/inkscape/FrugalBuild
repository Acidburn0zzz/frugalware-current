# Compiling time: 4.23 SBU
# Maintainer: crazy <crazy@frugalware.org>
# Contributor: Shrift <shrift@frugalware.org>

pkgname=inkscape
pkgver=0.45.1
pkgrel=5
pkgdesc="A vector illustrator program for GNOME"
url="http://www.inkscape.org/"
depends=('openssl' 'lcms' 'cairomm' 'libgcc' 'atk' 'gtkmm>=2.10.10-3' 'glibmm' 'freetype2' 'libxcb' \
	'pango>=1.14.3' 'libgc>=6.4' 'glib2' 'gtkspell' 'popt' 'gtk+2>=2.10.7' 'python>=2.5' 'perl')
makedepends=('boost>=1.34.1' 'intltool' 'perl-xml-parser')
rodepends=('libxml2>=2.6.20' 'pyxml' 'libxslt')
groups=('xapps-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
Finclude sourceforge
source=($source bindings-compile-fix.patch BTS-2116.patch)

build()
{
	Fcd
	Fpatchall
	## Do not remove gcc 4.2* does funny things with the code without
	export CFLAGS="$CFLAGS -fno-strict-aliasing"
	export CXXFLAGS="$CXXFLAGS -fno-strict-aliasing -Wno-deprecated"
	Fautoreconf
	intltoolize -c -f || Fdie
	Fmake \
		 --without-gnome-print \
		--with-gnu-ld \
		--without-gnome-vfs \
		--enable-lcms \
		--with-perl \
		--with-python \
		--enable-inkboard \
		--with-xft
		## Debug
		## --enable-debug --with-debug
	Fmakeinstall
}

sha1sums=('f3df9eafc0fdfcc5f5024ea4bec4d7c477698380' \
          '85d9b4a7bf718a51efa13eb40fcc01a2d9378734' \
          'ddcb89e80b8b19c53c0994e9b472026bc1a2d200')
# optimization OK
