# Compiling time: 0 SBU
# Maintainer: Cedrick Hannier alias Cedynamix <cedynamix@gmail.com>

pkgname=xmind
extrapkg=portable
pkgver=3.0.3
extraver=200904291819
pkgrel=1
pkgdesc="Brainstorming and Mind Mapping Software"
url="http://www.xmind.net"
groups=('xapps-extra')
depends=('j2re' 'glibc')
archs=('i686' 'x86_64')
_F_cd_path="./"
up2date="lynx -dump http://www.xmind.net/downloads/ | grep $extrapkg-[0-9\.]*zip$ | sed 's/$extrapkg-\(.*\).$extraver.zip/\1/' | Flastarchive"
source=(http://dl.xmind.org/$pkgname-$extrapkg-$pkgver.$extraver.zip \
	$pkgname.desktop $pkgname.png)
sha1sums=('698f3270bf4ea55c34f6c2fe836a0431afcd4235' \
          '89c9837c8c0e316dcab7edbaee95006bead36280' \
          '1aeaea5206627c760ba7fd25a9c87a942b9687eb')

build() {
	Fcd
	rm $pkgname-$extrapkg-$pkgver.$extraver.zip
	Fmkdir /usr/{bin,share/{pixmaps,applications,xmind}}
	Finstall 644 xmind.desktop /usr/share/applications/
	Ficon xmind.png
	find $Fsrcdir/ -maxdepth 1 -type f -exec cp {} $Fdestdir/usr/share/xmind/ \;  || Fdie
	Fcp Commons /usr/share/xmind/
	if [ "$CARCH" == "i686" ]; then
		SUBDIR="XMind for Linux"
	elif [ "$CARCH" == "x86_64" ]; then
		SUBDIR="XMind for Linux 64bit"
	fi
	cp -a "$Fsrcdir/$SUBDIR" "$Fdestdir/usr/share/xmind/" || Fdie
	ln -sf "/usr/share/xmind/$SUBDIR/xmind" $Fdestdir/usr/bin/  || Fdie
}
