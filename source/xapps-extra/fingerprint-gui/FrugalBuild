# Compiling Time: 0.61 SBU
# Maintainer: kikadf <kikadf.01@gmail.com>

pkgname=fingerprint-gui
pkgver=1.04
pkgrel=1
pkgdesc="Fingerprint GUI is an application providing fingerprint-based authentication on Linux desktops."
url="http://www.n-view.net/Appliance/fingerprint/"
depends=('libfprint' 'polkit-qt-1' 'qca-ossl' 'libfakekey' 'libusb')
_F_desktop_name="Fingerprint-GUI"
_F_desktop_icon="Fingerprint.png"
groups=('xapps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url | sed -n 's/.*Version \(.*\)/\1/p'"
source=($url/download/$pkgname-$pkgver.tar.gz qt4-gcc-qmake.patch)
sha1sums=('1f7f003ff8947d9c15fe8ab0f8359de13266d4b0' \
          'dbe36dabf099e1bdf01a7df931c2e52d85ab4beb')

build()
{
	Fpatchall
	qmake LIBPOLKIT_QT=LIBPOLKIT_QT_1_1 || Fdie
	Fmake
	Fmakeinstall INSTALL_ROOT=$Fdestdir/
	[ "$CARCH" == "xi686" ] && Ffile $_F_cd_path/upek/lib/libbsapi.so /usr/lib/libbsapi.so
	[ "$CARCH" == "x86_64" ] && Ffile $_F_cd_path/upek/lib64/libbsapi.so /usr/lib/libbsapi.so
	Ffile $_F_cd_path/upek/91-fingerprint-gui-upek.rules /etc/udev/rules.d/91-fingerprint-gui-upek.rules
	Ffile $_F_cd_path/upek/upek.cfg /etc/upek.cfg
	Fmkdir /var/upek_data
	Fmv /usr/share/doc/$pkgname /usr/share/doc/$pkgname-$pkgver
	Ficon $_F_cd_path/src/res/Fingerprint.png
	Fdesktop2
}


# optimization OK
