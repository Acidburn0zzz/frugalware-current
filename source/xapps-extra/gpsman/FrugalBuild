# Last Modified: Wed, 26 Jul 2006 00:16:43 +0530
# Compiling Time: ~0 SBU
# Maintainer: Priyank <priyankmg@gmail.com>

pkgname=gpsman
pkgver=6.3.1
pkgrel=1
pkgdesc="GPSMan is a graphical manager of GPS data that makes possible \
	the preparation, inspection and edition of GPS data in a friendly environment"
url="http://www.ncc.up.pt/gpsman/"
depends=('tcl' 'tk')
groups=('xapps-extra')
archs=('i686')
up2date="lynx -dump $url | grep New | sed 's/.*se \(.*\) on.*/\1/'"
source=($url/gpsmanhtml/$pkgname-$pkgver.tgz)
sha1sums=('b8ec9b309d4b9f80270a8d021d39c2fa96258241')

build() {
	Fcd

	# Fix source dir in binaries
	Fsed "set SRCDIR.*" "set SRCDIR /usr/share/gpsman" gpsman.tcl
	Fsed "set SRCDIR.*" "set SRCDIR /usr/share/gpsman" util/mb2gmn.tcl
	Fsed "set SRCDIR.*" "set SRCDIR /usr/share/gpsman" util/mou2gmn.tcl

	# Install Binaries
	Fmkdir usr/bin
	Fexerel gpsman.tcl usr/bin/
	Fexerel util/* usr/bin/

	# Copy documentation
	Fmkdir usr/man/man1
	Ffilerel man/man1/gpsman.1 usr/man/man1/
	Fdocrel LICENSE manual/GPSMandoc.pdf
	Fmkdir usr/share/doc/gpsman-$pkgver/html
	cp -R manual/html/* $Fdestdir/usr/share/doc/gpsman-$pkgver/html/

	# Copy misc files
	Fmkdir usr/share/gpsman
	Fexerel gmsrc/*.tcl usr/share/gpsman

	# Copy icons
	Fmkdir usr/share/gpsman/gmicons
	cp -R gmsrc/gmicons/* $Fdestdir/usr/share/gpsman/gmicons/
}

