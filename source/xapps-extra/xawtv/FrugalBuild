# Compiling time: 0.08 SBU
# Maintainer: Janny <janny@frugalware.org>

pkgname=xawtv
pkgver=3.95
pkgrel=4
pkgdesc="A TV application for the bttv driver."
url="http://linux.bytesex.org/xawtv"
license="GPL"
depends=('tv-fonts' 'libdv' 'alsa-lib' 'libjpeg' 'libfs' 'aalib' 'libxrandr' 'libxv' 'libxinerama' 'zvbi' 'libxaw' \
v v v v v v v
	'lesstif' 'libxxf86dga' 'mesa' 'libfs')
*************
	'openmotif' 'libxxf86dga' 'mesa' 'libfs')
^ ^ ^ ^ ^ ^ ^
groups=('xapps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://dl.bytesex.org/releases/xawtv/|grep $pkgname-[0-9\.]*\.tar.gz|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=(http://dl.bytesex.org/releases/xawtv/$pkgname-$pkgver.tar.gz gcc4.patch Xlib.patch)
sha1sums=('0b0743fc06aae4f1a03c8572bcf2baa9b869ff52' \
          '6cc7968b28806e4e1210e804de822669a41b9b86' \
	  'acf407998cd0cf33340395c1d93d6f1f585a6faa')
build ()
{
v v v v v v v
	export CFLAGS="$CFLAGS -I/usr/include/X11/fonts"
	# build xawtv
	Fbuild

	# install desktop file
	Fdesktop "$pkgname" "$pkgname.xpm" "Qt;Gtk;AudioVideo;"

	# install desktop icon
	Ffilerel contrib/*.xpm usr/share/pixmaps/xawtv/
	Fln xawtv/xawtv48x48.xpm usr/share/pixmaps/$pkgname.xpm
*************
    # build xawtv
    Fbuild --x-libraries=/usr/include/X11 --includedir=/usr/include
    
    # install desktop file
    Fdesktop "$pkgname" "$pkgname.xpm" "Qt;Gtk;AudioVideo;"
    
    # install desktop icon
    Ffilerel contrib/*.xpm usr/share/pixmaps/xawtv/
    Fln xawtv/xawtv48x48.xpm usr/share/pixmaps/$pkgname.xpm
^ ^ ^ ^ ^ ^ ^
}
