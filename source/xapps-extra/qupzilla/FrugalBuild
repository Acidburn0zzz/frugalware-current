# Compiling Time: 1.52 SBU
# Maintainer: Melko <melko@frugalware.org>

pkgname=qupzilla
pkgver=2.0.0
pkgrel=1
pkgdesc="Web browser written in Qt."
url="http://www.qupzilla.co.cc"
depends=('qt5-base' 'qt5-webengine' 'qt5-x11extras')
makedepends=('qt5-tools')
groups=('xapps-extra')
archs=('i686' 'x86_64')
_F_gnome_iconcache='y'
_F_github_author="QupZilla"
_F_github_tag_v="y"
Finclude gnome-scriptlet github kf5-version
sha1sums=('4083006116d8ce79829a2155ac075c76153a8c13')

subpkgs=("$pkgname-kde")
subdescs=("Plugin for Qupzilla integration with KWallet.")
subgroups=('xapps-extra')
subarchs=('i686 x86_64')
subdepends=("kwallet5>=$_F_kf5_full")
subrodepends=("$pkgname")

subpkgs+=("$pkgname-gnome")
subdescs+=("Plugin for Qupzilla integration with gnome keyring.")
subgroups+=('xapps-extra')
subarchs+=('i686 x86_64')
subdepends+=('libgnome-keyring')
subrodepends+=("$pkgname")

build() {
	export KDE_INTEGRATION="true" GNOME_INTEGRATION="true"
	Fcd $pkgname-$pkgver
	qmake-qt5 QupZilla.pro || Fdie
	Fmake
	Fmakeinstall INSTALL_ROOT=$Fdestdir
	Fbuild_gnome_scriptlet
	Fsplit $pkgname-kde /usr/lib/qupzilla/libKWalletPasswords.so
	Fsplit $pkgname-gnome /usr/lib/qupzilla/libGnomeKeyringPasswords.so
}

# optimization OK
