# Compiling Time: 1.52 SBU
# Maintainer: Melko <melko@frugalware.org>

pkgname=qupzilla
pkgver=1.8.9
pkgrel=2
pkgdesc="Web browser written in Qt."
url="http://www.qupzilla.co.cc"
depends=('libqtwebkit' 'libqtscript' 'libqtsql')
makedepends=('qt4-linguist' 'kdelibs-compiletime')
groups=('xapps-extra')
archs=('i686' 'x86_64')
_F_gnome_iconcache='y'
_F_github_author="QupZilla"
_F_github_tag_v="y"
Finclude gnome-scriptlet github
sha1sums=('0c2affd5510e912224fea7c080663da85d0ccf8f')

subpkgs=("$pkgname-kde")
subdescs=("Plugin for Qupzilla integration with KWallet.")
subgroups=('xapps-extra')
subarchs=('i686 x86_64')
subdepends=('libkdeui')
subrodepends=("$pkgname")

subpkgs+=("$pkgname-gnome")
subdescs+=("Plugin for Qupzilla integration with gnome keyring.")
subgroups+=('xapps-extra')
subarchs+=('i686 x86_64')
subdepends+=('libgnome-keyring')
subrodepends+=("$pkgname")

build() {
	export KDE_INTEGRATION="true" GNOME_INTEGRATION="true"
	Fcd $pkgname-$pkgver
	qmake QupZilla.pro || Fdie
	Fmake
	Fmakeinstall INSTALL_ROOT=$Fdestdir
	Fbuild_gnome_scriptlet
	Fsplit $pkgname-kde /usr/lib/qupzilla/libKWalletPasswords.so
	Fsplit $pkgname-gnome /usr/lib/qupzilla/libGnomeKeyringPasswords.so
}

# optimization OK
