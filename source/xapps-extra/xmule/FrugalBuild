# Compiling time: 1.35 SBU
# Maintainer: Janny <janny@frugalware.org>

pkgname=xmule
pkgver=1.13.7_rc1
pkgrel=2
pkgdesc="The Multiplatform Fork of the xMule Client | Inspiring P2P for Geeks"
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge
url="http://www.xmule.ws"
license="GPL"
depends=('glib' 'gtk+2' 'wxgtk>=2.6.0' 'zlib' 'wget')
groups=('xapps-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
up2date="lynx -dump $url/|grep xmule.*.tar.bz2|sed -ne 's/.*xmule-\(.*\)\.t.*/\1/;1 p'"
#source=($url/files/releases/$pkgname-1.13.7-rc1.tar.bz2 ed2k.protocol)
source=(http://ftp.frugalware.org/pub/frugalware/frugalware-current/source/xapps-extra/xmule/xmule-1.13.7-rc1.tar.bz2 \
	ed2k.protocol)
build()
{
	Fcd $pkgname-1.13.7/
	Fbuild
	
	# Install icon for the menu file.
	Ficonrel $pkgname.xpm

	# Install menu file.
	Fdesktop "$pkgname" "$pkgname.xpm" "Network;"

	# Install KDE ed2k protocol 
	Ffile /usr/share/services/ed2k.protocol
	
	# fix conflicts with amule
	Frm usr/bin/ed2k
	Fln /usr/bin/ed2k.xmule-2.0 /usr/bin/xed2k
}

sha1sums=('2d7b058094fd89912179a9675d26c9a31d638506' \
          'f5eb94d97813e1d6665a4652e32085ac2b27a5db')
# optimization OK
