# Compiling Time: 0.08 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=transmission
pkgver=1.52
pkgrel=1
pkgdesc="A free, lightweight BitTorrent Client."
url="http://transmission.m0k.org/"
makedepends=('intltool')
depends=('glibc' 'gtk+2>=2.16.1' 'libxml2' 'freetype2' 'libxau' 'libxdmcp' 'curl>=7.19.0' 'libxdamage' 'libxext' 'gettext')
options=('scriptlet')
groups=('xapps-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
up2date="lynx -dump -nolist http://download.m0k.org/transmission/files/ | Flasttarbz2"
source=(http://download.m0k.org/transmission/files/$pkgname-$pkgver.tar.bz2)
sha1sums=('c3df61e350659960a5886a475c234f53b7fded26')

build()
{
	Fcd
	if [ "$CARCH" == "x86_64" ]; then
		export CFLAGS="$CFLAGS -fPIC"
	fi
	Fconf
	make || Fdie

	# Install binaries and manpages
	cd cli || Fdie
	Fexerel /usr/bin/transmissioncli
	Fmanrel transmissioncli.1
	cd ../gtk || Fdie
	Fexerel /usr/bin/transmission
	Fmanrel transmission.1

	# Desktop entry
	Fmkdir /usr/share/{applications,pixmaps}
	Ffilerel transmission.desktop /usr/share/applications/
	Ffilerel transmission.png /usr/share/pixmaps
}

# optimization OK

