# Compiling Time: 0.03 SBU
# Contributor: BMH1980 <bmh1980@frugalware.org>
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=nerolinux
pkgver=2.1.0.4
pkgextraver=b
pkgrel=2
pkgdesc="Nero for Linux"
url="http://www.nero.com"
license="Nero EULA"
up2date="lynx -dump $url/eng/nerolinux-prog.php?pak=12 | grep -o -m1 'nerolinux.*.rpm' | cut -d - -f 2 |sed s/$pkgextraver//"
source=(http://ftp1.usw.nero.com/software/NeroLINUX/nerolinux-$pkgver$pkgextraver-x86.rpm)
groups=('xapps-extra')
archs=('i686')
rodepends=('gtk+' 'libxcb' 'libx11')
makedepends=('cpio' 'rpm')
options=('nobuild' 'nodocs')

build()
{
	Fmkdir usr/{bin,lib} usr/share/{applications,doc,pixmaps}
	Fmkdir usr/share/nero/{desktop,docs,pixmaps,sounds}
	rpm2cpio $Fsrcdir/$pkgname-$pkgver$pkgextraver-x86.rpm > $Fsrcdir/tmp.cpio || Fdie
	( cd $Fdestdir ; cpio -i < $Fsrcdir/tmp.cpio ) || Fdie
	rm -f $Fsrcdir/tmp.cpio || Fdie
	Fln /usr/share/nero/docs /usr/share/doc/$pkgname-$pkgver
	sed 's/^Categories.*/Categories=Qt;Gtk;Application;AudioVideo;/' \
	    $Fdestdir/usr/share/nero/desktop/NeroLINUX.template > \
	    $Fdestdir/usr/share/applications/$pkgname.desktop || Fdie
	echo -e "Icon=/usr/share/pixmaps/nero.png\nExec=nero" >> \
	        $Fdestdir/usr/share/applications/$pkgname.desktop || Fdie
	Fln /usr/share/nero/pixmaps/nero.png /usr/share/pixmaps/nero.png
}
sha1sums=('fe8448c1e2772b2ec98ca53d973abe1e212d510c')
