# Compiling Time: 0.30 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=geda-core
pkgver=20070526
pkgrel=1
pkgdesc="Core components for gEDA - A complete electronic design and automation suite."
url="http://geda.seul.org/"
license="GPL-2"
depends=('gtk+2' 'guile' 'libgeda')
groups=('xapps-extra' 'geda-suite')
archs=('i686')
up2date="lynx -dump $url/sources.html | grep utils | grep -m1 tar.gz |
Flasttar"
source=($url/devel/$pkgver/geda-gattrib-$pkgver.tar.gz \
	$url/devel/$pkgver/geda-gnetlist-$pkgver.tar.gz \
	$url/devel/$pkgver/geda-gschem-$pkgver.tar.gz \
	$url/devel/$pkgver/geda-gsymcheck-$pkgver.tar.gz \
	$url/devel/$pkgver/geda-symbols-$pkgver.tar.gz \
	$url/devel/$pkgver/geda-utils-$pkgver.tar.gz \
	$url/devel/$pkgver/geda-docs-$pkgver.tar.gz \
	$url/devel/$pkgver/geda-examples-$pkgver.tar.gz)
Fconfopts="${Fconfopts[@]} --disable-dependency-tracking \
	--with-doc-dir=$Fprefix/share/doc/$pkgname \
	--with-pcbconfdir=$Fprefix/share/pcb \
	--with-pcbm4dir=$Fprefix/share/pcb/m4"
sha1sums=('4ced3f9775dc6e7abd8a1a08f7ea0886de6a32c6'\
          '91eadb4b3dbf4a1355e70559565fcded64f93270'\
          '48fb4acfc628bb64fdc8c1c047671b31c3fd7778'\
          'a7f865c226e6c133cce46a711a880f372c405838'\
          '2e7bdcf0132ca8e380e59418daadde34fa10eff2'\
          '742551219cd930438c4c74b995b986a8297b7801'\
          '3dcd9fe85c55fc46257ff61cfc961fec2f2e0f5f'\
          '1104a2be6ce6ab93df55e6b9854f139bfae431ad')

build()
{
	for directory in geda-{gattrib,gnetlist,gschem,gsymcheck,symbols,utils,docs}-$pkgver; do
		Fmessage "Building gEDA:${directory}"
		cd ${Fsrcdir}/${directory}
		./configure $Fconfopts
		make || Fdie
		make DESTDIR=$Fdestdir install
	done

	Frm /usr/share/gEDA/sym/gnetman

	# Install examples
	Fmessage "Copying examples..."
	Fmkdir /usr/share/gEDA/examples
	cd $Fsrcdir
	cp -dpr geda-examples-$pkgver/* $Fdestdir/usr/share/gEDA/examples/
	Ffileschmod /usr/share/gEDA/examples 644
}

# optimization OK
