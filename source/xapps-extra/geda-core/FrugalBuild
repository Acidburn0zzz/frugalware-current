# Compiling Time: 0.33 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=geda-core
_F_archive_name=geda-utils # Reference archive for package version
pkgver=1.2.0
pkgrel=1
pkgdesc="Core components for gEDA - A complete electronic design and automation suite."
url="http://geda.seul.org/"
dlurl="ftp://ftp.geda.seul.org/pub/geda/release/v1.2/$pkgver/"
license="GPL-2"
depends=('gtk+2' 'guile' 'libgeda>=$pkgver')
groups=('xapps-extra' 'geda-suite')
archs=('i686')
up2date="lynx -dump $url/sources.html | Flasttar"
source=($dlurl/geda-gattrib-$pkgver.tar.gz \
	$dlurl/geda-gnetlist-$pkgver.tar.gz \
	$dlurl/geda-gschem-$pkgver.tar.gz \
	$dlurl/geda-gsymcheck-$pkgver.tar.gz \
	$dlurl/geda-symbols-$pkgver.tar.gz \
	$dlurl/geda-utils-$pkgver.tar.gz \
	$dlurl/geda-docs-$pkgver.tar.gz \
	$dlurl/geda-examples-$pkgver.tar.gz)
Fconfopts="${Fconfopts[@]} --disable-dependency-tracking \
	--with-doc-dir=$Fprefix/share/doc/$pkgname \
	--with-pcbconfdir=$Fprefix/share/pcb \
	--with-pcbm4dir=$Fprefix/share/pcb/m4"
sha1sums=('ee230f61ed4330e1d63062cace4e03612adb2110' \
          '768ddc8673cd7c7a8a2574ef3bea762a21934258' \
          '62b0f2adce0e6fc94da903e9dc9c3197948459d1' \
          '0989d5b4b8bb219c3cdb657d6d4f26a4ce7c7da8' \
          '4f6b67b0f9d7088716fe069fe4c098e37a448089' \
          'b8e95b020f5ab8e5c206fb52a8afaf92cbde516b' \
          '486272aef5d9b103997600fa18282af7328e9c42' \
          '378488e89a7769356857f9275bea9d6b07615386')

build()
{
	for directory in geda-{gattrib,gnetlist,gschem,gsymcheck,symbols,utils,docs}-$pkgver; do
		Fmessage "Building gEDA:${directory}"
		cd ${Fsrcdir}/${directory}
		./configure $Fconfopts
		make || Fdie
		make DESTDIR=$Fdestdir install
	done

	Frm /usr/share/gEDA/sym/gnetman

	# Install examples
	Fmessage "Copying examples..."
	Fmkdir /usr/share/gEDA/examples
	cd $Fsrcdir
	cp -dpr geda-examples-$pkgver/* $Fdestdir/usr/share/gEDA/examples/
	Ffileschmod /usr/share/gEDA/examples 644
}

# optimization OK
