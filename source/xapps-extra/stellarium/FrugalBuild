# Compiling Time: 0.83 SBU
# Maintainer: Cedrick Hannier alias Cedynamix <cedynamix@gmail.com>
# Contributor: Janos Kovacs <janny@frugalware.org>
# Contributor: Mcklaren <mcklaren@gmail.com>

pkgname=stellarium
pkgver=0.10.5
pkgrel=2
pkgdesc="A free open source planetarium for your computer."
makedepends=('boost>=1.34.1')
_F_cmake_confopts="-DCMAKE_CXX_FLAGS=$CXXFLAGS -DCMAKE_C_FLAGS=$CFLAGS"
Finclude sourceforge cmake
url="http://www.stellarium.org/"
depends=('sdl_mixer' 'libpng>=1.4.1' 'mesa' 'freetype2' 'libjpeg>=8b' 'libqtopengl' 'curl>=7.19.0' 'qt4')
groups=('xapps-extra')
archs=('i686')
sha1sums=('584ab8e3618bf9a0b15619260fbe240843a8f5e1')
options=('scriptlet')

build() {
	Fcd
	Fpatchall
	mkdir -p builds/unix || Fdie
	cd builds/unix || Fdie
	cmake -DCMAKE_INSTALL_PREFIX=/usr ../.. || Fdie
	make || Fdie
	make DESTDIR=${Fdestdir} install || Fdie
	Ficon $pkgname-$pkgver/data/$pkgname.png
	Fsed 'env LD_LIBRARY_PATH=/opt/qt4-maemo5/lib /opt/stellarium' 'usr' $Fsrcdir/$pkgname-$pkgver/data/$pkgname.desktop
	Fsed '4' '5' $Fsrcdir/$pkgname-$pkgver/data/$pkgname.desktop
	Ffile $pkgname-$pkgver/data/$pkgname.desktop /usr/share/applications/$pkgname.desktop
}
# optimization OK
