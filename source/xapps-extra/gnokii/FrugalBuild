# Compiling Time: 0.49 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=gnokii
pkgver=0.6.19
pkgrel=1
pkgdesc="Tools and user space driver for use with mobile phones"
url="http://www.gnokii.org/"
backup=(etc/gnokiirc)
depends=('bluez-libs' 'libmysqlclient' 'libpq' 'gtk+2' 'libxdamage')
makedepends=('postgresql' 'mysql')
groups=('xapps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url/download/gnokii/ | grep ]gnokii | sed -n -e 's/.*gnokii-\(.*\)\.tar\.bz2.*/\1/' -e '1 p'"
source=(http://gnokii.org/download/gnokii/gnokii-$pkgver.tar.bz2)
sha1sums=('da3cefb6cd3a6b829aa02e0d276298ba5c56d95f')

build()
{
	unset MAKEFLAGS
	Fmake --enable-security
	Fmakeinstall
	cd smsd
	Fmake libfile.la
	Fmakeinstall
	cd ..
	Fsed '/usr/local' "$Fprefix" Docs/sample/gnokiirc
	Ffilerel Docs/sample/gnokiirc /etc/gnokiirc
	Ffilerel Docs/sample/logo/gnokii.xpm /usr/share/pixmaps/xgnokii.xpm
	cd Docs
	Fmakeinstall
	Fmv /usr/share/doc/$pkgname /usr/share/doc/$pkgname-$pkgver
}

# optimization OK
