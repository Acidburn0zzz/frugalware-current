# Compiling Time: 1.13 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=graphicsmagick
pkgver=1.1.14
pkgrel=1kalgan1
pkgdesc="A collection of tools and libraries for many image formats"
depends=('libxext' 'libsm' 'lcms' 'freetype2' 'libxml2' 'bzip2' 'jasper>=1.900.0' 'libpng' 'perl' 'urw-fonts' 'xghostscript')
groups=('xapps-extra')
archs=('i686' 'x86_64')
_F_sourceforge_dirname="$pkgname"
_F_sourceforge_name="GraphicsMagick"
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge
url="http://www.graphicsmagick.org/"
_F_cd_path="GraphicsMagick-$pkgver"
sha1sums=('e2cdbac9e10640886ddeb298b4a0c455f024db26')
export CXXFLAGS="$CXXFLAGS -fno-strict-aliasing"
export CFLAGS="$CFLAGS -fno-strict-aliasing"

subpkgs=("$pkgname-docs")
subdescs=('GraphicsMagick Documentation')
subdepends=('')
subgroups=('xapps-extra')
subarchs=('i686 x86_64')

build()
{
	Fbuild \
		--disable-dependency-tracking --with-modules --without-fpx \
		--with-gs-font-dir=/usr/share/ghostscript/fonts \
		--enable-shared --with-threads --with-quantum-depth=32
	Frm  /usr/share/GraphicsMagick-$pkgver/*.txt
	Fmkdir usr/share/doc/$pkgname-$pkgver
	Fmv /usr/share/doc/GraphicsMagick/www /usr/share/doc/$pkgname-$pkgver/
	Fsplit $pkgname-docs usr/share/doc/$pkgname-$pkgver/www
}

# optimization OK
