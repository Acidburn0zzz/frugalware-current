# Last modified: Mon, 04 Sep 2006 10:46:21 +0200
# Compiling time: 0.25 SBU
# Maintainer: Bence Nagy <nagybence@tipogral.hu>

pkgname=scite
pkgver=1.71
pkgrel=1
pkgdesc="A generally useful editor with facilities for building and running programs."
depends=('gtk+2')
groups=('xapps-extra')
archs=('i686' 'x86_64')
url="http://scintilla.sourceforge.net/SciTE.html"
source=(http://heanet.dl.sourceforge.net/sourceforge/scintilla/scite`echo $pkgver | sed -e 's/\.//g'`.tgz)
up2date="lynx -dump http://scintilla.sourceforge.net/SciTEDownload.html| grep 'Release' | sed -n 's/Release \(.*\)$/\1/; 1 p'"
backup=(/usr/share/scite/SciTEGlobal.properties)
sha1sums=('5cc1cce7ab5dc7723f36306af6d6fff5d81bc68c')

build() {
	cd $Fsrcdir/scintilla/gtk
	Fsed "^CXXFLAGS=" "CXXFLAGS=${CXXFLAGS} " makefile
	Fsed "\(^CXXFLAGS=.*\)-Os" "\1" makefile
	Fmake
	cd $Fsrcdir/scite/gtk
	Fsed "^CXXFLAGS=" "CXXFLAGS=${CXXFLAGS} " makefile
	Fsed "\(^CXXFLAGS=.*\)-Os" "\1" makefile
	Fsed "^\(Categories=\).*" "\1Application;Utility;TextEditor;" SciTE.desktop
	Fsed "Bitstream Vera Sans Mono" "Monospace" ../src/SciTEGlobal.properties 
	Fsed "Bitstream Vera Sans" "Sans-serif" ../src/SciTEGlobal.properties 
	Fsed "Bitstream Vera Serif" "Serif" ../src/SciTEGlobal.properties 
	Fsed "Bitstream Charter" "Serif" ../src/SciTEGlobal.properties 
	Fsed "netscape" "browser" ../src/Embedded.properties 
	# Fmake
	make NO_LUA=1 || Fdie
	Fmakeinstall
	Fln /usr/bin/SciTE /usr/bin/scite
}

# optimization OK
