# Compiling Time: 4.89 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=audacity
pkgver=1.3.9
pkgrel=1
pkgdesc="A program that lets you manipulate digital audio waveforms"
_F_sourceforge_sep="-minsrc-"
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge
url="http://audacity.sourceforge.net/"
depends=('wxgtk-u8' 'libvorbis' 'libid3tag' 'libmad' 'libogg' \
	'libsamplerate' 'flac>=1.1.3' 'soundtouch' 'alsa-lib' \
	'taglib')
# TODO: twolame
makedepends=('zip')
groups=('xapps-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
source=($source audacity-1.3.8-gsocket-conflict.patch)
sha1sums=('77330b3bb70070001262f6e3c7d74a1d94c93c5e' \
          'fe9a1c08399bad5d34839c78c023bd9fea9228fd')


build()
{
	
	unset MAKEFLAGS
	export CXXFLAGS="$CXXFLAGS -fno-strict-aliasing"
	Fcd $pkgname-src-$pkgver
	Fpatchall
	Fsed 'wx-config' 'wx-config-u8' configure
	Fconf \
		--enable-unicode \
		--with-portaudio=v19 \
		--with-libsamplerate=system \
		--without-libresample \
		--with-libmad=system \
		--with-id3tag=system \
		--with-flac=system \
		--with-vorbis=system \
		--with-libexpat=system \
		--with-libsndfile=system \
		--with-taglib=system
	make || Fdie
	Fmakeinstall
	Ffilerel images/AudacityLogo48x48.xpm /usr/share/$pkgname/$pkgname.xpm
}
# optimization OK
