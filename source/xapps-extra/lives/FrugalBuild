# Compiling Time: 0.28 SBU
# Maintainer: crazy <crazy@frugalware.org>
# Contributor: Tuxbubling <tuxbubling@tiscali.fr>

pkgname=lives
pkgver=1.3.2
pkgrel=1
pkgdesc="LiVES is a powerful video system aimed at the digital video artist and VJ."
depends=('mplayer>=1.0rc2-15' 'imagemagick>=6.5.4_2' 'gtk+2>=2.20.0-2' 'libjpeg>=8a' 'sox>=14.3.0' 'transcode>=1.1.5' \
	'xmms' 'libavc1394' 'freetype2' 'libvisual-plugins' 'sdl' 'liboil' 'jack')
makedepends=('imake')
rodepends=('perl' 'python')
groups=('xapps-extra')
options=('scriptlet')
archs=('i686' 'x86_64')
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge
url="http://www.xs4all.nl/~salsaman/lives/"
source=($url/current/LiVES-$pkgver.tar.bz2)
sha1sums=('cdec138a6ff1bc6fe6ba72bf232373aeef660ce9')

build()
{
	if [ "$CARCH" == "x86_64" ]; then
		export CFLAGS="$CFLAGS -fPIC"
	fi
	Fcd
	Fmkdir usr/share/{applications,pixmaps}
	Fpatchall
	## nono kill this shit before Fbuild :-D
	for noo3 in `find . -name "Makefile*"`
	do
		Fsed '-O3' '' $noo3
		Fsed '-fexpensive-optimizations' '' $noo3
		## blah on wth is this guy on ?
	done
	Fmake --disable-dvgrab
	Fmakeinstall
	Frm usr/bin/lives
	Fln /usr/bin/lives-exe usr/bin/lives
}

# optimization OK
