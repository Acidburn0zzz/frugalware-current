# Compiling time: 21.91 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=qtcreator
_F_archive_name=qt-creator-opensource-src
pkgver=4.2.2
pkgrel=1
pkgdesc='Lightweight, cross-platform integrated development environment'
archs=('i686' 'x86_64')
url='http://qt-project.org'
groups=('xapps-extra')
depends=('qt5-quickcontrols' 'qt5-svg' 'qt5-imageformats' 'qt5-script' 'gdb' 'cmake' 'qt5-tools' 'qt5-webengine' 'qt5-quickcontrols2')
up2date="Flastverdir http://download.qt-project.org/official_releases/qtcreator/\$(Flastverdir http://download.qt-project.org/official_releases/qtcreator/)"
source=(http://download.qt-project.org/official_releases/$pkgname/${pkgver%.*}/$pkgver/${_F_archive_name}-${pkgver}.tar.gz)
sha1sums=('49d6d92bfa6cd8dc5982c26ab19383746c03cc1a')

build() {

	Fcd
	Fexec mkdir -p build || Fdie
	Fexec cd build || Fdie
	Fexec qmake-qt5 CONFIG+=journald -r ../qtcreator.pro || Fdie
	Fexec make || Fdie
	Fexec make INSTALL_ROOT=${Fdestdir}/usr install || Fdie

	## WARNING: No package found containing libqbscore.so.1.7 and so on
	Fmkdir etc/ld.so.conf.d/
	Fexec /bin/echo  /usr/lib/qtcreator > "$Fdestdir/etc/ld.so.conf.d/$pkgname.conf"
}

# optimization OK
