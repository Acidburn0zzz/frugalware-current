# Compiling Time: 0 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=frostwire
pkgver=4.13.1.7
pkgrel=1
pkgdesc="FrostWire is a Peer to Peer (P2P) information sharing client for the Gnutella network."
Finclude sourceforge
url="http://www.frostwire.com"
rodepends=('j2re')
depends=()
groups=('xapps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url | grep Version | sed 's/.*n \(.*\)*/\1/'"
source=(http://www2.frostwire.com/frostwire/downloads/${pkgver/.7/}/$pkgname-$pkgver.noarch.tar.gz)

build()
{
	Fmkdir usr/share/{frostwire,applications}
	cp -r $pkgname-$pkgver.noarch/* $Fdestdir/usr/share/frostwire
	
	# Fix LFs and CRs in runFrost.sh
	sed -i 's/[^ -~]//g' $Fdestdir/usr/share/frostwire/runFrostwire.sh
	
	# Create an executable script for frostwire
	Fmkdir /usr/bin
	echo "#!/bin/sh" >> $Fdestdir/usr/bin/frostwire
	echo "cd /usr/share/frostwire" >> $Fdestdir/usr/bin/frostwire
	echo "sh runFrostwire.sh" >> $Fdestdir/usr/bin/frostwire
	chmod 755 $Fdestdir/usr/bin/frostwire

	Fmv /usr/share/frostwire/frostwire.desktop /usr/share/applications
}

