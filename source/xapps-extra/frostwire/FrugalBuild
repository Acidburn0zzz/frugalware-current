# Compiling Time: ~0 SBU
# Maintainer: Priyank <priyankmg@gmail.com>

pkgname=frostwire
pkgver=4.13.1
subver=4
pkgrel=1
pkgdesc="FrostWire is a Peer to Peer (P2P) information sharing client for the Gnutella network."
Finclude sourceforge
url="http://www.frostwire.com"
rodepends=('j2re')
depends=('')
groups=('xapps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://www.frostwire.com/ | grep Current | sed 's/.*]\(.*\)*/\1/'"
source=(http://www.frostwire.com/frostwire/$pkgver/$pkgname-$pkgver.$subver.noarch.tar.gz)
sha1sums=('b3ab3deeac001c61dc0b62d34a323bf1c8df33f6')

build()
{
	Fmkdir usr/share/{frostwire,applications}
	cp -r $pkgname-$pkgver.noarch/* $Fdestdir/usr/share/frostwire
	
	# Fix LFs and CRs in runFrost.sh
	sed -i 's/[^ -~]//g' $Fdestdir/usr/share/frostwire/runFrostwire.sh
	
	# Create an executable script for frostwire
	Fmkdir /usr/bin
	echo "#!/bin/sh" >> $Fdestdir/usr/bin/frostwire
	echo "cd /usr/share/frostwire" >> $Fdestdir/usr/bin/frostwire
	echo "sh runFrostwire.sh" >> $Fdestdir/usr/bin/frostwire
	chmod 755 $Fdestdir/usr/bin/frostwire

	Fmv /usr/share/frostwire/frostwire.desktop /usr/share/applications
}

