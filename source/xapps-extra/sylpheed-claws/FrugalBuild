# Compiling time: 1.67 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Old Maintainer: Bence Nagy <nagybence@tipogral.hu>

pkgname=sylpheed-claws
pkgver=2.6.0
pkgrel=1
pkgdesc="The extended version of Sylpheed, a GTK+ based, lightweight, and fast e-mail client"
url="http://sylpheed-claws.sourceforge.net"
groups=('xapps-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
depends=('openssl' 'aspell' 'clamav' 'pilot-link>=0.12.1' 'openldap' \
	'gtk+2' 'atk' 'gpgme' 'cairo' 'startup-notification' \
	'spamassassin' 'curl' 'gdk-pixbuf' 'libetpan>=0.48' 'hicolor-icon-theme' 'libsm')
Finclude sourceforge
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=25528|grep -v plugins|grep -m1 'sylpheed-claws-\(.*\).tar.bz2'|sed 's/.*ws-\(.*\).t.*/\1/'"
sha1sums=('103f8292c2bde6a5b10aeb820adf8f410b1feffc')

build() {
	Fmake --with-config-dir=.sylpheed-claws --enable-aspell --enable-ldap \
		--enable-spamassassin-plugin
	cd tools
	make || Fdie
	for tool in *.pl *.py *.rc *.sh tb2sylpheed update-po uudec; do
    		Fexerel /usr/lib/sylpheed-claws/tools/${tool}
	done
	Ffilerel /usr/lib/sylpheed-claws/tools/multiwebsearch.conf
	cd ..
	Ffilerel sylpheed-claws-64x64.png /usr/share/pixmaps/sylpheed-claws.png
	Fmakeinstall
	Ffilerel sylpheed-claws.png /usr/share/icons/hicolor/48x48/apps/sylpheed-claws.png
	Fmkdir /usr/share/applications/
	Ffilerel sylpheed-claws.desktop /usr/share/applications/
}

# optimization OK
