# Compiling time: 0.02 SBU
# Maintainer: Marius Cirsta <mcirsta@frugalware.org>

pkgname=teamviewer
pkgver=11.0.57095
pkgrel=1
pkgdesc="Proprietary computer software package for remote control, desktop sharing, online meetings, web conferencing and file transfer between computers."
url="http://www.teamviewer.com"
rodepends=('pulseaudio')
makedepends=('dpkg')
groups=('xapps-extra')
archs=('x86_64')
up2date="Fwcat http://www.teamviewer.com/en/download/linux/ | egrep '(deb 32-Bit / 64-Bit Multiarch)' | sed 's/.*v\([0-9\.]*\)\ .*/\1/'"
source=(http://download.teamviewer.com/download/${pkgname}_amd64.deb)
sha1sums=('80c74175df8a581fc345ebd4798c021463a9805c')
options=('nobuild' 'nostrip')

build()
{
	dpkg -x ${pkgname}_amd64.deb $Fsrcdir/$pkgname-$pkgver || Fdie
	Fmkdir /etc/teamviewer
	Fmkdir /var/log/teamviewer11
	Fmkdir /usr/lib
	Fsed  '/opt/teamviewer/' '/usr/lib/teamviewer/' opt/teamviewer/tv_bin/script/teamviewerd.service
	Ffilerel opt/teamviewer/tv_bin/script/teamviewerd.service /lib/systemd/system/teamviewerd.service
	cp -a opt/teamviewer $Fdestdir/usr/lib/${pkgname} || Fdie
	Frm /usr/lib/${pkgname}/tv_bin/script/teamviewerd.service
	Fln /usr/lib/${pkgname}/tv_bin/script/${pkgname} /usr/bin/${pkgname}
}

