# Compiling time: 0.66 SBU
# Maintainer: Baste <baste@frugalware.org>
# Contributor: bouleetbil <bouleetbil@frogdev.info>

options+=('asneeded')

pkgname=evince
pkgver=3.7.90
pkgrel=2
pkgdesc="A document viewer for GNOME"
depends=('gtk+3' 'libsecret' 'gsettings-desktop-schemas' 'poppler-glib>=0.20.3' \
	'djvulibre' 'libspectre>=0.2.6-5' 'libgxps' 't1lib')
#depends=( 'rarian' 'desktop-file-utils' 'libxml2>=2.7.8' \
#	'dbus-glib>=0.76' 'lcms')
#makedepends=('gnome-doc-utils' 'perl-xml-parser' 'itstool')
makedepends=('intltool' 'nautilus>=3.7.90' 'gobject-introspection>=0.9.6' 'texlive' 'gtk-doc')
replaces=('gpdf')
groups=('gnome')
archs=('i686' 'x86_64')
_F_gnome_glib="y"
_F_gnome_iconcache="y"
_F_gnome_desktop="y"
_F_gnome_ext=".tar.xz"
_F_gnome_doc="y"
_F_gnome_devel="y"
Finclude gnome gnome-scriptlet
#_F_make_opts="V=1 LIBTOOL=/usr/bin/libtool"
url="http://www.gnome.org/projects/evince/"
source=($source desktop.patch)
sha1sums=('0958d3fc9cf4350b499cb17aab845fa9cc3180d6' \
          '0053e9936c21c34f053e453850b06604e07efe5e')
Fconfopts+=" --disable-static --enable-introspection --enable-comics=yes \
        --enable-dvi=yes \
        --enable-djvu=yes \
        --enable-xps=yes \
        --enable-t1lib=yes"

subpkgs=('evince-nautilus')
subdescs=('Evince plugin for Nautilus')
subdepends=("nautilus>=3.6.0")
subrodepends=("$pkgname=$pkgver")
subgroups=('gnome')
subarchs=('x86_64 i686')
subreplaces=('')
subprovides=('')


build() {
	Fbuild

	# evince-nautilus package
        Fsplit evince-nautilus usr/lib/nautilus/

	Fbuild_gnome_scriptlet
}

# optimization OK
