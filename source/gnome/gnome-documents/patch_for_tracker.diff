From 0af48d9d36651fded7fbb632e38ab1589074b35d Mon Sep 17 00:00:00 2001
From: Vincent Untz <vuntz@gnome.org>
Date: Thu, 19 Jan 2012 10:47:07 +0100
Subject: [PATCH] build: Support build against tracker 0.13/0.14

https://bugzilla.gnome.org/show_bug.cgi?id=667854
---
 configure.ac |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/configure.ac b/configure.ac
index 29fa2a2..7f44586 100644
--- a/configure.ac
+++ b/configure.ac
@@ -58,6 +58,9 @@ GOA_MIN_VERSION=3.2.0
 CLUTTER_GTK_MIN_VERSION=1.0.2
 TRACKER_MIN_VERSION=0.12.1
 
+PKG_CHECK_EXISTS([tracker-sparql-0.14],
+                 [tracker_api=0.14], [tracker_api=0.12])
+
 PKG_CHECK_MODULES(DOCUMENTS,
                   clutter-gtk-1.0 >= $CLUTTER_GTK_MIN_VERSION
                   evince-document-3.0 >= $EVINCE_MIN_VERSION
@@ -67,13 +70,13 @@ PKG_CHECK_MODULES(DOCUMENTS,
                   gobject-introspection-1.0 >= $GOBJECT_INTROSPECTION_MIN_VERSION
                   gtk+-3.0 >= $GTK_MIN_VERSION
                   gnome-desktop-3.0
-                  tracker-sparql-0.12 >= $TRACKER_MIN_VERSION
+                  tracker-sparql-$tracker_api >= $TRACKER_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
                   libgdata >= $GDATA_MIN_VERSION
                   oauth)
 
 PKG_CHECK_MODULES(MINER,
-                  tracker-sparql-0.12
+                  tracker-sparql-$tracker_api
                   glib-2.0 >= $GLIB_MIN_VERSION
                   gio-2.0 >= $GLIB_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
-- 
1.7.8
