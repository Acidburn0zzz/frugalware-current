# Last modified: Mon, 08 May 2006 01:46:12 +0200
# Compiling time: 0.49 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Old Maintainer: Shrift <shrift@frugalware.org>
# Contributor: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=totem
pkgver=1.4.0
pkgrel=4
url="http://www.hadess.net/totem.php3"
pkgdesc="Movie player for GNOME based on Xine"
depends=('libxi' 'libxtst' 'fontconfig' 'libstdc++' 'libxxf86vm' 'dbus-gtk+2' \
	 'libxrandr' 'atk' 'libsm' 'libxinerama' 'libmusicbrainz' 'nss' \
	  'cairo' 'libxcursor' 'gnome-desktop' 'iso-codes' 'gst-plugins-good-gconf' \
	  'gst-plugins-base-oil' 'gst-plugins-base' 'gst-plugins-base-gnomevfs')
makedepends=('intltool' 'firefox=1.5.0.3' 'pango' 'gnome-icon-theme' 'nautilus')
groups=('gnome' 'gnome-core')
archs=('i686' 'x86_64')
Finclude gnome
sha1sums=('299467c71e0a7d13adb9ea8c592ef7a9751fd0b5')

subpkgs=('totem-nsplugin' 'totem-nautilus')
subdescs=('Totem plugin for Firefox' 'Totem plugin for Nautilus')
subdepends=("firefox=1.5.0.3 $pkgname=$pkgver" "nautilus $pkgname=$pkgver")
subgroups=('gnome' 'gnome')
subarchs=('x86_64 i686' 'x86_64 i686')

build() {
	Fcd
	find . -name Makefile.in -exec sed -i -e 's/-scrollkeeper-update.*//' {} \;
	if [ -f omf.make ]; then
		sed -i -e 's/-scrollkeeper-update.*//' omf.make
	fi
	export MOZILLA_PLUGINDIR=/usr/lib/firefox
	Fmake --disable-schemas-install --enable-nautilus \
	      --enable-mozilla --with-mozilla=firefox --disable-scrollkeeper \
		--disable-debug --with-dbus --enable-gstreamer=0.10
	Fmakeinstall GCONF_DISABLE_SCHEMA_INSTALL=1

	# totem-nsplugin package
	Fsplit totem-nsplugin /usr/lib/firefox/
	# totem-nautilus package
	Fsplit totem-nautilus /usr/lib/nautilus/
}

# optimization OK
