# Compiling time: 0.69 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>
# Contributor: AlexExtreme <alex@alex-smith.me.uk>

pkgname=totem
pkgver=3.3.90
pkgrel=2
pkgdesc="Movie player for GNOME based on Xine"
depends=('gst-plugins-base-oil' 'clutter-gst>=1.4.4-2' 'clutter-gtk' 'mx' 'gst-plugins-good-gconf' 'totem-pl-parser>=3.2.0' \
	'libxtst' 'libpeas-gtk' 'pylint' 'gst-ffmpeg' 'gst-ffmpeg')
# Remove for 3.4
#depends=('libxi' 'fontconfig' 'libstdc++' 'libxxf86vm' 'dbus-glib>=0.71' \
#	'libxrandr' 'atk>=1.20.0' 'libsm' 'libxinerama' 'libmusicbrainz' 'nss>=3.12' 'avahi-glib>=0.6.19' \
#	'cairo>=1.8.6' 'libxcursor' 'gnome-desktop>=3.3.1' 'iso-codes' \
#	'shared-mime-info>=0.22' 'libkrb5' 'db>=4.7.25' \
#	'evolution-data-server>=3.1.1' 'python>=2.7'  \
#	'libgdata>=0.9.1' 'gst-plugins-good-libsoup' 'unique'  \
#	'libxml2>=2.7.8' 'pygobject3-cairo')
#makedepends=('intltool' 'gnome-doc-utils' 'vala' 'krb5' 'gnome-common')
makedepends=('intltool' 'gnome-doc-utils' 'vala')
groups=('gnome')
archs=('i686' 'x86_64')
_F_gnome_glib="y"
_F_gnome_desktop="y"
_F_gnome_scrollkeeper="y"
_F_gnome_iconcache="y"
_F_gnome_doc="y"
_F_gnome_ext=".tar.xz"
Finclude gnome gnome-scriptlet
url="http://www.gnome.org/projects/totem/"

subpkgs=("${subpkgs[@]}" "$pkgname-nsplugin")
subdescs=("${subdescs[@]}" 'Totem plugin for Firefox')
subdepends=("${subdepends[@]}" "xulrunner>=1.8.1.3")
subrodepends=("${subrodepends[@]}" "$pkgname=$pkgver")
subgroups=("${subgroups[@]}" 'gnome')
subarchs=("${subarchs[@]}" 'i686 x86_64')
subreplaces=("${subreplaces[@]}" '')
subprovides=("${subprovides[@]}" '')

subpkgs=("${subpkgs[@]}" "$pkgname-nautilus")
subdescs=("${subdescs[@]}" 'Totem plugin for Nautilus')
subdepends=("${subdepends[@]}" "nautilus>=3.1.1")
subrodepends=("${subrodepends[@]}" "$pkgname=$pkgver")
subgroups=("${subgroups[@]}" 'gnome')
subarchs=("${subarchs[@]}" 'i686 x86_64')
subreplaces=("${subreplaces[@]}" '')
subprovides=("${subprovides[@]}" '')

sha1sums=('fa29abd72a23ab981e72d5a2149b3794ee4b72dd')

build() {
	Fcd
	Fpatchall
	Fbuild_slice_scrollkeeper
	export MOZILLA_PLUGINDIR=/usr/lib/mozilla/plugins
	Fmake --disable-schemas-install --enable-nautilus \
		--disable-scrollkeeper \
		--disable-debug --enable-python
	Fmakeinstall GCONF_DISABLE_SCHEMA_INSTALL=1

	# totem-nsplugin package
	Fsplit totem-nsplugin /usr/lib/mozilla
	# totem-nautilus package
	Fsplit totem-nautilus /usr/lib/nautilus/

	Fbuild_gnome_scriptlet
	_F_gnome_split_doc
}

# optimization OK
