# Last modified: Thu, 03 Aug 2006 18:13:24 +0200
# Compiling time: 0.49 SBU
# Maintainer: AlexExtreme <alex@alex-smith.me.uk>

pkgname=totem
pkgver=1.5.90
pkgrel=2
url="http://www.gnome.org/projects/totem/"
pkgdesc="Movie player for GNOME based on Xine"
depends=('libxi' 'libxtst' 'fontconfig' 'libstdc++' 'libxxf86vm' 'dbus-gtk+2' \
	  'libxrandr' 'atk' 'libsm' 'libxinerama' 'libmusicbrainz' 'nss' \
	  'cairo' 'libxcursor' 'gnome-desktop' 'iso-codes' 'xine-lib')
makedepends=('intltool' "firefox>=1.5" 'pango' 'gnome-icon-theme' 'nautilus')
groups=('gnome' 'gnome-core')
archs=('i686' 'x86_64')
_F_gnome_schemas=(
        '/etc/gconf/schemas/totem-handlers.schemas'
        '/etc/gconf/schemas/totem.schemas'
        '/etc/gconf/schemas/totem-video-thumbnail.schemas'
)
_F_gnome_desktop="y"
_F_gnome_scrollkeeper="y"
Finclude gnome gnome-scriptlet
sha1sums=('9a3352100c21c0eeedddc6ca98c17b32c0890e3f')

subpkgs=('totem-nsplugin' 'totem-nautilus')
subdescs=('Totem plugin for Firefox' 'Totem plugin for Nautilus')
subdepends=("firefox>=1.5 $pkgname=$pkgver" "nautilus $pkgname=$pkgver")
subgroups=('gnome' 'gnome')
subarchs=('x86_64 i686' 'x86_64 i686')

build() {
	Fcd
	Fbuild_slice_scrollkeeper
	
	export MOZILLA_PLUGINDIR=/usr/lib/firefox-$firefoxver
	Fmake --disable-schemas-install --enable-nautilus \
		--enable-mozilla --with-mozilla=firefox --disable-scrollkeeper \
		--disable-debug --with-dbus --disable-gstreamer
	Fmakeinstall GCONF_DISABLE_SCHEMA_INSTALL=1
	Fmv /usr/lib/firefox-$firefoxver/ /usr/lib/firefox/

	# totem-nsplugin package
	Fsplit totem-nsplugin /usr/lib/firefox/
	# totem-nautilus package
	Fsplit totem-nautilus /usr/lib/nautilus/
	
	Fbuild_gnome_scriptlet
}

# optimization OK
