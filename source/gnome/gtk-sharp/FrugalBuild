# Last modified: Fri, 18 Feb 2005 16:46:43 +0100
# Compiling time: ~3 minutes
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=gtk-sharp
pkgver=1.0.6
pkgrel=1
pkgdesc="A C# language binding for the GTK+2 toolkit and GNOME libraries"
url="http://www.mono-project.com/"
depends=('mono' 'gtk+2' 'libxslt' 'libgnomeui' 'libgnomeprintui' 'libgda' \
	'libgnomedb' 'librsvg' 'gtkhtml' 'vte')
groups=('gnome' 'gnome-core')
archs=('i686')
up2date="lynx -dump 'http://www.mono-project.com/downloads/'|grep Gtk#|sed -n 's/.*# \(.*\).*/\1/;1 p'"
source=(http://www.go-mono.com/archive/$pkgver/$pkgname-$pkgver.tar.gz)
md5sums=('2651d14fe77174ab20b8af53d150ee11')

build() {
	export MONO_SHARED_DIR=$startdir/pkg/weird
	mkdir -p $MONO_SHARED_DIR
	[ -f /etc/profile.d/gnome.sh ] && . /etc/profile.d/gnome.sh

	cd $startdir/src/$pkgname-$pkgver
	sed -i 's|\/gacdir \$(DESTDIR)|/gacdir |' configure
	./configure --prefix=/usr

	sed -i 's|\/gacdir $(DESTDIR)|../../art/art-sharp.dll ../../rsvg|' Makefile
	make || return 1

	make GACUTIL="/usr/bin/gacutil /root $startdir/pkg/usr/lib" DESTDIR=$startdir/pkg install
	rm -rf $MONO_SHARED_DIR
}

# vim: ft=sh
