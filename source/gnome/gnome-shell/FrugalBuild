# Compiling time: 1.86 SBU
# Maintainer: Baste <baste@frugalware.org>
# Contributor: bouleetbil <bouleetbil@frogdev.info>

USE_FRUGALTHEME=${USE_FRUGALTHEME:-"n"}

pkgname=gnome-shell
pkgver=3.22.0
pkgrel=1
pkgdesc="Window management and application launching for GNOME"
url="http://www.gnome.org/"
depends=('python-3.0>=3.5.2-3' 'mutter>=3.22.0' 'gcr>=3.20.0-3' 'gjs>=1.46.0-1' \
	'telepathy-glib>=0.24.1-6' 'libsoup>=2.56.0' 'libcroco>=0.6.11-5' \
	'libcanberra-pulseaudio>=0.30-14' 'gstreamer1>=1.9.2-2' 'nm-connection-editor>=1.4.0-2' \
	'gnome-bluetooth>=3.20.0-3' 'evolution-data-server>=3.22.0' 'gnome-desktop>=3.22.0' 'gnome-menus>=3.13.3-5' \
	'libsecret>=0.18.5-2' 'caribou>=0.4.21-3' 'gnome-themes-standard>=3.20.2-4' 'telepathy-mission-control>=5.16.3-6')
makedepends=('intltool>=0.51.0-4' 'gobject-introspection>=1.50.0' 'docbook-xsl>=1.79.1-1')
rodepends=('telepathy-logger>=0.8.2-5' 'gnome-keyring>=3.20.0-3' 'gnome-shell-extensions-theme' 'gnome-fwtweak' 'at-spi2-core>=2.21.4-2')

replaces=('gnome-shell-extension-arrow-key-window-selector' 'gnome-shell-extension-autohidetopbar' 'gnome-shell-extension-cpufreq' \
	'gnome-shell-extension-cpu-temperature' 'gnome-shell-extension-frugalware-logo' 'gnome-shell-extension-moveclock' \
	'gnome-shell-extension-noa11y' 'gnome-shell-extension-overview-icon' 'gnome-shell-extension-pomodoro' \
	'gnome-shell-extension-righthotcorner' 'gnome-shell-extension-screen-off' 'gnome-shell-extensions-mediaplayer' \
	'gnome-shell-extensions-mediasplayers' 'gnome-shell-extensions-noa11y' 'gnome-shell-extension-systray' \
	'gnome-shell-extension-windowoverlay-icons' 'gnome-shell-theme-selector')
conflicts=("${replaces[@]}")

if Fuse $USE_FRUGALTHEME; then
	rodepends=("${rodepends[@]}" "gnome-shell-frugalware-theme")
else
	replaces=("${replaces[@]}" "gnome-shell-frugalware-theme")
	provides=("${provides[@]}" "gnome-shell-frugalware-theme")
fi

groups=('gnome' 'gnome-minimal')
archs=('i686' 'x86_64')
_F_gnome_glib="y"
_F_gnome_desktop="y"
_F_gnome_doc="y"
_F_gnome_devel="n"
_F_gnome_ext=".tar.xz"
Finclude gnome gnome-scriptlet

sha1sums=('1361c498ae45278688fc2cb9d4c81b1978942a3f')

build()	{
	Fcd
	Fmake --disable-static --disable-compile-warnings --disable-schemas-compile
	Fmakeinstall
	Fbuild_gnome_scriptlet
	_F_gnome_split_doc
}

# optimization OK
