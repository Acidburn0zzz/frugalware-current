# Compiling time: 1.86 SBU
# Maintainer: Baste <baste@frugalware.org>
# Contributor: bouleetbil <bouleetbil@frogdev.info>

USE_FRUGALTHEME=${USE_FRUGALTHEME:-"n"}

pkgname=gnome-shell
pkgver=3.24.1
pkgrel=1
pkgdesc="Window management and application launching for GNOME"
url="http://www.gnome.org/"
depends=('python-3.0>=3.5.2-3' 'mutter>=3.24.1' 'gcr>=3.20.0-4' 'gjs>=1.48.1' \
	'telepathy-glib>=0.24.1-6' 'libsoup>=2.56.0-3' 'libcroco>=0.6.12' \
	'libcanberra-pulseaudio>=0.30-15' 'gstreamer1>=1.10.4-3' 'nm-connection-editor>=1.4.6-2' \
	'gnome-bluetooth>=3.20.1-2' 'evolution-data-server>=3.24.1-3' 'gnome-desktop>=3.24.1' 'gnome-menus>=3.13.3-6' \
	'libsecret>=0.18.5-2' 'caribou>=0.4.21-4' 'gnome-themes-standard>=3.22.3' 'telepathy-mission-control>=5.16.3-6')
makedepends=('intltool>=0.51.0-4' 'gobject-introspection>=1.52.1' 'docbook-xsl>=1.79.1-1')
rodepends=('telepathy-logger>=0.8.2-5' 'gnome-keyring>=3.20.0-3' 'gnome-shell-extensions-theme' 'gnome-fwtweak' 'at-spi2-core>=2.21.4-2')

replaces=('gnome-shell-extension-arrow-key-window-selector' 'gnome-shell-extension-autohidetopbar' 'gnome-shell-extension-cpufreq' \
	'gnome-shell-extension-cpu-temperature' 'gnome-shell-extension-frugalware-logo' 'gnome-shell-extension-moveclock' \
	'gnome-shell-extension-noa11y' 'gnome-shell-extension-overview-icon' 'gnome-shell-extension-pomodoro' \
	'gnome-shell-extension-righthotcorner' 'gnome-shell-extension-screen-off' 'gnome-shell-extensions-mediaplayer' \
	'gnome-shell-extensions-mediasplayers' 'gnome-shell-extensions-noa11y' 'gnome-shell-extension-systray' \
	'gnome-shell-extension-windowoverlay-icons' 'gnome-shell-theme-selector')
conflicts=("${replaces[@]}")

if Fuse $USE_FRUGALTHEME; then
	rodepends=("${rodepends[@]}" "gnome-shell-frugalware-theme")
else
	replaces=("${replaces[@]}" "gnome-shell-frugalware-theme")
	provides=("${provides[@]}" "gnome-shell-frugalware-theme")
fi

groups=('gnome' 'gnome-minimal')
archs=("x86_64")
_F_gnome_glib="y"
_F_gnome_desktop="y"
_F_gnome_doc="y"
_F_gnome_devel="n"
_F_gnome_ext=".tar.xz"
Finclude gnome gnome-scriptlet

sha1sums=('1640e7e5a5a0213c378e30e9e464e817d6a6e85a')

build()	{
	Fcd

	## we need this bc : /.libs/libgnome-shell.so: file not recognized: File truncated -- crazy --
	#_F_make_opts="-j1"

	Fmake --disable-static --disable-compile-warnings --disable-schemas-compile
	Fmakeinstall
	Fbuild_gnome_scriptlet
	_F_gnome_split_doc
}

# optimization OK
