# Compiling time: 2.45 SBU
# Maintainer: Baste <baste@frugalware.org>
# Contributor: bouleetbil <bouleetbil@frogdev.info>

pkgname=gnome-settings-daemon
pkgver=3.18.2
pkgrel=2
pkgdesc="Utility library for accessing gnome-settings-daemon over DBUS"
depends=('gsettings-desktop-schemas>=3.18.1-2' 'gtk+3>=3.18.6-2' 'libnotify>=0.7.6-2' 'gnome-desktop>=3.18.2-2' \
	'upower>=0.99.3-3' 'libcanberra-gtk>=0.30-12' 'libpulse>=7.1-4' 'libgweather>=3.18.1-2' 'geoclue2>=2.1.10-5' \
	'libwacom>=0.17-1' 'xf86-input-wacom>=0.32.0-1' 'librsvg>=2.40.13-1' 'libcups>=2.1.2-2' 'nss>=3.21-2' \
	'networkmanager>=1.0.10-1' 'libcanberra-pulseaudio>=0.30-12')
makedepends=('intltool>=0.51.0-2' 'cups>=2.1.2-2' 'libxslt>=1.1.28-3' 'docbook-xsl>=1.79.1-1')
rodepends=('xkbcomp')
groups=('gnome' 'gnome-minimal')
archs=('i686' 'x86_64')
_F_gnome_glib="y"
_F_gnome_iconcache="y"
_F_gnome_doc="y"
_F_gnome_devel="n"
_F_gnome_ext=".tar.xz"
Finclude gnome gnome-scriptlet
sha1sums=('418fb90a6b7c3a2746a889bb70e7e0a70a41e491')

if [ "$_F_gnome_git" != "n" ]; then
	unset sha1sums
	unset source
fi

Fconfopts="${Fconfopts[@]} --disable-static \
		--disable-schemas-compile \
		--enable-systemd"
build() {
	Fcd
	Fbuild
	Fbuild_gnome_scriptlet
	Fmkdir etc/profile.d
	echo 'export GSETTINGS_BACKEND="dconf"' > $Fdestdir/etc/profile.d/gsettings-dconf.sh
	chmod +x $Fdestdir/etc/profile.d/gsettings-dconf.sh || Fdie
	_F_gnome_split_doc
}

# optimization OK
