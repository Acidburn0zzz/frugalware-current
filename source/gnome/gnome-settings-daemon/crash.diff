From d994a0a0b1a7cb56a7214e9260eda280653d26ac Mon Sep 17 00:00:00 2001
From: Bastien Nocera <hadess@hadess.net>
Date: Thu, 01 Sep 2011 09:43:38 +0000
Subject: housekeeping: NULL-terminate the ignore-paths array

Otherwise crashy crashy.

https://bugzilla.gnome.org/show_bug.cgi?id=657849
---
diff --git a/plugins/housekeeping/gsd-ldsm-dialog.c b/plugins/housekeeping/gsd-ldsm-dialog.c
index 96161ec..7366eb3 100644
--- a/plugins/housekeeping/gsd-ldsm-dialog.c
+++ b/plugins/housekeeping/gsd-ldsm-dialog.c
@@ -177,6 +177,7 @@ ignore_check_button_toggled_cb (GtkToggleButton *button,
 
                 for (l = ignore_paths; l != NULL; l = l->next)
                         g_ptr_array_add (array, l->data);
+                g_ptr_array_add (array, NULL);
 
                 if (!g_settings_set_strv (settings, "ignore-paths", (const gchar **) array->pdata)) {
                         g_warning ("Cannot change ignore preference - failed to commit changes");
--
cgit v0.9.0.2

