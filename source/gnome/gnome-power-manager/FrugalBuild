# Compiling time: 0.38 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=gnome-power-manager
pkgver=2.28.3
pkgrel=1
pkgdesc="GNOME Power Management tool"
url="http://www.gnome.org/"
depends=('libnotify>=0.4.4' 'hal>=0.5.11' 'dbus-glib>=0.80' 'xextproto' 'libgnomeui>=2.24.0-2' 'libgnome>=2.28.0' \
	'libglade' 'libwnck>=2.28.0' 'gnome-panel>=2.28.0' 'gnome-keyring>=2.28.0' 'gstreamer' \
	'devicekit-power' 'gnome-policykit' 'libcanberra-gtk' 'unique' 'pm-utils')
makedepends=('intltool' 'gnome-doc-utils')
groups=('gnome' 'gnome-minimal')
archs=('i686' 'x86_64' 'ppc')
_F_gnome_schemas=('/etc/gconf/schemas/gnome-power-manager.schemas')
_F_gnome_scrollkeeper=y
_F_gnome_desktop=y
_F_gnome_iconcache=y
Finclude gnome gnome-scriptlet
Fconfopts="$Fconfopts --enable-dpms-ext --enable-libnotify \
	--enable-applets --enable-keyring --enable-policykit"
source=($source gnome-power-manager.desktop)
sha1sums=('3ec7062d882fb9f85bd2d6acbd85475cee56c010' \
          '7d85ab3d9ed5f725ce1f0de8f8841a4a0ced54a4')

build() {
	Fcd
	Fpatchall
	Fautoreconf
	Fsed 'xsltproc' 'xsltproc --nonet' help/Makefile.in
	Fmake
	Fmakeinstall
	Fbuild_slice_scrollkeeper
	Fbuild_gnome_scriptlet

	#autostart
	Fmkdir usr/share/gnome/autostart
	Fcp gnome-power-manager.desktop usr/share/gnome/autostart/
}

# optimization OK
