# Last modified: Fri, 15 Apr 2005 00:40:58 +0200
# Compiling time: ~2 minutes
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=gnome-panel
pkgver=2.10.1
pkgrel=1
pkgdesc="GNOME panel"
url="http://www.gnome.org/"
depends=('gnome-desktop' 'gnome-menus' 'libwnck' 'evolution-data-server' \
	'scrollkeeper')
makedepends=('intltool')
groups=('gnome' 'gnome-core')
archs=('i686')
install=$pkgname.install
[ -e ../up2date.gnome ] && . ../up2date.gnome
source=(http://ftp.gnome.org/pub/gnome/sources/$pkgname/$preup2date/$pkgname-$pkgver.tar.bz2 \
	00-$pkgname-2.10.0-notification-area.patch \
	$pkgname.install)
md5sums=('a2719f5c79a9e48bca086f08a77a6889' \
	'5b4e880b617b4ecddda3f5f118d7c905' \
	'd6f379eb32f79b9cead6e5258b664a44')

build() {
	cd $startdir/src/$pkgname-$pkgver
	find . -name Makefile.in -exec sed -i -e 's/-scrollkeeper-update.*//' {} \;
	if [ -f omf.make ]; then
		sed -i -e 's/-scrollkeeper-update.*//' omf.make
	fi
	patch -p1 < $startdir/src/00-$pkgname-2.10.0-notification-area.patch || return 1
	./configure --prefix=/usr --sysconfdir=/etc --disable-schemas-install

	make || return 1

	make GCONF_DISABLE_SCHEMA_INSTALL=1 DESTDIR=$startdir/pkg install
}

# vim: ft=sh
