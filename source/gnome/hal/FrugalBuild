# Last modified: Mon, 09 May 2005 09:27:51 +0200
# Compiling time: ~1 minute
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=hal
pkgver=0.4.7
pkgrel=1
pkgdesc="Hardware Abstraction Layer"
url="http://freedesktop.org/wiki/Software_2fhal"
depends=('dbus' 'libcap' 'python' 'popt')
groups=('gnome')
makedepends=('pkgconfig' 'gnome-python')
install=$pkgname.install
up2date=`lynx -dump 'http://freedesktop.org/~david/dist/?C=M;O=D'|grep tar.gz$|sed -n 's/.*-\(.*\).t.*/\1/;1 p'`
source=(http://freedesktop.org/~david/dist/$pkgname-$pkgver.tar.gz \
	$pkgname.install \
	rc.hald)
md5sums=('3386817a6811cce803bcfa8a20b05c51' \
	'7da905bde295d5d9cdebe5a58f95bdaa' \
	'd33abc8579ccbf61cbbda83b35a0091f')

build() {
	cd $startdir/src/$pkgname-$pkgver
	./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
		--with-pid-file=/var/run/hald.pid \
		--with-system-pid-file=/var/run/hald.pid \
		--with-hal-user=daemon --with-hal-group=daemon \
		--enable-fstab-sync --enable-hotplug-map

	make clean || return 1
	make || return 1

	make DESTDIR=$startdir/pkg install

	# Init scripts.
	mkdir -p $startdir/pkg/etc/rc.d/rc.messages
	install -m755 $startdir/rc.hald $startdir/pkg/etc/rc.d/rc.hald
	install -m644 $startdir/messages/hald.* \
		$startdir/pkg/etc/rc.d/rc.messages/
}

# vim: ft=sh
