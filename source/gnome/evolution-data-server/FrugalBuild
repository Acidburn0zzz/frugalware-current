# Last modified: Tue, 15 Aug 2006 00:20:40 +0200
# Compiling time: 3.19 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=evolution-data-server
pkgver=1.7.91
pkgrel=2
pkgdesc="Evolution Data Server provides a central location for addressbook and calendar in the GNOME Desktop"
url="http://www.gnome.org/"
depends=('nss' 'libsoup>=2.2.96-2' 'libgnomeui>=2.15.90' 'heimdal')
makedepends=('intltool' 'gtk-doc' 'openldap>=2.3.24')
groups=('gnome' 'gnome-core')
archs=('i686' 'x86_64')
options=('scriptlet')
Finclude gnome
sha1sums=('9e473097307f1ca3562f06ca58bde374070338cb')

subpkgs=('evolution-data-server-ldap')
subdescs=('Evolution Data Server LDAP extensions.')
subdepends=("$pkgname=$pkgver openldap>=2.3.24")
subgroups=('gnome')
subarchs=('x86_64 i686')

build() {
	if [ "$CARCH" == "x86_64" ]; then
	    Fbuild --with-openldap=yes --with-nspr-includes=/usr/include/nspr \
		--with-nss-includes=/usr/include/nss \
		--enable-nntp --enable-smime --enable-ipv6 --disable-debug \
		--with-krb5=/usr
	else
	    Fbuild --with-openldap=yes --with-nspr-includes=/usr/include/nspr \
		--enable-gtk-doc --with-nss-includes=/usr/include/nss \
		--enable-nntp --enable-smime --enable-ipv6 --disable-debug \
		--with-krb5=/usr
	fi
	Fsplit evolution-data-server-ldap /usr/lib/libexchange-storage*
	Fsplit evolution-data-server-ldap /usr/lib/evolution-data-server-1.2/extensions/libebookbackendldap*
}

# optimization OK
