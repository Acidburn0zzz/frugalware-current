# Last modified: Wed, 06 Sep 2006 14:50:41 +0200
# Compiling time: 3.19 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=evolution-data-server
pkgver=1.8.0
pkgrel=1
pkgdesc="Evolution Data Server provides a central location for addressbook and calendar in the GNOME Desktop"
url="http://www.gnome.org/"
depends=('nss' 'libsoup>=2.2.96-2' 'libgnomeui>=2.16.0' 'heimdal' 'gnome-keyring>=0.6.0')
makedepends=('intltool' 'gtk-doc' 'openldap>=2.3.24')
groups=('gnome' 'gnome-core')
archs=('i686' 'x86_64')
Finclude gnome
source=(${source[@]} evolution-data-server-1.7.92-chain-finalize.patch \
		evolution-data-server-1.7.92-fix-fd-leak.patch)
sha1sums=('8a0eb60580f95b78f80f3e868c6086295947ff86' \
	  'd3076af326db09ddf6dd298bf954c2026faa65f4' \
	  'f6381d78b52e586ee2b3027694d44cc80b8643b8')

subpkgs=('evolution-data-server-ldap')
subdescs=('Evolution Data Server LDAP extensions.')
subdepends=("$pkgname=$pkgver openldap>=2.3.24")
subgroups=('gnome')
subarchs=('x86_64 i686')

build() {
	Fbuild --with-openldap=yes --enable-nss=yes --enable-gtk-doc \
	    --enable-nntp=yes --enable-smime=yes --enable-ipv6=yes --disable-debug \
	    --with-krb5=/usr --with-libdb=/usr --enable-gnome-keyring
	Fsplit evolution-data-server-ldap /usr/lib/libexchange-storage*
	Fsplit evolution-data-server-ldap /usr/lib/evolution-data-server-1.2/extensions/libebookbackendldap*
}

# optimization OK
