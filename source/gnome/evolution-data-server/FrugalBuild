# Compiling time: 4.02 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=evolution-data-server
pkgver=1.12.2
pkgrel=1
pkgdesc="Evolution Data Server provides a central location for addressbook and calendar in the GNOME Desktop"
depends=('nss>=3.11.5' 'libsoup>=2.2.102-2' 'libgnomeui>=2.20.1.1' 'heimdal>=1.0' 'gnome-keyring>=2.20.1' \
	'db>=4.6.18')
makedepends=('intltool' 'gtk-doc' 'openldap>=2.3.24')
groups=('gnome' 'gnome-minimal')
archs=('i686' 'x86_64')
Finclude gnome
sha1sums=('fe7d3ff19ee9505aef46c797d6504d2be5b7e138')
export CFLAGS="$CFLAGS -fno-strict-aliasing"

subpkgs=('evolution-data-server-ldap' "$pkgname-docs")
subdescs=('Evolution Data Server LDAP extensions.' "Evolution Data Server Documentation")
subdepends=("$pkgname=$pkgver libldap>=2.3.4" '')
subgroups=('gnome' 'docs-extra gnome-docs')
subarchs=('x86_64 i686' 'x86_64 i686')

build() {
	Fbuild --with-openldap=yes --enable-nss=yes --enable-gtk-doc \
	    --enable-nntp=yes --enable-smime=yes --enable-ipv6=yes --disable-debug \
	    --with-krb5=/usr --with-libdb=/usr --enable-gnome-keyring
	Fsplit evolution-data-server-ldap usr/lib/libexchange-storage*
	Fsplit evolution-data-server-ldap usr/lib/evolution-data-server-1.2/extensions/libebookbackendldap*
	Fsplit $pkgname-docs usr/share/gtk-doc
	
}

# optimization OK
