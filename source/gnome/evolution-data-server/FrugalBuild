# Compiling time: 4.02 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=evolution-data-server
pkgver=2.91.5
pkgrel=2
pkgdesc="Evolution Data Server provides a central location for addressbook and calendar in the GNOME Desktop"
depends=('nss>=3.12' 'libsoup-gnome>=2.32.0' 'libgweather>=2.91.0' \
	'libkrb5' 'db>=4.7.25' 'gnutls>=2.8' 'libical' 'gnome-keyring>=2.91.0' \
	'libgdata' 'gtk+3')
makedepends=('intltool' 'krb5' 'gperf' 'gobject-introspection' 'openldap')
groups=('gnome' 'gnome-minimal')
archs=('i686' 'x86_64' 'ppc')
_F_gnome_git="n"
Finclude gnome
sha1sums=('2ccf42ea7bc5e13cb24d6aa02309e8cdc469661e')
if [ "$_F_gnome_git" != "n" ]; then
	unset sha1sums
fi
replaces=("evolution-data-server-ldap")

subpkgs=("${subpkgs[@]}" "$pkgname-docs")
subdescs=("${subdescs[@]}" "Evolution Data Server Documentation")
subdepends=("${subdepends[@]}" "")
subrodepends=("${subrodepends[@]}" "")
subgroups=("${subgroups[@]}" 'docs-extra gnome-docs')
subarchs=("${subarchs[@]}" 'x86_64 i686')
makedepends=("${makedepends[@]}" 'gtk-doc')

_F_extract_taropts='-i'

Fconfopts="$Fconfopts --with-openldap=yes --enable-nss=yes \
	    --enable-nntp=yes --enable-smime=yes --enable-ipv6=yes --disable-debug  --enable-gtk3 \
	    --with-krb5=/usr --with-libdb=/usr --enable-gnome-keyring --enable-calendar=yes --enable-gtk-doc"

build() {
	if [ "$_F_gnome_git" != "n" ]; then
		Funpack_scm
		Fcd $pkgname
		sh ./autogen.sh
	fi
	Fbuild
	Fsplit $pkgname-docs usr/share/gtk-doc

}

# optimization OK
