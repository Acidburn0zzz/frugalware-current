# Compiling time: 0.93 SBU
# Maintainer: Baste <baste@frugalware.org>
# Contributor: bouleetbil <bouleetbil@frogdev.info>

options+=('asneeded')

pkgname=mutter
pkgver=3.14.2
pkgrel=1
pkgdesc="A window manager for GNOME (new metacity for gnome3)"
url="http://www.gnome.org/"
depends=('libxml2>=2.7.8' 'clutter>=1.20.0' 'startup-notification' \
	'gobject-introspection>=1.40.0' 'zenity' 'libcanberra-gtk' \
	'gsettings-desktop-schemas>=3.14.0' 'libsm' 'gnome-desktop>=3.14.0' 'upower>=0.99.0')
makedepends=('intltool' 'gnome-doc-utils')
groups=('gnome' 'gnome-minimal')
archs=('i686' 'x86_64')
_F_gnome_glib="y"
_F_gnome_git="n"
_F_gnome_devel="n"
_F_gnome_ext=".tar.xz"
Finclude gnome gnome-scriptlet
Fconfopts+=" --with-clutter --disable-static  --with-gtk=3.0 --enable-compile-warnings=minimum"
source=($source mutter.patch)
sha1sums=('51c6505a85fce36305760ab0a935850ebc61c619' \
          '4bed78b2e9bffd14c771a8fa579b80fe570fb650')

if [ "$_F_gnome_git" != "n" ]; then
	unset sha1sums
fi

build() {
	if [ "$_F_gnome_git" != "n" ]; then
		Funpack_scm
		Fcd $pkgname
		sh ./autogen.sh
	else
		Fcd
	fi

	Fsed "gbm >= 10.3" "gbm" configure.ac
	Fautoreconf
	Fbuild
	Fbuild_gnome_scriptlet
}
