# Compiling time: 0.38 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

# kill_g_debug.patch should be disabled for stable releases of gnome

pkgname=gnome-session
pkgver=2.30.2
pkgrel=1
pkgdesc="GNOME session manager"
depends=('gnome-desktop>=2.30.2' 'polkit' 'devicekit-power' \
	'dbus-glib>=0.76' 'gnome-control-center>=2.30.0' 'libnotify' 'gnome-keyring>=2.30.0-2')
makedepends=('intltool' 'gnome-common')
rodepends=('consolekit-x11')
groups=('gnome' 'gnome-minimal')
archs=('i686' 'x86_64' 'ppc')
_F_gnome_schemas=('/etc/gconf/schemas/gnome-session.schemas')
_F_gnome_iconcache="y"
_F_gnome_desktop="y"
Finclude gnome gnome-scriptlet
source=(${source[@]} enable_splash.diff \
	http://ftp.frugalware.org/pub/other/artwork/gnome-theme/GNOME-Splash-1.2.png )
sha1sums=('1333d2c1ebc4b80a00ee6a2f2d34309cfd73c5ea' \
          '1c2b3b009b06be2c320dad87868f42c56166641e' \
          '21f9e3653a600c112b77cd97402664ccfa8529d7')

build() {
	Fpatchall
	Fmake --disable-schemas-install --enable-splash
	Fmakeinstall GCONF_DISABLE_SCHEMA_INSTALL=1
	Fbuild_gnome_scriptlet

	# Drop old splash screen
	Frm usr/share/pixmaps/splash/gnome-splash.png

	# Frugalware Splash screen
	Ffile GNOME-Splash-1.2.png /usr/share/pixmaps/splash/gnome-splash.png
}

# optimization OK
