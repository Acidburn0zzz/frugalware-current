# Compiling time: 0.38 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

# kill_g_debug.patch should be disabled for stable releases of gnome

pkgname=gnome-session
pkgver=2.24.0
pkgrel=1
pkgdesc="GNOME session manager"
depends=('libgnomeui>=2.24.0' 'gnome-desktop>=2.24.0' \
	'dbus-glib>=0.76' 'gnome-control-center>=2.24.0.1' 'gnome-vfs>=2.24.0' 'libnotify' 'gnome-keyring>=2.24.0')
makedepends=('intltool')
groups=('gnome' 'gnome-minimal')
archs=('i686' 'x86_64' 'ppc')
_F_gnome_schemas=('/etc/gconf/schemas/gnome-session.schemas')
_F_gnome_iconcache="y"
_F_gnome_desktop="y"
Finclude gnome gnome-scriptlet
#TODO : move gnome_splash.png to real dir artwork frugalware if this splash is accept
source=(${source[@]} 02-splash-disappear.patch \
	$pkgname http://ftp.frugalware.org/pub/other/people/bouleetbil/artwork/gnome_splash.png \
	09_splash_hide.patch 19_gnome-wm-tweaking.patch)
sha1sums=('5a4b329db62ae3518029982ae86fb1b138500c3e' \
          'd45d51203dc7ad290b12bc70281d59844a79be75' \
          '047ac00bb24d52986aac94e232b4b40fa122f582' \
          'd6c30173ddf4524b49a593bc3b8cf0f278cab5a0' \
          '97585abf9d468e532422af3daceb42b61d832a13' \
          'a69fefc4ee7f11ee1be13f61a4f7c711f3390c80')

build() {
	#Fpatchall
	Fmake --disable-schemas-install
	Fmakeinstall GCONF_DISABLE_SCHEMA_INSTALL=1
	Fbuild_gnome_scriptlet
	Fmv /usr/bin/gnome-session /usr/bin/gnome-session.bin
	Fexe /usr/bin/gnome-session

	# Drop old splash screen
	Frm usr/share/pixmaps/splash/gnome-splash.png

	# Frugalware Splash screen
	Ffile gnome_splash.png /usr/share/pixmaps/splash/gnome-splash.png
}

# optimization OK
