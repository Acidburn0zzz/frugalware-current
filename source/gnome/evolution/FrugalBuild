# Last modified: Wed, 26 Jul 2006 02:14:52 +0200
# Compiling time: 12.68 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=evolution
pkgver=2.7.90
pkgrel=1
pkgdesc="Integrated mail, calendar and address book suite for GNOME"
url="http://www.gnome.org/projects/evolution/"
depends=('gail>=1.9.1' 'gal>=2.5.3' 'evolution-data-server>=1.7.90.1' 'gtkhtml>=3.11.90.1' \
	'gnome-pilot-conduits' 'gnome-spell' 'scrollkeeper' 'heimdal' 'evolution-data-server-ldap>=1.7.90.1' 'libbonobo')
makedepends=('intltool')
groups=('gnome' 'gnome-core')
archs=('i686' 'x86_64')
_F_gnome_schemas=('/etc/gconf/schemas/apps-evolution-mail-prompts-checkdefault-2.8.schemas'
	'/etc/gconf/schemas/apps_evolution_addressbook-2.8.schema'
	'/etc/gconf/schemas/apps_evolution_calendar-2.8.schemas'
	'/etc/gconf/schemas/apps_evolution_shell-2.8.schemas'
	'/etc/gconf/schemas/evolution-mail-2.8.schemas')
_F_gnome_scrollkeeper="y"
_F_gnome_desktop="y"
Finclude gnome gnome-scriptlet
#source=(${source[@]} fix_crash_on_amd64.patch0 fix_crash_optionmenu.patch0)
sha1sums=('82866fcf04a43a55a42198a8dfa914f065becc51')

build() {
	Fcd
	Fsed 'VERSION_COMMENT, ""' 'VERSION_COMMENT, "Frugalware Linux Distribution"' configure.in
	autoconf || Fdie
	Fbuild_slice_scrollkeeper
	Fconf --disable-schemas-install \
	--enable-pilot-conduits=yes --enable-nss=yes --enable-smime=yes \
	--datadir=/usr/share --with-openldap=yes --with-nspr-includes=/usr/include/nspr \
	--with-nspr-libs=/usr/lib --with-nss-includes=/usr/include/nss \
	--with-nss-libs=/usr/lib --enable-nntp=yes --enable-plugins=all \
	--enable-ipv6 --enable-mono=no --enable-exchange=yes --enable-gtk-doc \
	--with-krb5=/usr --disable-debug
	Fsed '.*KILL_PROCESS_CMD.*' '#define KILL_PROCESS_CMD "killall"' config.h
	make || Fdie

	Fmakeinstall GCONF_DISABLE_SCHEMA_INSTALL=1
	Fbuild_gnome_scriptlet
}

# optimization OK
