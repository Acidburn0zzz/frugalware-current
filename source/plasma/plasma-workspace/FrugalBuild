# Compiling Time: 0.44 SBU
# Maintainer: Melko <melko@frugalware.org>


pkgname=plasma-workspace
pkgrel=1
pkgdesc="KDE Plasma Workspace."
groups=('plasma')
archs=('i686' 'x86_64')
_F_kde_project="plasma"
Finclude kf5
depends=("libksysguard5>=$_F_kde_ver" "knewstuff>=$_F_kf5_full" "krunner5>=$_F_kf5_full" "kdesu>=$_F_kf5_full" \
	"baloo5>=$_F_kde_ver" "kjsembed>=$_F_kf5_full" "knotifyconfig>=$_F_kf5_full" "libkscreen5>=$_F_kde_ver" \
	"ktexteditor>=$_F_kf5_full" "kinit>=$_F_kf5_full" "kcmutils>=$_F_kf5_full" "kwin5>=$_F_kde_ver" \
	"kidletime>=$_F_kf5_full" "kdelibs4support>=$_F_kf5_full" "networkmanager-qt>=$_F_kf5_full" \
	"kxmlrpcclient>=$_F_kf5_full" )
makedepends=("${makedepends[@]}" 'qt5-base>=5.6.0-3' 'kdoctools' 'kemoticons' 'kitemmodels' )

## these all are needed by startkde and startplasma*
rodepends+=('xrdb' 'socat' 'xset' 'xsetroot' 'fontconfig' 'mkfontdir' 'xprop' "qt5-tools>=$_F_kdever_qt5")

replaces=('kdebase-workspace' 'kdebase-workspace-docs' 'ksmserver' 'kcminit' 'klipper' 'krunner' 'ksplash' \
	'plasma-generic' 'libkworkspace' 'plasma-dataengine-geolocation' 'libtaskmanager')
conflicts=("${replaces[@]}")

sha1sums=('9d7b63348e9f566e046c54a49cbd5a8457c5d49b')

build() {
	Fcd
	Fsed 'qtpaths' 'qtpaths-qt5' startkde/start*.cmake
	KDE_build
	Fmkdir etc/X11
	Fmv usr/share/xsessions etc/X11/sessions
}

# optimization OK
