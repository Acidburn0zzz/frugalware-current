# Last Modified: Thu, 09 Jun 2005 20:42:32 +0200
# Compiling Time: ~1 minute
# Contributor: VMiklos  <vmiklos@frugalware.org>
# Maintainer: Zsolt Szalai <xbit.lists@chello.hu>

pkgname=perl-mysql
pkgver=2.9008
pkgrel=1
pkgdesc="Database Interface to the MySQL database"
depends=('mysql' 'perl')
groups=('devel')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://www.cpan.org/modules/by-module/Mysql/?M=D'|grep DBD-mysql|grep tar.gz|sed -n -e 's/.*DBD-mysql-\(.*\)\.tar\.gz .*/\1/' -e '1 p'"
source=(http://www.cpan.org/modules/by-module/Mysql/DBD-mysql-$pkgver.tar.gz)
md5sums=('8779f4eb6b56024ddcbdffeb674ad683')
perlver=`perl -e 'printf "%vd",$^V'`

build()
{
	cd $startdir/src/DBD-mysql-$pkgver
	perl Makefile.PL

	make test
	make || return 1

	make install DESTDIR=$startdir/pkg
	cd $startdir/pkg/usr/lib/perl5
	mv site_perl/$perlver site_perl/current
	rm -rf $perlver
        find $startdir/pkg/usr/lib/perl5/ -name perllocal.pod -exec rm {} \;
	find $startdir/pkg/usr/lib/perl5/site_perl/current/ -name .packlist -exec rm {} \;
}

# vim: ft=sh
