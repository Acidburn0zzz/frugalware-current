# Compiling Time: 1.0 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=binutils
pkgver=2.18.50.0.8
pkgrel=3
pkgdesc="A set of programs to assemble and manipulate binary and object files"
url="http://www.gnu.org/software/binutils/"
depends=('bash' 'glibc>=2.8')
makedepends=('gcc>=4.3.1-2' 'pacman-g2>=3.7.0-3')
groups=('devel' 'devel-core')
archs=('i686' 'x86_64' 'ppc')
# for now, we need a devel version to utilize glibc >= 2.7
up2date="Flasttar http://ftp.gnu.org/gnu/$pkgname/ | sed 's/2.18/2.18.50.0.8/'"
#Fup2gnubz2
source=(http://www2.kernel.org/pub/linux/devel/$pkgname/$pkgname-$pkgver.tar.bz2)
#source=(http://ftp.gnu.org/gnu/$pkgname/$pkgname-$pkgver.tar.bz2)
#signatures=($source.sig)
sha1sums=('0f85fedd189ee8a4e6e76355a2cabbb0bf547ed0')

build()
{
	Fcd
	Fmake \
		--enable-shared \
		--disable-werror \
		--build=$CARCH-frugalware-linux
	Fmakeinstall
	if [ "$CARCH" == "x86_64" ]; then
		cd libiberty || Fdie
		unset MAKEFLAGS
		make clean || return 1
		make CFLAGS="-g -fPIC $CFLAGS" || return 1
		Ffilerel /usr/lib/libiberty.a
	fi
}

# optimization OK
