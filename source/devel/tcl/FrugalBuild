# Last Modified: Wed, 08 Jun 2005 23:24:38 +0200
# Compiling Time: ~2 minutes
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=tcl
pkgver=8.4.10
shortpkgver=8.4
pkgrel=2
pkgdesc="The Tcl scripting language"
url="http://tcl.sourceforge.net/"
depends=('bash')
groups=('devel')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://prdownloads.sourceforge.net/tcl/?sort_by=date&sort=desc'|grep 'tcl[0-9\.]*-src.tar.gz$'|sed -n 's/.*tcl\(.*\)-.*/\1/;1 p'"
source=(http://dl.sourceforge.net/sourceforge/tcl/tcl$pkgver-src.tar.gz \
	$pkgname-$pkgver-threaded_build.diff)
md5sums=('409488e199a51803199d72b5dc534bb0' '8ecba6a2ec03472d98cfc9d537154950')

build()
{
	Fcd tcl$pkgver/unix
	Fpatchall
	Fmake --enable-threads || return 1
	make INSTALL_ROOT=$Fdestdir install
	Fmv /usr/bin/tclsh$shortpkgver /usr/bin/tclsh
	
	# headers
	Fmkdir /usr/include/tcl/{tcl,unix}
	cp ../generic/*.h $Fdestdir/usr/include/tcl/tcl/
	cp *.h $Fdestdir/usr/include/tcl/unix/
}

# vim: ft=sh
