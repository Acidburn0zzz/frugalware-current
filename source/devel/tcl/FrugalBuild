# Last Modified: Tue Jul 27 13:08:42 CEST 2004
# Compiling Time: ~2 minutes
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=tcl
pkgver=8.4.7
shortpkgver=8.4
pkgrel=1
pkgdesc="The Tcl scripting language"
url="http://tcl.sourceforge.net/"
depends=('bash')
up2date=`lynx -dump http://sourceforge.net/project/showfiles.php?group_id=10894|grep 'tcl[[:print:]]*-src.tar.gz '|grep -v '[ab][[:digit:]]'|sed -n -e 's/.tar.gz//' -e 's/tcl//' -e '1 p'|cut -d ] -f 2|cut -d - -f 1`
source=(http://dl.sourceforge.net/sourceforge/tcl/tcl${pkgver}-src.tar.gz)
md5sums=('07e256e21bd0d05887770318b540c36f')

build() {
  cd $startdir/src/tcl$pkgver/unix
  ./configure --prefix=/usr --enable-threads

  make || return 1

  make INSTALL_ROOT=$startdir/pkg install

  # headers
  mkdir -p $startdir/pkg/usr/include/tcl
  cd $startdir/src/tcl$pkgver/generic
  cp *.h $startdir/pkg/usr/include/tcl

  # cosmetics & resolving conflicts with perl
  cd $startdir/pkg/usr/bin && mv tclsh$shortpkgver tclsh
  cd $startdir/pkg/usr/man/man3 && mv Thread.3 tclThread.3
}
