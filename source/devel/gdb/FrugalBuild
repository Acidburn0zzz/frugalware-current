# Compiling Time: 1.35 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Contributor: Shrift <shrift@frugalware.org>

pkgname=gdb
pkgver=6.7.1
pkgrel=1
pkgdesc="Gnu Project Debugger"
url="http://www.gnu.org/software/gdb/download/"
depends=('readline' 'mpfr')
groups=('devel')
archs=('i686' 'x86_64')
makedepends=('gmp')
Fup2gnubz2
source=(http://ftp.gnu.org/gnu/gdb/$pkgname-$pkgver.tar.bz2)
sha1sums=('4ecfb5896d511111d9a5d91e937501caa9d33ced')

build() {
	Fcd
# Drop readline for now :S
#	rm -rf readline || Fdie
#        Fpatch 01-gdb-6.3-use_system_readline.patch
#        Fpatch 02-gdb-6.3-readline_docs.patch
        # Fixes CVE-2006-4146 SEC bug
#        Fpatch gdb-cve-2006-4146-sec.patch
	Fmake --with-gmp=/usr --with-mpfr=/usr
        Fmakeinstall
	Frm /usr/include/{bfd.h,symcat.h,ansidecl.h,bfdlink.h}
	Frm /usr/lib/{libopcodes.a,libopcodes.la}
	Frm /usr/lib/{libiberty.a,libbfd.a,libbfd.la}
	Frm /usr/include/dis-asm.h
	Frm /usr/share/locale/*
	Frm /usr/info/bfd.info
	Frm /usr/info/configure.info
	Frm /usr/info/standards.info
}

# optimization OK
