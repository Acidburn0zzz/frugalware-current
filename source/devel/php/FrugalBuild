# Last Modified: Sat, 02 Apr 2005 00:06:33 +0200
# Compiling Time: ~12 minutes
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=php
pkgver=5.0.4
pkgrel=1
pkgdesc="A widely-used general-purpose scripting language"
url="http://www.php.net"
backup=(etc/php.ini)
depends=('openssl' 'libjpeg' 'freetype2' 'libpng' 'gdbm' 'libxslt')
makedepends=('apache' 'mysql' 'imap' 'postgresql' 'bzip2')
groups=('devel')
install=$pkgname.install
up2date="lynx -dump http://www.php.net/downloads.php |grep 'Complete Source Code' -3|sed -n 's/.*P \(.*\)/\1/;2 p'"
source=(http://www.php.net/distributions/$pkgname-$pkgver.tar.gz php.ini)
md5sums=('c8f5fa441fd99c1b363bd2a071a0bd97' '7f1854998deed154af487303f1ab4b67')

build()
{
	Fmake --with-config-file-path=/etc \
		--with-apxs2 --with-ttf --enable-mailparse \
		--enable-bcmath=shared --enable-calendar=shared \
		--enable-ftp=shared --enable-gd-native-ttf \
		--enable-magic-quotes --enable-posix=shared  \
		--enable-session --enable-shared --enable-shmop=shared \
		--enable-sysvsem=shared --enable-sysvshm=shared \
		--enable-track-vars --enable-trans-sid --enable-safe-mode \
		--enable-sockets=shared --with-bz2=shared --without-db2 \
		--without-db3 --with-freetype-dir=/usr --with-gd --with-gdbm \
		--enable-exif --with-jpeg-dir=/usr --with-mysql=shared,/usr \
		--with-mysql-sock=/tmp/mysql.sock --with-openssl \
		--with-gettext --with-pear=/usr/share/pear --with-dom \
		--with-dom-xslt --with-png-dir=/usr --with-regex=php \
		--with-zlib --with-pgsql=shared \
		--with-pgsql-sock=/tmp/pgsql.sock || return 1
	Fmkdir /usr/lib/apache
	Fsed "-i -a -n php5" "-i -n php5" Makefile
	make INSTALL_ROOT=$Fdestdir EXTENSION_DIR=/usr/lib/php install
	Ffile /etc/php.ini
	Fln /etc/php.ini /usr/lib/php.ini
}

# vim: ft=sh
