# Last Modified: Sat Oct  2 16:35:56 CEST 2004
# Compiling Time: ~1 minute
# Maintainer: VMiklos <mamajom@axelero.hu>

pkgname=j2sdk
pkgver=1.5.0
pkgrel=1
pkgdesc="Sun's java development kit"
url="http://java.sun.com/j2se/downloads.html"
# the official mirror seems to be exremly slow :-(
#pkgurl="http://ftp.isu.edu.tw/pub/Sun/java/J2SE/"
pkgurl="http://public.www.planetmirror.com/pub/java-sun/J2SE"
depends=( 'glibc' 'j2re')
makedepends=('x')
up2date=`lynx -dump $pkgurl/\?M=D|grep ][0-9\._]*/|sed -ne 's|.*]\(.*\)/.*|\1|' -e '1 p'`
source=($pkgurl/$pkgver/linux/jdk-`echo $pkgver|sed 's/\./_/g'`-linux-i586.bin j2sdk.profile)
md5sums=('81d0511feb32e7b7d61f7c07ee0b15e9' '77bcdc67b36de3f1c45e479d1e4199c0')

build() {
	mkdir -p $startdir/pkg/usr/lib
	cd $startdir/pkg/usr/lib
	echo "yes" | \
	sh $startdir/src/jdk-`echo $pkgver|sed 's/\./_/g'`-linux-i586.bin
	mv jdk$pkgver $pkgname
	rm -r $pkgname/jre $pkgname/demo
	for i in $pkgname/*
	do
		[ -f $i ] && rm -f $i
	done
	chown -R root.root $startdir/pkg/*
	install -D -m755 $startdir/src/$pkgname.profile \
		$startdir/pkg/etc/profile.d/$pkgname.sh
	ln -s /usr/lib/j2re $startdir/pkg/usr/lib/j2sdk/jre
}

# vim: ft=sh
