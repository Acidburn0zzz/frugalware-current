# Last Modified: Sat, 08 Oct 2005 00:48:35 +0200
# Compiling Time: ~0.17 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=j2sdk
pkgver=5.0_05
oldpkgver=1.5.0_05 # 1.5 = 5.0
realver=`echo $oldpkgver | tr . _`
pkgrel=1
pkgdesc="Sun's java development kit"
url="http://java.sun.com/j2se/downloads.html"
pkgurl="http://mirror.dcc.online.pt/Java/"
#pkgurl="http://ftp.isu.edu.tw/pub/Sun/java/J2SE/"
depends=('j2re') # NO, please don't add x to here!
groups=('devel')
archs=('i686' 'x86_64')
up2date="lynx -dump $pkgurl | grep -m1 'jdk-[0-9_]\+.*.bin' | cut -d - -f 2 | sed 's|1_5_|5.|'"
jarch=i586 && jsha1=8774151076374b5e11a558778fbae107ea7bd48c
[ "$CARCH" == "x86_64" ] && jarch=amd64 && jsha1=94189a1ebffe5e65823ccf4416d9f37eff17bb52
source=($pkgurl/jdk-$realver-linux-$jarch.bin j2sdk.sh)
sha1sums=("$jsha1" '8ece7898cf1e1b7f437455360c2549b0b8683723')

build()
{
	Fmkdir /usr/lib
	echo "yes" | sh jdk-$realver-linux-$jarch.bin 2> /dev/null || return 1
	cp -rf jdk$oldpkgver $Fdestdir/usr/lib/java || return 1
	for i in jdk$oldpkgver/* ; do
		if [ -f $i ] ; then
			Frm `echo $i | sed "s|jdk$oldpkgver|/usr/lib/java|"`
		fi
	done
	Frm /usr/lib/java/{jre,demo}
	chown -R root.root $Fdestdir/*
	Fexe /etc/profile.d/$pkgname.sh
}

# optimalization ok - i586

# vim: ft=sh
