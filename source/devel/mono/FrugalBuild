# Compiling time: 3.45 SBU
# Maintainer: AlexExtreme <alex@alex-smith.me.uk>

pkgname=mono
pkgver=1.9
pkgrel=2
pkgdesc="Mono runtime and class libraries, a C# compiler/interpreter"
url="http://www.mono-project.com/"
depends=('glib2' 'zlib')
makedepends=('libgdiplus>=1.9')
rodepends=('libxml2')
groups=('devel')
archs=('i686' 'x86_64' 'ppc')
Finclude mono
up2date="lynx -dump http://www.go-mono.com/sources-stable/|grep -m1 'mono-'|sed 's/.*-\(.*\).t.*/\1/'"
source=(http://www.go-mono.com/sources/$pkgname/$pkgname-$pkgver.tar.bz2 rc.mono rc.mono-hu.po \
	CVE-2008-3422.patch glibc28.patch)
Fconfopts="$Fconfopts --with-tls=__thread --with-libgdiplus=installed"
sha1sums=('1008f1bacb04de9ff9f5d87808ab0c5fba577a9d' \
          '70d030d677bc38c90ccd208f5cfea4a7b244e085' \
          '6c19f98462d7bb1ecba79a3ad284ea02a1eac2ec' \
          '848408a72e98f0fb63ca4c77701144f80dae36a0' \
          'a0dbb7ad54c1a71153ae051548da73984aa0c684')

build() {
	unset MAKEFLAGS
	Fcd
	Fpatchall
	Fmonoexport
#	libtoolize -c -f || Fdie
#	Fautoreconf
	Fmake
	Fmakeinstall
	Fmonocleanup
}

# optimization OK
