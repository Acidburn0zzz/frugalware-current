# Last modified: Fri, 01 Sep 2006 20:00:13 +0200
# Compiling time: 3.45 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=mono
pkgver=1.1.17.1
mainver=1.1
pkgrel=1
pkgdesc="Mono runtime and class libraries, a C# compiler/interpreter"
url="http://www.mono-project.com/"
depends=('glib2' 'zlib')
rodepends=('libxml2')
groups=('devel')
archs=('i686' 'x86_64')
up2date="lynx -dump http://www.go-mono.com/sources-latest/|grep -m1 'mono-'|sed 's/.*-\(.*\).t.*/\1/'"
source=(http://www.go-mono.com/sources/$pkgname/$pkgname-$pkgver.tar.gz rc.mono)
sha1sums=('970487ecb21e9b90255e0c7a420479f1cbd31d72' \
          '5ad25490e70b0d1f48b855c3287d962b3bd453be')

build()
{
	export MONO_SHARED_DIR=$Fdestdir/weird
	mkdir -p $MONO_SHARED_DIR

	Fpatchall
	
	Fmake --with-tls=__thread
	Fmakeinstall
	rm -rf $MONO_SHARED_DIR

	# Init scripts.
	Frcd
}

# optimization OK

# WARNING: PLEASE SEE THE mono.install file. There is a symlinking in there! Need to check if
#          symlink will be placed well, if not the whole mono will break.
