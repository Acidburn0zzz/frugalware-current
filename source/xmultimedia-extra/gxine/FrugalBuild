# Compiling Time: 0.20 SBU
# Maintainer: Priyank <priyankmg@gmail.com>

pkgname=gxine
pkgver=0.5.8
pkgrel=1
url="http://xinehq.de/"
pkgdesc="A Gtk based frontend to Xine"
depends=('gtk+2' 'spidermonkey' 'libxaw' 'xine-lib' 'dbus-glib')
makedepends=('nspr' 'firefox')
groups=('xmultimedia-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=9655 | grep -m1 gxine-.*.tar.bz2 | sed 's/.*-\(.*\).t.*/\1/'"
source=(http://heanet.dl.sourceforge.net/sourceforge/xine/$pkgname-$pkgver.tar.bz2)
sha1sums=('55aa45fae3fbfba7610e36f82f53f627c2a68635')

build()
{
	# Manually set the nspr CFLAGS and LIBS. confiugre doesn't see to find it
	export NSPR_CFLAGS="-I/usr/include/nspr4"
	export NSPR_LIBS="-lplds4 -lplc4 -lnspr4 -lpthread -ldl"
	
	# Now build
	Fbuild --disable-integration-wizard --with-x --without-mozjs \
                --with-spidermonkey=/usr/include/

	# Install mozilla plugin
	Fmkdir usr/lib/mozilla/plugins
	Fln /usr/lib/gxine/gxineplugin.so usr/lib/mozilla/plugins/gxineplugin.so
}

# optimization OK
