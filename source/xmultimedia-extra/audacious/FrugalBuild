# Compiling Time: 0.37 SBU
# Maintainer: James Buren <ryuo@frugalware.org>

pkgname=audacious
pkgver=2.3
pkgrel=2
pkgdesc="Audacious is a fork from BMP 0.9.7.1"
url="http://audacious-media-player.org"
depends=('dbus-glib' 'gtk+2>=2.16.2-2' 'libxau' 'libxdmcp' 'libmcs>=0.7.1-2' 'libxext>=1.0.5-3' \
	'libstdc++' 'libxdamage>=1.1.1-3' 'libice>=1.0.5-2' 'util-linux-ng')
rodepends=('audacious-plugins')
groups=('xmultimedia-extra')
archs=('i686' 'x86_64' 'ppc')
options=('scriptlet' 'force')
conflicts=('bmp' 'bmp-docklet' 'bmp-mac')
replaces=('bmp' 'bmp-docklet' 'bmp-mac')
up2date="lynx -dump '$url/downloads' | grep -o '$pkgname-\(.*\).tgz' | tail -n2 | head -n1 | sed 's|$pkgname-\(.*\).tgz|\1|'"
source=(http://distfiles.atheme.org/$pkgname-$pkgver.tgz)
sha1sums=('a7041650c54b6db68d0f3b3cf68f61fc7f841f34')

build()
{
	if [ "$CARCH" == "i686" ]; then
		opts="--disable-sse2"
	fi
	Fbuild \
		--enable-chardet \
		--disable-dependency-tracking \
		$opts
  # Remove the following lines if upstream ever fixes these symlinks
  Frm /usr/bin/aud{tool,acious}
  Fln /usr/bin/aud{tool,acious}{,2}
}

# optimization OK
