# Compiling Time: 0.01 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=picard
pkgver=0.7.2
pkgrel=3
pkgdesc="The next generation MusicBrainz tagger"
url="http://musicbrainz.org/products/picard/"
depends=('python-ctypes' 'python-musicbrainz2' 'libtunepimp-python>=0.5.3' 'libmusicbrainz' \
	'wxpython>=2.8.7.1' 'wxgtk>=2.8.7')
groups=('xmultimedia-extra')
archs=('i686' 'x86_64')
options=('nostrip' 'scriptlet')
up2date="lynx -dump 'http://ftp.musicbrainz.org/pub/musicbrainz/$pkgname/?C=M;O=D'|grep $pkgname.*tar.gz$|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=(ftp://ftp.musicbrainz.org/pub/musicbrainz/$pkgname/$pkgname-$pkgver.tar.gz wxpy28.patch)
sha1sums=('4046bcaf3b481c13f7bcbb2f2a858eacdbba1184' \
          'f81e2aa7c52b351a7425fca1d8276c4558d2fc06')

build() {
	Fcd
	Fpatchall
	# Need a patch from svn to run with libtunepimp 0.4 (autofinger disabled :( )
	python setup.py install --prefix "$Fprefix" --root "$Fdestdir" || Fdie
	# Wrapper fixup
	sed -i -e "s|/var/tmp/fst/pkg||g" "$Fdestdir/usr/bin/picard" || Fdie
}
