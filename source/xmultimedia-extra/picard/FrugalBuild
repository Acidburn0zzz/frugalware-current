# Compiling Time: 0.01 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>
# Contributor: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=picard
pkgver=0.14
pkgrel=2
pkgdesc="The next generation MusicBrainz tagger"
url="http://musicbrainz.org/doc/PicardTagger"
depends=('python' 'mutagen' 'pyqt4' 'ffmpeg>=0.8' 'libdiscid' 'libofa' 'libtheora' 'libx11' 'libgcc')
groups=('xmultimedia-extra')
archs=('i686' 'x86_64')
options=('nostrip')
_F_gnome_desktop="y"
_F_gnome_iconcache="y"
Finclude gnome-scriptlet python
up2date="lynx -dump 'http://ftp.musicbrainz.org/pub/musicbrainz/$pkgname/?C=M;O=D'|grep $pkgname.*tar.gz$|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=(ftp://ftp.musicbrainz.org/pub/musicbrainz/$pkgname/$pkgname-$pkgver.tar.gz \
	http://users.musicbrainz.org/~outsidecontext/picard/plugins/coverart.py \
	$pkgname-0.13-ffmpeg.patch)
sha1sums=('e8d2b7098bca8124459c636cbb20a62f767a7756' \
          '0c244339da6d4786d3a316f0b9a8856c839944d9' \
          '5b0c307d0ecd90afe2f47535bc802b690317e6e7')

build() {
	Fcd
	Fpatchall
	python setup.py config || Fdie
	python setup.py install --root=$Fdestdir || Fdie
	# Wrapper fixup
	sed -i -e "s|/var/tmp/fst/pkg||g" "$Fdestdir/usr/bin/picard" || Fdie
	Fbuild_gnome_scriptlet
	# coverart plugin
	Ffile coverart.py $_F_python_libdir/$pkgname/plugins/coverart.py
}

# optimization OK
