# Compiling Time: 0.37 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=audacious-plugins
pkgver=1.4.0_beta3
pkgrel=1
pkgdesc="Plugins for audacious."
url="http://audacious-media-player.org/"
depends=('libsidplay' 'openssl' 'curl>=7.16.0' 'dbus-glib' 'sdl' 'libmpcdec' 'audacious>=1.4.0_beta2' 'faad2' \
	'flac>=1.1.4' 'libvorbis' 'wavpack>=4.40.0' 'adplug>=2.1' 'libmodplug' 'unzip' 'libsidplay2' \
	'libnms' 'glib2>=2.14.2' 'libmms' 'lame' 'libmad' 'libsndfile' 'libxcomposite' \
	'neon' 'libmtp' 'imlib2' 'libcdio')
makedepends=('jack' 'arts' 'esd' 'libsamplerate' 'lirc' 'libprojectm>=1.01')
groups=('xmultimedia-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
up2date="lynx -dump 'http://audacious-media-player.org/index.php?title=Downloads'|grep -m1 'audacious-plugins-\(.*\).tbz2'|sed 's/.*ins-\(.*\).t.*/\1/;s/-/_/'"
source=(http://distfiles.atheme.org/$pkgname-`echo $pkgver|sed 's/_/-/'`.tbz2)
_F_cd_path="$pkgname-`echo $pkgver|sed 's/_/-/'`"

subpkgs=("audacious-plugin-arts" "audacious-plugin-esd" "audacious-plugin-jack" "audacious-plugin-lirc" \
	 "audacious-plugin-projectm")
subdescs=('Audacious arts output plugin' 'Audacious esd output plugin' 'Audacious jack output plugin' \
	'Audacious lirc plugin' 'Audacious projectm visualization plugin')
subdepends=("$pkgname=$pkgver arts" "$pkgname=$pkgver esd" "$pkgname=$pkgver libsamplerate jack" \
         "$pkgname=$pkgver lirc" "$pkgname=$pkgver libprojectm>=1.01")
subgroups=('xmultimedia-extra' 'xmultimedia-extra' 'xmultimedia-extra' 'xmultimedia-extra' 'xmultimedia-extra')
subarchs=('i686 x86_64' 'i686 x86_64' 'i686 x86_64' 'i686 x86_64' 'i686 x86_64')

build()
{
	CFLAGS="$CFLAGS -fno-strict-aliasing" \
	CXXFLAGS="$CXXFLAGS -fno-strict-aliasing" \
	Fmake \
		--prefix=/usr
		--enable-chardet \
		--enable-ipv6 \
		--disable-dependency-tracking \
		--disable-amidiplug-flsyn \
		--disable-sse2
	## Fbuild/Fmakeinstall does not work 
	make DESTDIR=$Fdestdir install || Fdie
	Fsplit audacious-plugin-arts usr/lib/audacious/Output/arts.so
	Fsplit audacious-plugin-arts usr/bin/audacious-arts-helper
	Fsplit audacious-plugin-esd usr/lib/audacious/Output/ESD.so
	Fsplit audacious-plugin-jack usr/lib/audacious/Output/jackout.so
	Fsplit audacious-plugin-lirc usr/lib/audacious/General/lirc.so
	Fsplit audacious-plugin-projectm usr/lib/audacious/Visualization/projectm*.so
}

# optimalization OK
sha1sums=('df7675bd1cd8c4dd2b3a5f7d2a07266302e9edf3')
