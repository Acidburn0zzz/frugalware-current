# Compiling Time: 0.37 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=audacious-plugins
pkgver=1.3.0
pkgrel=1
pkgdesc="Plugins for audacious."
url="http://audacious-media-player.org/"
depends=('libsidplay' 'openssl' 'curl>=7.16.0' 'dbus-glib' 'sdl' 'libmpcdec' 'audacious>=1.3.0' 'faad2' \
	'flac>=1.1.3' 'libvorbis' 'wavpack>=4.40.0' 'adplug' 'libmodplug' 'unzip' 'libsidplay2' 'libnms' 'glib2>=2.12.8' \
	'libmms' 'lame')
makedepends=('jack' 'arts' 'esd' 'libsamplerate' 'lirc')
groups=('xmultimedia-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
up2date="lynx -dump 'http://audacious-media-player.org/Downloads'|grep -m1 'audacious-plugins-\(.*\).tgz'|sed 's/.*ins-\(.*\).t.*/\1/'"
source=(http://static.audacious-media-player.org/release/$pkgname-$pkgver.tgz)

subpkgs=("audacious-plugin-arts" "audacious-plugin-esd" "audacious-plugin-jack" "audacious-plugin-lirc")
subdescs=('Audacious arts output plugin' 'Audacious esd output plugin' 'Audacious jack output plugin' 'Audacious lirc plugin')
subdepends=("$pkgname=$pkgver arts" "$pkgname=$pkgver esd" "$pkgname=$pkgver libsamplerate jack" "$pkgname=$pkgver lirc")
subgroups=('xmultimedia-extra' 'xmultimedia-extra' 'xmultimedia-extra' 'xmultimedia-extra')
subarchs=('i686 x86_64' 'i686 x86_64' 'i686 x86_64' 'i686 x86_64')

build()
{
	Fbuild \
		--enable-chardet \
		--enable-ipv6 \
		--disable-dependency-tracking \
		--disable-amidiplug-flsyn
	Fsplit audacious-plugin-arts usr/lib/audacious/Output/libarts.so
	Fsplit audacious-plugin-arts usr/bin/audacious-arts-helper
	Fsplit audacious-plugin-esd usr/lib/audacious/Output/libESD.so
	Fsplit audacious-plugin-jack usr/lib/audacious/Output/libjackout.so
	Fsplit audacious-plugin-lirc usr/lib/audacious/General/liblirc.so
}

# optimalization OK
sha1sums=('94210d33f4267bafce0269041a362ccd88d69044')
