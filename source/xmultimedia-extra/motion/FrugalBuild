# Compiling Time: 0.10 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>
# Contributor: enda <enda@netou.com>

pkgname=motion
pkgver=3.2.9
pkgrel=2
pkgdesc="Motion is a program that monitors the video signal from one or more cameras and is able to detect if a significant part of the picture has changed. Or in other words, it can detect motion."
Finclude sourceforge
url="http://www.lavrsen.dk/twiki/bin/view/Motion/"
depends=('zlib' 'ffmpeg>=20080427' 'jhead' 'libjpeg')
groups=('xmultimedia-extra')
install="motion.install"
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://www.lavrsen.dk/twiki/bin/view/Motion/DownloadFiles' |grep 'Current version is'| sed 's/.*Current version is \(.*\).*/\1/'"
source=($source rc.motion README.Frugalware ffmpeg.diff)
sha1sums=('1417529f8c49bdf922caa7d0c746c4a2277fe34a' \
          '1d85dce27289f756bdf9c96c78c9587d258190cf' \
          'b0598b9068e3e136d4a4864f5fc66749c787d7f6' \
          '06ba5c814fed7feb825751dbf29ed32233344056')
Fconfopts="$Fconfopts --without-mysql --without-pgsql"

build()
{
	Fcd
	Fpatchall
	Fautoreconf
	# DO NOT REMOVE THIS!!
	Fmake --without-optimizecpu

  	# Get the latest update guide
	make updateguide || return 1
	
  	Fmakeinstall
	Fdoc README.Frugalware
	Frcd2
}

# optimization OK
