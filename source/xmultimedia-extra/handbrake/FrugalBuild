# Compiling Time: 0.14 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=handbrake
_F_archive_name="HandBrake"
pkgver=0.9.4
pkgrel=1
pkgdesc="HandBrake is an open-source, multiplatform, multithreaded video transcoder"
url="http://handbrake.m0k.org/index.php"
up2date="lynx --dump --source http://handbrake.fr/downloads.php | Flasttar"
source=(http://saintdevelopment.com/mirror/${pkgname}/${_F_archive_name}-${pkgver}.tar.bz2 \
	gtk2.20_fixes.patch)
depends=("libstdc++")
makedepends=('intltool' 'jam' 'subversion' 'yasm')
groups=('xmultimedia-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
_F_gnome_desktop="y"
_F_gnome_iconcache=y
Finclude gnome-scriptlet
unset install
sha1sums=('91329a83315b7eae0b2b3731a8bf0f2de2a6eb4d' \
          '17b39144d9883b1f63d9b9ff2f6770b35bbdb16a')
subpkgs=("gtk-handbrake")
subdescs=('gtk gui for handbrake')
subdepends=("webkit hal libnotify")
subrodepends=("handbrake")
subgroups=('xapps-extra')
subarchs=('i686 x86_64')
subinstall=("$_F_gnome_scriptlet")

build() {
	Fcd
	Fpatchall
	./configure --prefix=/usr \
              --force || Fdie
	cd build || Fdie
  	make || return Fdie
  	make DESTDIR="${Fdestdir}" install || Fdie
	Frm usr/share/icons/hicolor/icon-theme.cache
	Fsplit gtk-handbrake usr/bin/ghb
	Fsplit gtk-handbrake usr/share
	Fbuild_gnome_scriptlet
}

# optimization OK
