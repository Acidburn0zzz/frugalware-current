# Compiling Time: 0.14 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=handbrake
_F_archive_name="HandBrake"
pkgver=0.9.3
pkgrel=1
pkgdesc="HandBrake is an open-source, multiplatform, multithreaded video transcoder"
url="http://handbrake.m0k.org/index.php"
up2date="lynx --dump --source http://handbrake.fr/?article=download | Flasttar"
source=(http://download.m0k.org/handbrake/$_F_archive_name-$pkgver.tar.gz)
depends=('gst-plugins-base' 'a52dec' 'faac' 'ffmpeg' 'lame' 'libdvdcss' 'libdvdread' \
		'libogg' 'libsamplerate' 'libvorbis' 'libmpeg3' 'mpeg4ip' \
		'x264' 'xvidcore' 'nasm')
makedepends=('intltool' 'jam' 'gtk+2' 'gtkhtml' 'subversion')
groups=('xmultimedia-extra')
archs=('i686')
options=('scriptlet')
_F_gnome_desktop="y"
_F_gnome_iconcache=y
Finclude gnome-scriptlet
unset install
sha1sums=('f52389b1226bf81ba58bca67f3a1aa468cfee624')

subpkgs=("gtk-handbrake")
subdescs=('gtk gui for handbrake')
subdepends=("gtk+2 gtkhtml handbrake")
subgroups=('gnome-extra')
subarchs=('i686')
subinstall=("$_F_gnome_scriptlet")
#qt-handbrake have no maintainer and is broken

build() {
	Fcd
	Fmake
	Fmkdir usr/bin
	Fcp $_F_archive_name-$pkgver/HandBrakeCLI usr/bin/
	cd gtk || Fdie
	sh ./autogen.sh || Fdie
	Fmake
	Fmakeinstall
	Frm usr/share/icons/hicolor/icon-theme.cache
	Fsplit gtk-handbrake usr/bin/ghb
	Fsplit gtk-handbrake usr/share/doc/ghb
	Fsplit gtk-handbrake usr/share/applications/ghb.desktop
	Fsplit gtk-handbrake usr/share/icons
	Fbuild_gnome_scriptlet
}

# optimization OK
