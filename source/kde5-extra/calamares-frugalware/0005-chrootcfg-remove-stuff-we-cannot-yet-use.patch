From 6273d375dcc9dfdbc98159b635f740668730efca Mon Sep 17 00:00:00 2001
From: Gabriel Craciunescu <crazy@frugalware.org>
Date: Sun, 22 Oct 2017 03:45:22 +0200
Subject: [PATCH 5/6] chrootcfg: remove stuff we cannot yet use

---
 src/modules/chrootcfg/chrootcfg.conf |  9 ---------
 src/modules/chrootcfg/main.py        | 22 +---------------------
 2 files changed, 1 insertion(+), 30 deletions(-)

diff --git a/src/modules/chrootcfg/chrootcfg.conf b/src/modules/chrootcfg/chrootcfg.conf
index 5ed526f93..c18e2d5e4 100644
--- a/src/modules/chrootcfg/chrootcfg.conf
+++ b/src/modules/chrootcfg/chrootcfg.conf
@@ -2,13 +2,4 @@
 requirements:
     - name: /etc
       mode: "0o755"
-    - name: /var/cache/pacman-g2/pkg
-      mode: "0o755"
-    - name: /var/lib/pacman-g2
-      mode: "0o755"
 
-# these only work once we merge with upstream pacman
-# DO NOT enable
-#keyrings:
-#    - archlinux
-#    - artix
diff --git a/src/modules/chrootcfg/main.py b/src/modules/chrootcfg/main.py
index 3d5f06e82..5786d8af4 100644
--- a/src/modules/chrootcfg/main.py
+++ b/src/modules/chrootcfg/main.py
@@ -68,19 +68,6 @@ class PacmanController:
             'packageOperations'
         )
         self.tracker = OperationTracker()
-        #self.keyrings = libcalamares.job.configuration.get('keyrings', [])
-
-    def init_keyring(self):
-        """Initializes pacman keyring
-        """
-
-        #target_env_call(["pacman-key", "--init"])
-
-    def populate_keyring(self):
-        """Populates pacman keyring
-        """
-
-        #target_env_call(["pacman-key", "--populate"] + self.keyrings)
 
     def parse_output(self, cmd):
         """Parses installation output
@@ -134,10 +121,6 @@ class PacmanController:
     def install(self, pkglist, local=False):
         """Install the given packagelist
         """
-        # not used
-        cachedir = join(self.root, "var/cache/pacman-g2/pkg")
-        dbdir = join(self.root, "var/lib/pacman-g2")
-
         args = 'pacman --noconfirm --noarch --noprogressbar {} --root {} {}'
         cmd = args.format(
             '-U' if local else '-Sy', self.root,
@@ -162,7 +145,7 @@ class PacmanController:
         for key in self.operations.keys():
             # append package to pkgs
             [pkgs.append(p['package']) for p in self.operations[key]]
-
+            ## ?!?
             if key in ["install", "localinstall"]:
                 self.install(pkgs, local=False if key == 'install' else True)
             elif key == "remove":
@@ -173,9 +156,6 @@ class PacmanController:
             elif key == "try_remove":
                 self.remove(pkgs)
 
-        #self.init_keyring()
-        #self.populate_keyring()
-
 
 class ChrootController:
     """Chroot controller
-- 
2.14.2

