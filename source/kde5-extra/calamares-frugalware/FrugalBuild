# Compiling Time: 0.42 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=calamares-frugalware
pkgver=3.1
pkgrel=7
pkgdesc="Distribution-independent installer framework"
archs=("x86_64")
groups=('kde5-extra')
_F_github_name="calamares"
_F_github_tag_v=y
_F_kde_defaults=0
Finclude kf5 github
source+=(calamares-locale.service  calamares-locale-setup fw-modules.patch)
depends=('kpmcore>=3.0.0' 'qt5-webengine' 'pyqt5-python3' 'libboost' \
	"kcoreaddons>=$_F_kf5_full" "kconfig>=$_F_kf5_full" \
	"ki18n>=$_F_kf5_full" "kiconthemes>=$_F_kf5_full" \
	"kio>=$_F_kf5_full" "kservice>=$_F_kf5_full" "kparts>=$_F_kf5_full")
makedepends+=('qt5-tools' 'boost' 'yaml-cpp')
rodepends=('rsync' 'squashfs')
_F_cd_path="calamares-$pkgver"
sha1sums=('36e5e4b0a84167655f1bfe75b8352298e944c0a1' \
          'a496ee65a14fad4c96fe2a51d59f5769a9286411' \
          'abd9098e0b3f988182a4b0f3173bffb9f0f7c215' \
          '84a757445243cb37b4ea22be0abd585b0deaefab')

build() {

	Fcd
	KDE_build
	## fixme for !systemd
	Finstall 644 lib/systemd/system/calamares-locale.service
	Finstall 755 usr/lib/fvbe/calamares-locale-setup
	## remove desktop file we have one in fvbe
	Frm usr/share/applications/calamares.desktop
}
# optimization OK

