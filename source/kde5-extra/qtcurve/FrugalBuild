# Compiling Time: 0 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=qtcurve
pkgver=1.8.20.g3d8622c
pkgrel=2
pkgdesc="QtCurve Theme libs"
archs=('i686' 'x86_64')
_F_cmake_confopts="	  -DQTC_QT4_ENABLE_KDE=false"

groups=('kde5-extra')
_F_scm_type="git"
_F_scm_url="git://anongit.kde.org/qtcurve.git"
_F_kde_project="applications"
Finclude kf5 scm
unset source

depends=('libqtdbus')
makedepends+=("gtk+2" "karchive>=$_F_kf5_full" "kconfig>=$_F_kf5_full" \
	"kconfigwidgets>=$_F_kf5_full" "ki18n>=$_F_kf5_full" \
	"kdelibs4support>=$_F_kf5_full" "kio>=$_F_kf5_full" \
	"kguiaddons>=$_F_kf5_full" "kiconthemes>=$_F_kf5_full" \
	"kwidgetsaddons>=$_F_kf5_full" "kxmlgui>=$_F_kf5_full" \
	 'libqtgui' 'libqtsvg')

replaces=('qtcurve-qt4')
provides=('qtcurve-qt4')
conflicts=('qtcurve-qt4')

subpkgs=("${subpkgs[@]}" "kde-theme-qtcurve")
subdescs=("${subdescs[@]}" 'KDE QtCurve Theme')
subdepends=("${subdepends[@]}" "")
subrodepends=("${subrodepends[@]}" "qtcurve>=$pkgver")
subgroups=("${subgroups[@]}" 'kde5')
subarchs=("${subarchs[@]}" 'i686 x86_64')

subpkgs=("${subpkgs[@]}" "qtcurve-gtk2")
subdescs=("${subdescs[@]}" 'QtCurve-Gtk2')
subdepends=("${subdepends[@]}" "gtk+2-libs")
subrodepends=("${subrodepends[@]}" "qtcurve>=$pkgver")
subgroups=("${subgroups[@]}" 'xlib-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64')

subpkgs=("${subpkgs[@]}" "qtcurve-qt5")
subdescs=("${subdescs[@]}" 'QtCurve Qt5 Theme')
subdepends=("${subdepends[@]}" 'kdelibs4support qt5-svg')
subrodepends=("${subrodepends[@]}" "qtcurve>=$pkgver")
subgroups=("${subgroups[@]}" 'xlib-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64')

build() {
	Funpack_scm
	CMake_build

	# KDE
	Fsplit kde-theme-qtcurve /usr/share/kstyle

	# GTK2
	Fsplit qtcurve-gtk2 /usr/share/themes/QtCurve
	Fsplit qtcurve-gtk2 /usr/lib/gtk-2.0
	Fsplit qtcurve-gtk2 /usr/lib/libqtcurve-cairo.so*

	# Qt5
	Fsplit qtcurve-qt5 /usr/lib/qt5
}


# optimization OK
