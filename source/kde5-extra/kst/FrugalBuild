# Compiling Time: 4.35 SBU
# Maintainer: Melko <melko@frugalware.org>

pkgname=kst
pkgver=2.0.8.g336fcf6
pkgrel=1
pkgdesc="Fast real-time large-dataset viewing and plotting tool for KDE"
archs=('i686' 'x86_64')
groups=('kde5-extra')
depends=('qt5-svg' 'gsl' 'cfitsio' 'libtiff')
_F_scm_type="git"
_F_scm_tag="master"
_F_scm_url="git://anongit.kde.org/kst-plot"
_F_kde_project="applications"
Finclude kf5 scm
unset source
options+=('force')
_F_cmake_confopts+="	-Dkst_qt5=ON \
			-Dkst_install_prefix=/usr "

build()
{
	export CXXFLAGS+=" -std=c++11"
        Funpack_scm

	Fsed  '#define KST_ISNAN(a)    isnan(a)' '#define KST_ISNAN(a)    std::isnan(a)' src/libkst/math_kst.h
	Fsed 'isinf' 'std::isinf' src/libkstmath/curve.cpp
	Fsed 'isnan' 'std::isnan' src/libkstapp/plotaxis.cpp

        KDE_build
}
