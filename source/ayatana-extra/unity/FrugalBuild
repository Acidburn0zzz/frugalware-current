# Compiling Time: 0.33 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>

pkgname=unity
pkgver=3.8.14
branch=3.0
pkgrel=1
pkgdesc="A desktop experience designed for efficiency of space and interaction"
url="https://launchpad.net/unity/"
depends=('compiz-gnome>=0.9.4-2' 'nux>=0.9.48' 'bamf>=0.2.70' 'libdee>=0.5.16' 'libdbusmenu>=0.4.0' 'libindicator' \
	'libunity-misc' 'unity-asset-pool' 'compizconfig-backend-gconf')
makedepends=('vala' 'intltool' 'gobject-introspection' 'boost')
groups=('ayatana-extra')
_F_cmake_confopts="-DCMAKE_BUILD_TYPE=Release -DCOMPIZ_PLUGIN_INSTALL_TYPE=package"
_F_gnome_glib="y"
_F_gnome_schemas=('/etc/gconf/schemas/compiz-unityshell.schemas')
Finclude cmake gnome-scriptlet
archs=('i686' 'x86_64')
up2date="Flasttar $url"
source=($url/$branch/$pkgver/+download/$pkgname-$pkgver.tar.bz2 frugalware-icon.png unity-3.2.14-disable_tests.patch)
sha1sums=('4a825555237d522aa30682c691cbb648a1398c5e' \
          '74be0bbad4cda0b411fb4f8e62c5fa401535aa8b' \
          '14b8f00bc15e7789fc81a87a0b7f4505baf43957')

build() {
    CMake_build

    Fmkdir /etc/gconf/schemas/
    Fmv usr/share/gconf/schemas/compiz-unitymtgrabhandles.schemas etc/gconf/schemas/compiz-unitymtgrabhandles.schemas
    Frm usr/share/gconf/
    Fbuild_gnome_scriptlet
    Frm /var

    # replacing ubuntu icon by frugalware icon :)
    Frm usr/share/unity/3/bfb.png
    Ffile frugalware-icon.png usr/share/unity/3/bfb.png
}


# optimization OK
